// variable only referenced in this file
$arrow-size: 9px;

.c-tooltip {
  display: flex;
  justify-content: center;
  position: relative;
}

.c-tooltip__link .c-button__icon {
  transition: transform .2s ease-out;
}

.c-tooltip__link.has-open-tooltip .c-button__icon {
  transform: rotate(180deg);
}

 .c-tooltip__button {
   margin-bottom: 10px;
   background-color: map-get($color-primary-action, primary-action-bright);
 }

.c-tooltip__button.has-open-tooltip {
  background-color: map-get($color-basic, primary-brand);
  .c-button__icon {
    transform: rotate(180deg);
  }
}

//  molecules/12-user-login-info/user-login-info
//  molecules/22-tied-agent/tied-agent & molecules/22-tied-agent/your-agent
.c-tied-agent-info-tooltip__link .c-link__icon,
.c-user-login-info__link .c-button__icon {
  transition: transform .2s ease-out;
}

//  molecules/12-user-login-info/user-login-info
//  molecules/22-tied-agent/tied-agent & molecules/22-tied-agent/your-agent
.c-tied-agent-info-tooltip__link.has-open-tooltip .c-link__icon,
.c-user-login-info__link.has-open-tooltip .c-button__icon {
  transform: rotate(180deg);
}

.c-tooltip__item {
  @include paperstyle();
  position: absolute;
  top: calc(100% + #{$arrow-size});
  left: 50%;
  visibility: hidden;
  transform: translateX(-50%) scale(0);
  min-width: 340px;
  padding-top: 15px;
  padding-bottom: 15px;
  transform-origin: top;
  transition: all 0.25s ease-out;
  z-index: 10;

  &:before,
  &:after {
    border-bottom: $arrow-size solid $c-white;
    border-left: $arrow-size solid transparent;
    border-right: $arrow-size solid transparent;
    bottom: 100%;
    content: "";
    height: 0;
    left: 50%;
    margin-bottom: -1px;
    margin-left: (-1 * $arrow-size);
    position: absolute;
    width: 0;
  }

  &:before {
    border-bottom-color: $c-grey-shadow-lighter;
    filter: blur(1px);
    margin-bottom: 1px;
  }

  .has-error ~ .c-tooltip & {
    border-color: $c-accent-red;
    margin-top: 20px;
    width: 100%;
  }

  .has-error ~ .c-tooltip & .icon {
    position: relative;
    top: 2px;
    left: -5px;
  }

  .has-error ~ .c-tooltip &:before,
  .has-error ~ .c-tooltip &:after {
    left: 10%;
  }

  .has-error ~ .c-tooltip &:before {
    border-bottom-color: $c-accent-red;
    filter: blur(0px);
    margin-bottom: 1px;
  }

  .has-info ~ .c-tooltip & {
    width: 100%;
    padding: 19px 25px 24px 25px;
  }

  .has-info ~ .c-tooltip &:before,
  .has-info ~ .c-tooltip &:after {
    border-bottom: 0px;
    border-left: 0px;
    border-right: 0px;
  }
}

.c-tooltip--right,
.c-tooltip--left {
  align-items: center;
}

.c-tooltip--left .c-tooltip__item,
.c-tooltip--right .c-tooltip__item {
  width: calc(100% - #{$arrow-size});
  top: 50%;
}

.c-tooltip--right .c-tooltip__item {
  left: 50%;
  visibility: hidden;
  transform: translateX(50%) translateY(-50%) scale(0);
  transform-origin: left;

  &:before,
  &:after {
    border-bottom: $arrow-size solid transparent;
    border-left: 0;
    border-right: $arrow-size solid $c-white;
    border-top: $arrow-size solid transparent;
    bottom: auto;
    left: auto;
    margin: (-1 * $arrow-size) -1px 0 0;
    right: 100%;
    top: 50%;
  }

  &:before {
    border-right-color: $c-grey-shadow-lighter;
    margin-right: 2px;
  }

}

.c-tooltip--left .c-tooltip__item {
  left: -50%;
  visibility: hidden;
  transform: translateX(-50%) translateY(-50%) scale(0);
  transform-origin: right;

  &:before,
  &:after {
    border-bottom: $arrow-size solid transparent;
    border-left: $arrow-size solid $c-white;
    border-right: 0;
    border-top: $arrow-size solid transparent;
    bottom: auto;
    left: 100%;
    margin: (-1 * $arrow-size) 0 0 -1px;
    top: 50%;
  }

  &:before {
    border-left-color: $c-grey-shadow-lighter;
    margin-left: 2px;
  }
}

.c-tooltip--top .c-tooltip__item {
  top: auto;
  bottom: calc(100% + #{$arrow-size});
  transform-origin: bottom;

  &:before,
  &:after {
    border-bottom: 0;
    border-left: $arrow-size solid transparent;
    border-right: $arrow-size solid transparent;
    border-top: $arrow-size solid $c-white;
    bottom: auto;
    left: 50%;
    margin: -1px 0 0 (-1 * $arrow-size);
    top: 100%;
  }

  &:before {
    border-top-color: $c-grey-shadow-light;
    filter: blur(2px);
    margin-top: 3px;
  }
}

.c-tooltip__item.is-open {
    visibility: visible;
    transform: translateX(-50%) scale(1);
}

.c-tooltip--left .c-tooltip__item.is-open {
    visibility: visible;
    transform: translateX(-50%) translateY(-50%) scale(1);
}

.c-tooltip--right .c-tooltip__item.is-open {
    visibility: visible;
    transform: translateX(50%) translateY(-50%) scale(1);
}

.c-tooltip .c-copy {
  margin: 0;  //  Margin will make Tooltip bottom not symmetry with top

  .has-error ~ & {
    margin: 0;  //  Margin will make Tooltip bottom not symmetry with top
    color: $c-accent-red;
  }
}

.c-tooltip--inline {
  display: inline-flex;
}

.c-comparison-table__c-tooltip {
  height: 25px;
  flex: 0 0 auto;
  display: inline-flex;
  .c-tooltip__item {
    left: 70px;
    z-index: 3;
    &:before,
    &:after {
      left: 110px;
    }
  }

  &.c-tooltip--left {
    .c-tooltip__item.is-open {
      z-index: 3;
      left: -10px;
      visibility: visible;
      transform: translateX(-100%) translateY(-50%) scale(1);
      &:before,
      &:after {
        left: 100%;
      }
    }
  }
}

.c-tooltip__item {
  .c-header-metabar__user & {
    // Extra 1px from border height
    top: calc(100% + #{$arrow-size + 1px});
  }
  .c-header-metabar__agent & {
    top: 100%;
  }
}

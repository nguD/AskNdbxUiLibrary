/**
 * @fileoverview added by tsickle
 * Generated from: pagination/pagination-utils.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
/**
 * \@docs-private
 */
export class NxPaginationUtils {
    constructor() {
        this._pagesMobile = 3;
        this._elipsisText = '...';
        this._classExpanded = 'expanded-view';
    }
    /**
     * @param {?} currentPage
     * @param {?} totalPages
     * @return {?}
     */
    getPages(currentPage, totalPages) {
        /** @type {?} */
        let pages = [];
        /** @type {?} */
        let start = [];
        /** @type {?} */
        let middle = [];
        /** @type {?} */
        let end = [];
        // First array -> start
        start = this.getStartArray(currentPage, totalPages);
        // Second array -> middle
        middle = this.getMiddleArray(currentPage, totalPages);
        // Third array -> end
        end = this.getEndArray(currentPage, totalPages);
        pages = [...start, ...middle, ...end];
        return pages;
    }
    /**
     * @param {?} currentPage
     * @param {?} totalPages
     * @return {?}
     */
    getMiddleArray(currentPage, totalPages) {
        /** @type {?} */
        let pageNumber = currentPage < 6 ? 4 : currentPage - 1;
        /** @type {?} */
        const middle = [];
        while (middle.length < 3 &&
            pageNumber >= 2 &&
            pageNumber <= totalPages - 3 &&
            (pageNumber <= currentPage + 1 && pageNumber >= currentPage - 1)) {
            middle.push(this.createPaginationItem(pageNumber, pageNumber));
            pageNumber++;
        }
        return middle;
    }
    /**
     * @param {?} currentPage
     * @param {?} totalPages
     * @return {?}
     */
    getEndArray(currentPage, totalPages) {
        /** @type {?} */
        const end = [];
        /** @type {?} */
        let currentItemToShow = totalPages <= 3 ? totalPages + 1 :
            totalPages <= 6 ? totalPages - (totalPages - 4) : totalPages - 2;
        /** @type {?} */
        const showEllipsis = currentPage < totalPages - 4;
        while (currentItemToShow <= totalPages) {
            /** @type {?} */
            const endItem = end.length === 0 && showEllipsis ?
                this.createPaginationItem(this._elipsisText, currentItemToShow, true) :
                this.createPaginationItem(currentItemToShow, currentItemToShow, true);
            end.push(endItem);
            currentItemToShow++;
        }
        return end;
    }
    /**
     * @param {?} currentPage
     * @param {?} totalPages
     * @return {?}
     */
    getStartArray(currentPage, totalPages) {
        /** @type {?} */
        let counterPages = 0;
        /** @type {?} */
        const start = [];
        /** @type {?} */
        const maxSizeArray = 3;
        while (counterPages < maxSizeArray && counterPages < totalPages) {
            /** @type {?} */
            const startItem = counterPages === 2 && currentPage > 5 ?
                this.createPaginationItem(this._elipsisText, counterPages, true) :
                this.createPaginationItem(counterPages + 1, counterPages + 1, true);
            start.push(startItem);
            counterPages++;
        }
        return start;
    }
    /**
     * @param {?} currentPage
     * @param {?} totalPages
     * @return {?}
     */
    getMobilePages(currentPage, totalPages) {
        // if we have less pages than the number we want to display take all
        if (totalPages < this._pagesMobile) {
            return Array.from(Array(totalPages).keys()).map((/**
             * @param {?} item
             * @return {?}
             */
            item => this.createPaginationItem(item + 1, item + 1)));
        }
        switch (currentPage) {
            // first page active
            case 1:
                return [1, 2, 3].map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => this.createPaginationItem(item, item)));
            // last page active
            case totalPages:
                return [totalPages - 2, totalPages - 1, totalPages].map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => this.createPaginationItem(item, item)));
            // any other page active
            default:
                return [currentPage - 1, currentPage, currentPage + 1].map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => this.createPaginationItem(item, item)));
        }
    }
    /**
     * @private
     * @param {?} label
     * @param {?} value
     * @param {?=} classExpanded
     * @return {?}
     */
    createPaginationItem(label, value, classExpanded) {
        return { label: label, value: value, class: classExpanded ? this._classExpanded : '' };
    }
}
NxPaginationUtils.decorators = [
    { type: Injectable }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxPaginationUtils.prototype._pagesMobile;
    /**
     * @type {?}
     * @private
     */
    NxPaginationUtils.prototype._elipsisText;
    /**
     * @type {?}
     * @private
     */
    NxPaginationUtils.prototype._classExpanded;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi11dGlscy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGxpYW56L25neC1uZGJ4LyIsInNvdXJjZXMiOlsicGFnaW5hdGlvbi9wYWdpbmF0aW9uLXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7OztBQUszQyxNQUFNLE9BQU8saUJBQWlCO0lBRDlCO1FBRVUsaUJBQVksR0FBRyxDQUFDLENBQUM7UUFDakIsaUJBQVksR0FBVyxLQUFLLENBQUM7UUFDN0IsbUJBQWMsR0FBVyxlQUFlLENBQUM7SUEyRm5ELENBQUM7Ozs7OztJQXpGQyxRQUFRLENBQUMsV0FBbUIsRUFBRSxVQUFrQjs7WUFFMUMsS0FBSyxHQUFHLEVBQUU7O1lBQ1YsS0FBSyxHQUFHLEVBQUU7O1lBQUUsTUFBTSxHQUFHLEVBQUU7O1lBQUUsR0FBRyxHQUFHLEVBQUU7UUFFckMsdUJBQXVCO1FBQ3ZCLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNwRCx5QkFBeUI7UUFDekIsTUFBTSxHQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3ZELHFCQUFxQjtRQUNyQixHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFFaEQsS0FBSyxHQUFHLENBQUUsR0FBRyxLQUFLLEVBQUUsR0FBRyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUUsQ0FBQztRQUV4QyxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7Ozs7OztJQUVELGNBQWMsQ0FBQyxXQUFtQixFQUFFLFVBQWtCOztZQUNoRCxVQUFVLEdBQUcsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsQ0FBQzs7Y0FDaEQsTUFBTSxHQUFH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QUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBQyxDQUFDO1lBQ3ZFLG1CQUFtQjtZQUNuQixLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsVUFBVSxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxHQUFHOzs7O2dCQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBQyxDQUFDO1lBQzFHLHdCQUF3QjtZQUN4QjtnQkFDRSxPQUFPLENBQUMsV0FBVyxHQUFHLENBQUMsRUFBRSxXQUFXLEVBQUUsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUc7Ozs7Z0JBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFDLENBQUM7U0FDOUc7SUFDSCxDQUFDOzs7Ozs7OztJQUVPLG9CQUFvQixDQUFDLEtBQXNCLEVBQUUsS0FBYSxFQUFFLGFBQXVCO1FBQ3pGLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFHLENBQUM7SUFDMUYsQ0FBQzs7O1lBN0ZGLFVBQVU7Ozs7Ozs7SUFFVCx5Q0FBeUI7Ozs7O0lBQ3pCLHlDQUFxQzs7Ozs7SUFDckMsMkNBQWlEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4vcGFnaW5hdGlvbi5jb21wb25lbnQnO1xuXG4vKiogQGRvY3MtcHJpdmF0ZSAqL1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE54UGFnaW5hdGlvblV0aWxzICB7XG4gIHByaXZhdGUgX3BhZ2VzTW9iaWxlID0gMztcbiAgcHJpdmF0ZSBfZWxpcHNpc1RleHQ6IHN0cmluZyA9ICcuLi4nO1xuICBwcml2YXRlIF9jbGFzc0V4cGFuZGVkOiBzdHJpbmcgPSAnZXhwYW5kZWQtdmlldyc7XG5cbiAgZ2V0UGFnZXMoY3VycmVudFBhZ2U6IG51bWJlciwgdG90YWxQYWdlczogbnVtYmVyKTogUGFnZVtdIHtcblxuICAgIGxldCBwYWdlcyA9IFtdO1xuICAgIGxldCBzdGFydCA9IFtdLCBtaWRkbGUgPSBbXSwgZW5kID0gW107XG5cbiAgICAvLyBGaXJzdCBhcnJheSAtPiBzdGFydFxuICAgIHN0YXJ0ID0gdGhpcy5nZXRTdGFydEFycmF5KGN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzKTtcbiAgICAvLyBTZWNvbmQgYXJyYXkgLT4gbWlkZGxlXG4gICAgbWlkZGxlID0gIHRoaXMuZ2V0TWlkZGxlQXJyYXkoY3VycmVudFBhZ2UsIHRvdGFsUGFnZXMpO1xuICAgIC8vIFRoaXJkIGFycmF5IC0+IGVuZFxuICAgIGVuZCA9IHRoaXMuZ2V0RW5kQXJyYXkoY3VycmVudFBhZ2UsIHRvdGFsUGFnZXMpO1xuXG4gICAgcGFnZXMgPSBbIC4uLnN0YXJ0LCAuLi5taWRkbGUsIC4uLmVuZCBdO1xuXG4gICAgcmV0dXJuIHBhZ2VzO1xuICB9XG5cbiAgZ2V0TWlkZGxlQXJyYXkoY3VycmVudFBhZ2U6IG51bWJlciwgdG90YWxQYWdlczogbnVtYmVyKTogQXJyYXk8YW55PiB7XG4gICAgbGV0IHBhZ2VOdW1iZXIgPSBjdXJyZW50UGFnZSA8IDYgPyA0IDogY3VycmVudFBhZ2UgLSAxO1xuICAgIGNvbnN0IG1pZGRsZSA9IFtdO1xuXG4gICAgd2hpbGUgKFxuICAgICAgbWlkZGxlLmxlbmd0aCA8IDMgJiZcbiAgICAgIHBhZ2VOdW1iZXIgPj0gMiAmJlxuICAgICAgcGFnZU51bWJlciA8PSB0b3RhbFBhZ2VzIC0gMyAmJlxuICAgICAgKHBhZ2VOdW1iZXIgPD0gY3VycmVudFBhZ2UgKyAxICYmIHBhZ2VOdW1iZXIgPj0gY3VycmVudFBhZ2UgLSAxKVxuICAgICkge1xuICAgICAgbWlkZGxlLnB1c2godGhpcy5jcmVhdGVQYWdpbmF0aW9uSXRlbShwYWdlTnVtYmVyLCBwYWdlTnVtYmVyKSk7XG4gICAgICBwYWdlTnVtYmVyKys7XG4gICAgfVxuICAgIHJldHVybiBtaWRkbGU7XG4gIH1cbiAgZ2V0RW5kQXJyYXkoY3VycmVudFBhZ2U6IG51bWJlciwgdG90YWxQYWdlczogbnVtYmVyKTogQXJyYXk8YW55PiB7XG4gICAgY29uc3QgZW5kID0gW107XG4gICAgbGV0IGN1cnJlbnRJdGVtVG9TaG93OiBudW1iZXIgPVxuICAgICAgdG90YWxQYWdlcyA8PSAzID8gdG90YWxQYWdlcyArIDEgOlxuICAgICAgdG90YWxQYWdlcyA8PSA2ID8gdG90YWxQYWdlcyAtICh0b3RhbFBhZ2VzIC0gNCkgOiB0b3RhbFBhZ2VzIC0gMiA7XG4gICAgY29uc3Qgc2hvd0VsbGlwc2lzID0gY3VycmVudFBhZ2UgPCB0b3RhbFBhZ2VzIC0gNDtcblxuICAgIHdoaWxlIChjdXJyZW50SXRlbVRvU2hvdyA8PSB0b3RhbFBhZ2VzKSB7XG4gICAgICBjb25zdCBlbmRJdGVtID0gZW5kLmxlbmd0aCA9PT0gMCAmJiBzaG93RWxsaXBzaXMgP1xuICAgICAgICB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKHRoaXMuX2VsaXBzaXNUZXh0LCBjdXJyZW50SXRlbVRvU2hvdywgdHJ1ZSkgOlxuICAgICAgICB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKGN1cnJlbnRJdGVtVG9TaG93ICwgY3VycmVudEl0ZW1Ub1Nob3csIHRydWUpO1xuICAgICAgZW5kLnB1c2goZW5kSXRlbSk7XG4gICAgICBjdXJyZW50SXRlbVRvU2hvdysrO1xuICAgIH1cblxuICAgIHJldHVybiBlbmQ7XG4gIH1cbiAgZ2V0U3RhcnRBcnJheShjdXJyZW50UGFnZTogbnVtYmVyLCB0b3RhbFBhZ2VzOiBudW1iZXIpOiBBcnJheTxhbnk+IHtcbiAgICBsZXQgY291bnRlclBhZ2VzID0gMDtcbiAgICBjb25zdCBzdGFydCA9IFtdO1xuICAgIGNvbnN0IG1heFNpemVBcnJheSA9IDM7XG5cbiAgICB3aGlsZSAoY291bnRlclBhZ2VzIDwgbWF4U2l6ZUFycmF5ICYmIGNvdW50ZXJQYWdlcyA8IHRvdGFsUGFnZXMpIHtcbiAgICAgIGNvbnN0IHN0YXJ0SXRlbSA9IGNvdW50ZXJQYWdlcyA9PT0gMiAmJiBjdXJyZW50UGFnZSA+IDUgP1xuICAgICAgICB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKHRoaXMuX2VsaXBzaXNUZXh0LCBjb3VudGVyUGFnZXMsIHRydWUpIDpcbiAgICAgICAgdGhpcy5jcmVhdGVQYWdpbmF0aW9uSXRlbShjb3VudGVyUGFnZXMgKyAxICwgY291bnRlclBhZ2VzICsgMSwgdHJ1ZSk7XG5cbiAgICAgIHN0YXJ0LnB1c2goc3RhcnRJdGVtKTtcbiAgICAgIGNvdW50ZXJQYWdlcysrO1xuICAgIH1cblxuICAgIHJldHVybiBzdGFydDtcbiAgfVxuXG4gIGdldE1vYmlsZVBhZ2VzKGN1cnJlbnRQYWdlOiBudW1iZXIsIHRvdGFsUGFnZXM6IG51bWJlcik6IEFycmF5PGFueT4ge1xuICAgIC8vIGlmIHdlIGhhdmUgbGVzcyBwYWdlcyB0aGFuIHRoZSBudW1iZXIgd2Ugd2FudCB0byBkaXNwbGF5IHRha2UgYWxsXG4gICAgaWYgKHRvdGFsUGFnZXMgPCB0aGlzLl9wYWdlc01vYmlsZSkge1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20oQXJyYXkodG90YWxQYWdlcykua2V5cygpKS5tYXAoaXRlbSA9PiB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKGl0ZW0gKyAxLCBpdGVtICsgMSkpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoY3VycmVudFBhZ2UpIHtcbiAgICAgIC8vIGZpcnN0IHBhZ2UgYWN0aXZlXG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBbMSwgMiwgM10ubWFwKCBpdGVtID0+IHRoaXMuY3JlYXRlUGFnaW5hdGlvbkl0ZW0oaXRlbSwgaXRlbSkpO1xuICAgICAgLy8gbGFzdCBwYWdlIGFjdGl2ZVxuICAgICAgY2FzZSB0b3RhbFBhZ2VzOlxuICAgICAgICByZXR1cm4gW3RvdGFsUGFnZXMgLSAyLCB0b3RhbFBhZ2VzIC0gMSwgdG90YWxQYWdlc10ubWFwKCBpdGVtID0+IHRoaXMuY3JlYXRlUGFnaW5hdGlvbkl0ZW0oaXRlbSwgaXRlbSkpO1xuICAgICAgLy8gYW55IG90aGVyIHBhZ2UgYWN0aXZlXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW2N1cnJlbnRQYWdlIC0gMSwgY3VycmVudFBhZ2UsIGN1cnJlbnRQYWdlICsgMV0ubWFwKCBpdGVtID0+IHRoaXMuY3JlYXRlUGFnaW5hdGlvbkl0ZW0oaXRlbSwgaXRlbSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUGFnaW5hdGlvbkl0ZW0obGFiZWw6IHN0cmluZyB8IG51bWJlciwgdmFsdWU6IG51bWJlciwgY2xhc3NFeHBhbmRlZD86IGJvb2xlYW4pIHtcbiAgICByZXR1cm4geyBsYWJlbDogbGFiZWwsIHZhbHVlOiB2YWx1ZSwgY2xhc3M6IGNsYXNzRXhwYW5kZWQgPyB0aGlzLl9jbGFzc0V4cGFuZGVkIDogJycgIH07XG4gIH1cblxufVxuIl19
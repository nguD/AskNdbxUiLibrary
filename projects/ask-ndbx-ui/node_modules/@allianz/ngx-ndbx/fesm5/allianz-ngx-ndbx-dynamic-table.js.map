{"version":3,"file":"allianz-ngx-ndbx-dynamic-table.js","sources":["ng://@allianz/ngx-ndbx/dynamic-table/tabledata-source.ts","ng://@allianz/ngx-ndbx/dynamic-table/dynamic-table.component.ts","ng://@allianz/ngx-ndbx/dynamic-table/dynamic-table.module.ts"],"sourcesContent":["import { DataSource } from '@angular/cdk/collections';\nimport { BehaviorSubject ,  Observable } from 'rxjs';\n\nexport class TableDataSource extends DataSource<any> {\nconstructor(private _datachange: BehaviorSubject<any[]>) {\nsuper();\n}\n/** @docs-private Connect function called by the table to retrieve one stream containing the data to render. */\nconnect(): Observable<Object[]> {\nreturn this._datachange;\n}\n/** @docs-private */\ndisconnect() { }\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, EventEmitter, Input, OnInit, Output, ChangeDetectorRef } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { NxDisplayedColumns } from './displayedColumns';\nimport { TableDataSource } from './tabledata-source';\n\n@Component({\n  selector: 'nx-dynamic-table',\n  templateUrl: './dynamic-table.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: [ './dynamic-table.component.scss' ]\n})\nexport class NxDynamicTableComponent implements OnInit {\n\n  private _dataChange: BehaviorSubject<any[]> = new BehaviorSubject<any[]>([]);\n  private _dataSource: TableDataSource | null;\n  private _data: any[];\n  private _displayedColumns: NxDisplayedColumns[];\n  private _columnKeys: string[];\n\n  /** Sets the data that it will show in the table. */\n  @Input('nxData')\n  set data(value: any[]) {\n    this._data = value\n      .filter(element => element);\n    // If user dont pass displayedColumns the table will show all data and the name of columns will be the key of data\n    if (!this._displayedColumns) {\n      const keys = [], cArray = [];\n      // For catch keys of data Objects and assing title, key and type string by default to displayedColumns\n      this._data\n        .forEach(element => {\n          for (const key in element) {\n            if (keys.indexOf(key) === -1) {\n              keys.push(key);\n              cArray.push({ title: key, key: key, type: 'string' });\n            }\n          }\n        });\n      this._columnKeys = keys;\n      this._displayedColumns = cArray;\n      // need to call markForCheck as the setter changes displayedColumns here\n      // sidenote: isn't needed for the data itself as it gets passed to the cdk-table\n      // by the datasource observable\n      this._changeDetectorRef.markForCheck();\n    }\n    this._dataChange.next(this._data);\n  }\n  get data(): any[] {\n    return this._data;\n  }\n\n  /** Sets the name order and type of columns. */\n  @Input('nxDisplayedColumns')\n  set displayedColumns(value: NxDisplayedColumns[]) {\n    this._displayedColumns = value;\n    this._columnKeys = value.map(column => column.key);\n    this._changeDetectorRef.markForCheck();\n  }\n  get displayedColumns(): NxDisplayedColumns[] {\n    return this._displayedColumns;\n  }\n\n  /** An event is dispatched when a row is clicked. */\n  @Output() nxRowClick = new EventEmitter();\n\n  /** @docs-private */\n  get dataSource(): TableDataSource {\n    return this._dataSource;\n  }\n\n  /** @docs-private */\n  get columnKeys(): string[] {\n    return this._columnKeys;\n  }\n\n  constructor(private el: ElementRef, private _changeDetectorRef: ChangeDetectorRef) { }\n\n  ngOnInit() {\n    if (!this._data) {\n      this._data = [];\n      this._dataChange.next(this._data);\n    }\n    this._dataSource = new TableDataSource(this._dataChange);\n  }\n\n  /** @docs-private */\n  handleRowClick(row: Object): void {\n    this.nxRowClick.emit(row);\n  }\n\n  /** @docs-private */\n  isNumeric(element: NxDisplayedColumns): boolean {\n    if (element.type === 'numeric') {\n      return true;\n    }\n    return false;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NxDynamicTableComponent } from './dynamic-table.component';\nimport { CdkTableModule } from '@angular/cdk/table';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\n@NgModule({\n  declarations: [ NxDynamicTableComponent ],\n  exports: [ NxDynamicTableComponent ],\n  imports: [ CommonModule, CdkTableModule, ScrollingModule ]\n})\nexport class NxDynamicTableModule { }\n"],"names":["tslib_1.__extends"],"mappings":"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"}
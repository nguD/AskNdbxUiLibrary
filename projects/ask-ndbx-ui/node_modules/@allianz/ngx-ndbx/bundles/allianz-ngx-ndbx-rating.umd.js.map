{"version":3,"file":"allianz-ngx-ndbx-rating.umd.js","sources":["ng://@allianz/ngx-ndbx/rating/rating.component.ts","ng://@allianz/ngx-ndbx/rating/rating.module.ts"],"sourcesContent":["import { NxIconComponent } from '@allianz/ngx-ndbx/icon';\nimport { ENTER, LEFT_ARROW, RIGHT_ARROW } from '@angular/cdk/keycodes';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  Output,\n  QueryList,\n  ViewChildren\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'nx-rating',\n  templateUrl: './rating.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['./rating.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NxRatingComponent),\n      multi: true\n    }\n  ],\n  host: {\n    '[class.nx-rating--negative]': 'negative',\n    '[class.nx-rating--disabled]': 'disabled',\n  }\n})\nexport class NxRatingComponent implements ControlValueAccessor {\n\n  private _value: number = 0;\n  /** Sets the selected rating 1 - 5. */\n  @Input('nxValue')\n  set value(newValue: number) {\n    this._value = coerceNumberProperty(newValue);\n    this._changeDetectorRef.markForCheck();\n  }\n  get value(): number {\n    return this._value;\n  }\n\n  private _disabled: boolean = false;\n  /** Whether the rating component should be disabled. */\n  @Input('nxDisabled')\n  set disabled( newValue: boolean) {\n    if (this._disabled === newValue) {\n      return;\n    }\n    this._disabled = coerceBooleanProperty(newValue);\n    this._changeDetectorRef.markForCheck();\n  }\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  private _negative: boolean = false;\n  /** Whether the negative colors be used. */\n  @Input('nxNegative')\n  set negative(newValue: boolean) {\n    if (this._negative === newValue) {\n      return;\n    }\n    this._negative = coerceBooleanProperty(newValue);\n    this._changeDetectorRef.markForCheck();\n  }\n  get negative(): boolean {\n    return this._negative;\n  }\n\n  private _startLabel: string = null;\n  /** Sets the label painted at the start of the rating component. */\n  @Input('nxStartLabel')\n  set startLabel(newValue: string) {\n    this._startLabel = newValue;\n    this._changeDetectorRef.markForCheck();\n  }\n  get startLabel(): string {\n    return this._startLabel;\n  }\n\n  private _endLabel: string = null;\n  /** Sets the label painted at the end of the rating component. */\n  @Input('nxEndLabel')\n  set endLabel(newValue: string) {\n    this._endLabel = newValue;\n    this._changeDetectorRef.markForCheck();\n  }\n  get endLabel(): string {\n    return this._endLabel;\n  }\n\n  private _ariaLabel: string[] = ['1/5', '2/5', '3/5', '4/5', '5/5'];\n  @Input('nxAriaLabel')\n  /** Sets an array of custom aria-describedby attributes for each of the stars in the component. */\n  set ariaLabel(newAriaLabels: string[]) {\n    this._ariaLabel = newAriaLabels;\n    this._changeDetectorRef.markForCheck();\n  }\n  get ariaLabel(): string[] {\n    return this._ariaLabel;\n  }\n  /** An event is dispatched each time when the rating changes. */\n  @Output('nxValueChange') valueChange = new EventEmitter<number>();\n\n  /** @docs-private */\n  @ViewChildren(NxIconComponent, {read: ElementRef}) icons: QueryList<ElementRef>;\n  private onTouchedCallback = () => {};\n  private onChangeCallback = (option: any) => {};\n\n  constructor(private _changeDetectorRef: ChangeDetectorRef) {}\n\n  /** Whether the given rating is selected. */\n  isSelected(index: number) {\n    return index <= this.value;\n  }\n\n  /** Allows to set the rating. */\n  setSelection(value: number) {\n    if (!this.disabled) {\n      this.value = value;\n      this.valueChange.emit(value);\n      this.onTouchedCallback();\n      this.onChangeCallback(this.value);\n    }\n  }\n\n  /** @docs-private */\n  handleKeyUp(event: KeyboardEvent, rating: number) {\n    const keyCode = event.keyCode;\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (keyCode === ENTER) {\n      this.setSelection(rating);\n    }\n\n    if (keyCode === RIGHT_ARROW) {\n      this.value = Math.min(this.value + 1, 5);\n      const elementRef: ElementRef = this.icons.toArray()[this.value - 1];\n      elementRef.nativeElement.focus();\n    }\n\n    if (keyCode === LEFT_ARROW) {\n      this.value = Math.max(this.value - 1, 1);\n      const elementRef: ElementRef = this.icons.toArray()[this.value - 1];\n      elementRef.nativeElement.focus();\n    }\n  }\n\n  writeValue(value: number): void {\n    this.value = value;\n  }\n\n  registerOnChange(callback: any): void {\n    this.onChangeCallback = callback;\n  }\n\n  registerOnTouched(callback: any): void {\n    this.onTouchedCallback = callback;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  /** @docs-private */\n  getAriaLabel(rating) {\n    return this.ariaLabel[rating - 1];\n  }\n\n  /** @docs-private */\n  getIconName(rating: number) {\n    return 'star' + ((!this.isSelected(rating)) ? '-o' : '');\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {NxRatingComponent} from './rating.component';\nimport { NxIconModule } from '@allianz/ngx-ndbx/icon';\nimport {CommonModule} from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NxIconModule\n  ],\n  declarations: [\n    NxRatingComponent\n  ],\n  exports: [\n    NxRatingComponent\n  ]\n})\nexport class NxRatingModule {\n\n}\n"],"names":["EventEmitter","coerceNumberProperty","coerceBooleanProperty","ENTER","RIGHT_ARROW","LEFT_ARROW","Component","ChangeDetectionStrategy","NG_VALUE_ACCESSOR","forwardRef","ChangeDetectorRef","Input","Output","ViewChildren","NxIconComponent","ElementRef","NgModule","CommonModule","NxIconModule"],"mappings":"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"}
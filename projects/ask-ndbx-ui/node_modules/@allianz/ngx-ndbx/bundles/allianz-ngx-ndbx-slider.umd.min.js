!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@allianz/ngx-ndbx/grid"),require("@angular/core"),require("@angular/common"),require("@allianz/ngx-ndbx/utils"),require("@angular/cdk/coercion"),require("@angular/cdk/keycodes"),require("@angular/forms"),require("decimal.js"),require("rxjs")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/slider",["exports","@allianz/ngx-ndbx/grid","@angular/core","@angular/common","@allianz/ngx-ndbx/utils","@angular/cdk/coercion","@angular/cdk/keycodes","@angular/forms","decimal.js","rxjs"],t):t(((e=e||self).allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"].slider={}),e.allianz["ngx-ndbx"].grid,e.ng.core,e.ng.common,e.allianz["ngx-ndbx"].utils,e.ng.cdk.coercion,e.ng.cdk.keycodes,e.ng.forms,e.decimal_js,e.rxjs)}(this,function(e,t,r,n,i,a,o,l,s,d){"use strict";function c(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var u={TOUCH:0,MOUSE:1};u[u.TOUCH]="TOUCH",u[u.MOUSE]="MOUSE";var h=0,b=0,p=100,f=1,g=function(){function e(e,t,n){this.elementRef=e,this._changeDetectorRef=t,this._ngZone=n,this._id="nx-slider-"+h++,this._tabIndex=0,this._min=b,this._max=p,this._disabled=!1,this._inverted=!1,this._thumbLabel=!0,this._negative=!1,this.valueChange=new r.EventEmitter,this.isActive=!1,this.dragSubscriptions=[],this.position=null,this._value=0,this._step=f,this._currentValue=0,this._onChange=function(){},this._onTouched=function(){},this.valueFormatter=function(e){return e},this.labelMinFormatter=function(e){return e},this.labelMaxFormatter=function(e){return e}}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id!==e&&(this._id=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return this._tabIndex},set:function(e){this._tabIndex=a.coerceNumberProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this._min=a.coerceNumberProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this._max=a.coerceNumberProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=a.coerceNumberProperty(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label!==e&&(this._label=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=a.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverted",{get:function(){return this._inverted},set:function(e){this._inverted=a.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLabel",{get:function(){return this._thumbLabel},set:function(e){this._thumbLabel=a.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negative",{get:function(){return this._negative},set:function(e){this._negative=a.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this.writeValue(Number(e))},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.reset()},e.prototype.writeValue=function(e){e!==this._value&&(this._value=e,this.valueChange.emit(e),this._changeDetectorRef.markForCheck())},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.isMinimum=function(){return this._value===this.min},e.prototype.isValidStep=function(){var e=new s.Decimal(this._value).minus(this.min).mod(this.step);return this.isMinimum()||0===e.cmp(0)},e.prototype.changeValue=function(e){var t=new s.Decimal(this._value);if(this.isValidStep())t=t.plus(e);else{var r=new s.Decimal(this._value).minus(this.min);t=(t=e<0?r.toNearest(this.step,s.Decimal.ROUND_DOWN):r.toNearest(this.step,s.Decimal.ROUND_UP)).plus(this.min)}var n=t.toNumber();n=i.clamp(n,this.min,this.max),this.value!==n&&(this._onChange(n),this.valueChange.emit(n),this.value=n)},Object.defineProperty(e.prototype,"percentageValue",{get:function(){var e=((this.value||0)-this.min)/(this.max-this.min)*100;return this.inverted&&(e=100-e),i.clamp(e,0,100)},enumerable:!0,configurable:!0}),e.prototype.sliderClick=function(e){var t=this;this.disabled||(this._focusHandleElement(),e.stopPropagation(),this.position=this.getPositionFromEvent(e),this.frameId=requestAnimationFrame(function(){t.valueByPosition(),t.value!==t._currentValue&&(t._currentValue=t.value,t._onChange(t.value))}))},e.prototype.focus=function(){this.disabled||this._focusHandleElement()},e.prototype.blur=function(){this.disabled},e.prototype.selectStart=function(){return!1},e.prototype.handleKeypress=function(e){if(!this.disabled&&!(e.which<o.LEFT_ARROW||e.which>o.DOWN_ARROW))switch(e.which){case this.inverted?o.RIGHT_ARROW:o.LEFT_ARROW:case o.DOWN_ARROW:return this.changeValue(-this.step);case o.UP_ARROW:case this.inverted?o.LEFT_ARROW:o.RIGHT_ARROW:return this.changeValue(this.step)}},e.prototype.dragStart=function(e){var t=this;if(!this.disabled){this.isActive=!0;var r=this.detectEventType(e)===u.TOUCH;this._currentValue=this.value,r?(this._ngZone.runOutsideAngular(function(){t.dragSubscriptions.push(d.fromEvent(document,"touchmove").subscribe(t.handleDragMove.bind(t))),t.dragSubscriptions.push(d.fromEvent(document,"touchend").subscribe(t.handleDragStop.bind(t)))}),this._ngZone.run(function(){t.dragSubscriptions.push(d.fromEvent(document,"touchcancel").subscribe(t.handleDragStop.bind(t)))})):(this._ngZone.runOutsideAngular(function(){t.dragSubscriptions.push(d.fromEvent(document,"mousemove").subscribe(t.handleDragMove.bind(t)))}),this._ngZone.run(function(){t.dragSubscriptions.push(d.fromEvent(document,"mouseup").subscribe(t.handleDragStop.bind(t)))})),this.position=this.getPositionFromEvent(e),this.runChangeObserver()}},e.prototype.formatValue=function(e){return this.valueFormatter(e)},e.prototype.formatLabelLeft=function(){return this.inverted?this.formatLabelMax():this.formatLabelMin()},e.prototype.formatLabelRight=function(){return this.inverted?this.formatLabelMin():this.formatLabelMax()},e.prototype.valueByPosition=function(){var e=this.elementRef.nativeElement.getBoundingClientRect(),t=(Math.max(e.left,Math.min(e.right,this.position.x))-e.left)/e.width;this.inverted&&(t=1-t);var r,n=this.min+t*(this.max-this.min);r=1===t?this.max:0===t?this.min:Math.round((n-this.min)/this.step)*this.step+this.min,this._roundToDecimal&&(r=this.roundToDecimal(r)),r=i.clamp(r,this.min,this.max),this.value=r},e.prototype.roundToDecimal=function(e){return parseFloat(e.toFixed(this._roundToDecimal))},e.prototype.formatLabelMin=function(){return this.labelMinFormatter(this.min)},e.prototype.formatLabelMax=function(){return this.labelMaxFormatter(this.max)},e.prototype.handleDragMove=function(e){this.position=this.getPositionFromEvent(e)},e.prototype.handleDragStop=function(e){this.reset(),this.valueByPosition(),this.value!==this._currentValue&&(this._currentValue=this.value,this._onChange(this.value))},e.prototype.runChangeObserver=function(){var e=this;this.frameId=requestAnimationFrame(function(){e.valueByPosition(),e.isActive&&e.runChangeObserver()})},e.prototype.reset=function(){var e,t;this.isActive=!1;try{for(var r=c(this.dragSubscriptions),n=r.next();!n.done;n=r.next()){n.value.unsubscribe()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.dragSubscriptions=[],cancelAnimationFrame(this.frameId)},e.prototype.detectEventType=function(e){return e.type.includes("touch")?u.TOUCH:u.MOUSE},e.prototype.getPositionFromEvent=function(e){var t=this.detectEventType(e)===u.TOUCH?e.touches.item(0):e;return{x:t.clientX,y:t.clientY}},e.prototype._focusHandleElement=function(){this.handleElement.nativeElement.focus()},e.decorators=[{type:r.Component,args:[{selector:"nx-slider",template:'<label class="nx-slider__label" [id]="id + \'-label\'" [attr.for]="id + \'-handle\'" (click)="_focusHandleElement()">{{label}}</label>\n\n<div\n  class="nx-slider__wrapper"\n  (click)="sliderClick($event)"\n>\n\n  <span class="nx-slider__background">\n    <span class="nx-slider__filler" [style.width.%]="percentageValue"></span>\n\n    <div class="nx-slider__handle"\n        [id]="id + \'-handle\'"\n        [attr.tabindex]="tabindex"\n        [attr.aria-labelledby]="id + \'-label\'"\n        role="slider"\n        [attr.aria-valuemin]="formatLabelMin()"\n        [attr.aria-valuemax]="formatLabelMax()"\n        [attr.aria-valuetext]="formatValue(value)"\n        [attr.aria-valuenow]="formatValue(value)"\n        (mousedown)="dragStart($event)"\n        (touchstart)="dragStart($event)"\n        (selectstart)="selectStart()"\n        #handle\n      >\n\n      <span *ngIf="thumbLabel" class="nx-slider__value">{{formatValue(value)}}\n        <div class="nx-slider__arrow">\n        </div>\n      </span>\n    </div>\n\n  </span>\n</div>\n\n<div class="nx-slider__label-container">\n    <span class="nx-slider__value-label">{{formatLabelLeft()}}</span>\n    <span class="nx-slider__value-label">{{formatLabelRight()}}</span>\n</div>\n',changeDetection:r.ChangeDetectionStrategy.OnPush,providers:[{provide:l.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return e}),multi:!0}],host:{"[attr.aria-disabled]":"disabled ? true : null","(keydown)":"handleKeypress($event)","[class.nx-slider--disabled]":"disabled","[class.nx-slider--negative]":"negative"},styles:[":host{display:block}.nx-slider__label{font-size:20px;font-size:var(--slider-label-font-size,20px);line-height:28px;line-height:var(--slider-label-line-height,28px);font-weight:300;font-weight:var(--slider-label-font-weight,300);letter-spacing:.2px;letter-spacing:var(--slider-label-letter-spacing,.2px);color:#414141;color:var(--slider-label-color,#414141)}.nx-slider__wrapper{width:100%;padding:66px 0 18px}.nx-slider__background{position:relative;background-color:#d9d9d9;background-color:var(--slider-background-color,#d9d9d9);display:block;height:4px;border-radius:2px;white-space:nowrap;cursor:pointer}.nx-slider__filler{display:inline-block;height:4px;border-radius:2px;background-color:#007ab3;background-color:var(--slider-indicator-color,#007ab3);float:left}.nx-slider__handle{display:inline-block;position:relative;width:24px;height:24px;border-radius:50%;box-shadow:0 2px 4px rgba(65,65,65,.5);border-color:var(--slider-handle-border-color,#f5f5f5);background:#fff;background:var(--slider-handle-background-color,#fff);box-sizing:border-box;margin-left:-12px;top:-10px;z-index:2;cursor:-webkit-grab;cursor:grab;border:1px solid #f5f5f5}.nx-slider__handle:focus{outline:0;border-color:#007ab3;border-color:var(--slider-handle-focus-border-color,#007ab3)}.nx-slider__handle:active{box-shadow:0 2px 4px rgba(65,65,65,.5),inset 0 0 0 4px #fff,inset 0 0 0 24px rgba(0,122,179,.2);box-shadow:0 2px 4px rgba(65,65,65,.5),inset 0 0 0 4px var(--slider-handle-background-color,#fff),inset 0 0 0 24px var(--slider-handle-active-inset-color,rgba(0,122,179,.2));cursor:-webkit-grabbing;cursor:grabbing}:host-context([data-whatinput=keyboard]) .nx-slider__handle:focus{border-color:#7fbcd9;box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;box-shadow:var(--focus-box-shadow,0 0 0 2px #fff,0 0 0 6px #009de6)}@media screen and (-ms-high-contrast:active){:host-context([data-whatinput=keyboard]) .nx-slider__handle:focus{box-shadow:0 0 0 2px background,0 0 0 6px windowText}}.nx-slider__value{font-size:12px;font-size:var(--slider-handle-value-font-size,12px);line-height:16px;line-height:var(--slider-handle-value-line-height,16px);font-weight:600;font-weight:var(--slider-handle-value-font-weight,600);letter-spacing:.5px;letter-spacing:var(--slider-handle-value-letter-spacing,.5px);color:#006192;color:var(--slider-handle-value-color,#006192);border:1px solid #f5f5f5;border-color:var(--slider-handle-border-color,#f5f5f5);border-radius:4px;box-shadow:0 2px 4px rgba(65,65,65,.5);cursor:-webkit-grab;cursor:grab;height:24px;width:48px;text-align:center;right:8px;padding:3px 8px;position:relative;top:-40px;display:table;left:50%;transform:translateX(-50%);background:#fff;background:var(--slider-value-background-color,#fff)}.nx-slider__value:active{cursor:-webkit-grabbing;cursor:grabbing}.nx-slider__arrow{width:6px;height:6px;border-right:1px solid;border-bottom:1px solid;left:50%;transform:translate(-50%,1px) rotate(45deg);position:absolute;box-shadow:-2px -2px 1px 1px #fff,2px 2px 4px rgba(65,65,65,.5);box-shadow:-2px -2px 1px 1px var(--slider-value-background-color,#fff),2px 2px 4px rgba(65,65,65,.5);background:#fff;background:var(--slider-value-background-color,#fff);border-color:#f5f5f5;border-color:var(--slider-handle-border-color,#f5f5f5)}.nx-slider__label-container{display:flex;width:100%;justify-content:space-between;font-size:16px;font-size:var(--slider-value-label-font-size,16px);line-height:24px;line-height:var(--slider-value-label-line-height,24px);font-weight:300;font-weight:var(--slider-value-label-font-weight,300);letter-spacing:0;letter-spacing:var(--slider-value-label-letter-spacing,0);color:#414141;color:var(--slider-value-label-color,#414141)}.nx-slider__max-value-label{text-align:right}:host(.nx-slider--disabled){cursor:not-allowed}:host(.nx-slider--disabled) .nx-slider__background,:host(.nx-slider--disabled) .nx-slider__filler,:host(.nx-slider--disabled) .nx-slider__handle,:host(.nx-slider--disabled) .nx-slider__value,:host(.nx-slider--disabled) .nx-slider__value-label{pointer-events:none;cursor:not-allowed}:host(.nx-slider--disabled) .nx-slider__handle,:host(.nx-slider--disabled) .nx-slider__value{background-color:#fff;background-color:var(--slider-value-disabled-background-color,#fff)}:host(.nx-slider--disabled) .nx-slider__filler{background-color:rgba(0,97,146,.4);background-color:var(--slider-indicator-disabled-color,rgba(0,97,146,.4))}:host(.nx-slider--disabled) .nx-slider__value{color:rgba(0,97,146,.4);color:var(--slider-handle-value-disabled-color,rgba(0,97,146,.4))}:host(.nx-slider--disabled) .nx-slider__label-container{color:#dadada;color:var(--slider-value-label-disabled-color,#dadada)}:host(.nx-slider--disabled) .nx-slider__arrow{background:#fff;background:var(--slider-value-disabled-background-color,#fff);box-shadow:-2px -2px 1px 1px #fff,2px 2px 4px rgba(65,65,65,.5);box-shadow:-2px -2px 1px 1px var(--slider-value-disabled-background-color,#fff),2px 2px 4px rgba(65,65,65,.5)}:host(.nx-slider--disabled) .nx-slider__background{background:#d9d9d9;background:var(--slider-disabled-background-color,#d9d9d9)}:host(.nx-slider--negative) .nx-slider__label,:host(.nx-slider--negative) .nx-slider__value-label{color:#fff}:host(.nx-slider--negative) .nx-slider__filler{background-color:#fff}:host(.nx-slider--negative) .nx-slider__background{background-color:rgba(255,255,255,.35)}:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__label,:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__value-label{color:#d9d9d9}:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__filler{background-color:#d9d9d9}@media screen and (-ms-high-contrast:active){.nx-slider__background{background-color:buttonFace;border:1px solid buttonText}.nx-slider__filler{background-color:highlight}.nx-slider__handle{background-color:buttonFace;border-color:buttonText}.nx-slider__handle:focus,.nx-slider__handle:hover{background-color:highlight}.nx-slider__handle:active{background-color:buttonText}.nx-slider__value{border-color:buttonText;background-color:buttonFace;color:buttonText;-ms-high-contrast-adjust:none}.nx-slider__arrow{-ms-high-contrast-adjust:auto;background-color:buttonFace}:host(.nx-slider--disabled) .nx-slider__background{background-color:background;border:1px solid GrayText}:host(.nx-slider--disabled) .nx-slider__filler{background-color:GrayText}:host(.nx-slider--disabled) .nx-slider__handle{background-color:GrayText}:host(.nx-slider--disabled) .nx-slider__value{border-color:GrayText;color:GrayText}:host(.nx-slider--disabled) .nx-slider__arrow{border-color:GrayText}}"]}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:r.ChangeDetectorRef},{type:r.NgZone}]},e.propDecorators={handleElement:[{type:r.ViewChild,args:["handle",{static:!0}]}],id:[{type:r.Input,args:["id"]}],tabindex:[{type:r.Input}],min:[{type:r.Input,args:["nxMin"]}],max:[{type:r.Input,args:["nxMax"]}],step:[{type:r.Input,args:["nxStep"]}],label:[{type:r.Input,args:["nxLabel"]}],disabled:[{type:r.Input}],inverted:[{type:r.Input,args:["nxInverted"]}],thumbLabel:[{type:r.Input}],negative:[{type:r.Input,args:["negative"]}],valueChange:[{type:r.Output,args:["nxValueChange"]}],valueFormatter:[{type:r.Input,args:["nxValueFormatter"]}],labelMinFormatter:[{type:r.Input,args:["nxLabelMinFormatter"]}],labelMaxFormatter:[{type:r.Input,args:["nxLabelMaxFormatter"]}],value:[{type:r.Input,args:["nxValue"]}]},e}();var x=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule,t.NxGridModule],declarations:[g],exports:[g]}]}],e}();e.NxSliderComponent=g,e.NxSliderModule=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-slider.umd.min.js.map
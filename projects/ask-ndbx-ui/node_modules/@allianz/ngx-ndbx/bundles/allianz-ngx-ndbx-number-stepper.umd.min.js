!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/core"),require("@allianz/ngx-ndbx/utils"),require("@angular/cdk/coercion"),require("@angular/common"),require("@allianz/ngx-ndbx/button"),require("@allianz/ngx-ndbx/icon"),require("@allianz/ngx-ndbx/input"),require("@angular/forms"),require("@allianz/ngx-ndbx/core"),require("decimal.js")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/number-stepper",["exports","rxjs","@angular/core","@allianz/ngx-ndbx/utils","@angular/cdk/coercion","@angular/common","@allianz/ngx-ndbx/button","@allianz/ngx-ndbx/icon","@allianz/ngx-ndbx/input","@angular/forms","@allianz/ngx-ndbx/core","decimal.js"],t):t(((e=e||self).allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"]["number-stepper"]={}),e.rxjs,e.ng.core,e.allianz["ngx-ndbx"].utils,e.ng.cdk.coercion,e.ng.common,e.allianz["ngx-ndbx"].button,e.allianz["ngx-ndbx"].icon,e.allianz["ngx-ndbx"].input,e.ng.forms,e.allianz["ngx-ndbx"].core,e.decimal_js)}(this,function(e,t,n,i,r,s,p,a,o,u,l,c){"use strict";var h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var g=function(){function e(){this.changes=new t.Subject,this.decrementAriaLabel="Decrement",this.incrementAriaLabel="Increment"}return e.decorators=[{type:n.Injectable}],e}();var d=function(){function e(e,t,n){this._element=e,this._renderer=t,this._cdr=n,this._resize=!0,this.updateInputWidth=this.updateInputWidth.bind(this)}return Object.defineProperty(e.prototype,"resize",{get:function(){return this._resize},set:function(e){this._resize=r.coerceBooleanProperty(e),this._resize?(this._addEventListener(),this.updateInputWidth()):this._removeEventListener()},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.resize&&this._addEventListener()},e.prototype.ngOnDestroy=function(){this._removeEventListener()},e.prototype.updateInputWidth=function(){var e=this._renderer.createElement("canvas").getContext("2d"),t=window.getComputedStyle(this._element.nativeElement);e.font=i.getFontShorthand(t);var n=e.measureText(this._element.nativeElement.value),r=this.sumStyles(t.paddingLeft,t.paddingRight),s=this.sumStyles(t.borderLeftWidth,t.borderRightWidth),p=n.width+r+s+16,a=parseFloat(t.minWidth);this.width=Math.max(Number.isNaN(a)?0:a,p),this._cdr.markForCheck()},e.prototype._addEventListener=function(){this._element.nativeElement.addEventListener("input",this.updateInputWidth,!0),this._element.nativeElement.addEventListener("change",this.updateInputWidth,!0)},e.prototype._removeEventListener=function(){this._element.nativeElement.removeEventListener("input",this.updateInputWidth,!0),this._element.nativeElement.removeEventListener("change",this.updateInputWidth,!0)},e.prototype.sumStyles=function(e,t){return e=parseInt(e,10),t=parseInt(t,10),(e=Number.isNaN(e)?0:e)+(t=Number.isNaN(t)?0:t)},e.decorators=[{type:n.Directive,args:[{selector:"input[nxAutoResize]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:n.ChangeDetectorRef}]},e.propDecorators={width:[{type:n.HostBinding,args:["style.width.px"]}],resize:[{type:n.Input,args:["nxAutoResize"]}]},e}();var m={big:"nx-stepper--big",normal:""},x=["nx-stepper"],_=["nx-stepper__input"],f=new RegExp(/^-?[0-9]\d*(\.\d+)?$/g),b={provide:u.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return w}),multi:!0},v={provide:u.NG_VALIDATORS,useExisting:n.forwardRef(function(){return w}),multi:!0},y=0,w=function(e){function t(t,r,s,p){var a=e.call(this,m,x,s,r)||this;return a._changeDetectorRef=t,a._intl=p,a._step=1,a._min=0,a._max=100,a._value=0,a._label=null,a._resize=!1,a._negative=!1,a._leadingZero=!0,a.inputClassNames=i.mapClassNames("regular",_),a.inputId="nx-number-stepper-"+y++,a.ariaDescribedBy=null,a.valueChange=new n.EventEmitter,a.onChangeCallback=function(e){},a.onTouchedCallback=function(){},a._intlSubscription=a._intl.changes.subscribe(function(){return a._changeDetectorRef.markForCheck()}),a}return function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"resize",{get:function(){return this._resize},set:function(e){this._resize=r.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label!==e&&(this._label=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){this._step=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){this._min=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){this._max=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,null!==this._value?this.setInputValue(this._value):this.setInputValue(0),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"negative",{get:function(){return this._negative},set:function(e){this._negative!==e&&(this._negative=r.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingZero",{get:function(){return this._leadingZero},set:function(e){this._leadingZero!==e&&(this._leadingZero=r.coerceBooleanProperty(e),this.setInputValue(this.value),this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.setInputValue(this._value)},t.prototype.ngAfterViewInit=function(){this.ngContentWrapper&&(this.ariaDescribedBy=this.ngContentWrapper.nativeElement.children.length>0?"label-for-"+this.inputId:null)},t.prototype.ngOnDestroy=function(){this._intlSubscription.unsubscribe()},t.prototype.setInputValue=function(e){var t=this;this.leadingZero?this.numberInputValue=i.pad(e.toString(),2):this.numberInputValue=e.toString(),setTimeout(function(){t.triggerResize()})},t.prototype.writeValue=function(e){this.value=e},t.prototype.registerOnChange=function(e){this.onChangeCallback=e},t.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},t.prototype.onInputChange=function(e){this.validateUserInput(e.target.value)?this._value=Number(e.target.value):this._value=null,null!==this._value&&this.setInputValue(this._value),this.valueChange.emit(this._value),this.onChangeCallback(this._value)},t.prototype.validateUserInput=function(e){return!!e.match(f)},t.prototype.incrementOnClick=function(){this._increment(),this.onTouchedCallback()},t.prototype.incrementOnKey=function(){this._increment()},t.prototype._increment=function(){var e;e=this.isBetweenLimits(this._value)?this.getNextGreaterValue(this._value):this.enforceLimits(this._value),this.value=e,this.valueChange.emit(this._value),this.onChangeCallback(this._value)},t.prototype.triggerResize=function(){this.resize&&(this.autoResize.updateInputWidth(),this._changeDetectorRef.markForCheck())},t.prototype.decrementOnClick=function(){this._decrement(),this.onTouchedCallback()},t.prototype.decrementOnKey=function(){this._decrement()},t.prototype._decrement=function(){var e;e=this.isBetweenLimits(this._value)?this.getNextLowerValue(this._value):this.enforceLimits(this._value),this.value=e,this.valueChange.emit(this._value),this.onChangeCallback(this._value)},t.prototype.enforceLimits=function(e){return e>this._max?this._max:e<this._min?this._min:e},t.prototype.getNextLowerValue=function(e){var t;return e||(e=0),t=this.isValidStep(e)?new c.Decimal(e).minus(new c.Decimal(this._step)).toNumber():new c.Decimal(e).toNearest(this._step,c.Decimal.ROUND_DOWN).toNumber(),this.enforceLimits(t)},t.prototype.getNextGreaterValue=function(e){var t;return e||(e=0),t=this.isValidStep(e)?new c.Decimal(e).plus(new c.Decimal(this._step)).toNumber():new c.Decimal(e).toNearest(this._step,c.Decimal.ROUND_UP).toNumber(),this.enforceLimits(t)},t.prototype.isBetweenLimits=function(e){return e<=this._max&&e>=this._min},t.prototype.isMinimum=function(){return this._value===this._min},t.prototype.isMaximum=function(){return this._value===this._max},t.prototype.isValidStep=function(e){null===e&&(e=new c.Decimal(0));var t=new c.Decimal(this._min),n=new c.Decimal(e),i=t.minus(n).mod(new c.Decimal(this._step)).toNumber();return!(!this.isBetweenLimits(e)||!this.isMinimum()&&!this.isMaximum()&&0!==i)},t.prototype.userInputToNumber=function(e){return parseInt(""===e?0:e,10)},t.prototype._validateFn=function(){return this.isValidStep(this._value)?null===this._value?{nxNumberStepperFormatError:"Not a valid number"}:null:{nxNumberStepperStepError:"Value is not a valid step"}},t.prototype.validate=function(e){return this._validateFn()},Object.defineProperty(t.prototype,"_buttonType",{get:function(){return"secondary"+(this.negative?" negative":"")},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"nx-number-stepper",template:'<div *ngIf="label" class="nx-stepper__label">\n  <label [for]="inputId">\n    {{label}}\n  </label>\n</div>\n<div class="nx-stepper__label" #customLabel *ngIf="!label" [id]="ariaDescribedBy">\n  <ng-content></ng-content>\n</div>\n<div class="nx-stepper__input-container">\n  <button\n    [attr.aria-label]="_intl.decrementAriaLabel"\n    [nxButton]="_buttonType"\n    class="nx-stepper__down nx-stepper__control"\n    (click)="decrementOnClick()"\n    [disabled]="value <= min"\n    type="button">\n    <nx-icon name="minus" size="s"></nx-icon>\n  </button>\n  <div class="nx-stepper__input-wrapper">\n    <div class="nx-stepper__inner-wrapper">\n        <ng-content select="nx-number-stepper-prefix"></ng-content>\n\n        <input [nxAutoResize]="resize" [value]="numberInputValue"\n        [attr.aria-describedby]="ariaDescribedBy"\n        [id]="inputId" [ngClass]="inputClassNames"\n        (input)="onInputChange($event)"\n        (keydown.arrowup)="incrementOnKey()"\n        (keydown.arrowdown)="decrementOnKey()"\n        (blur)="onTouchedCallback()"/>\n\n        <ng-content select="nx-number-stepper-suffix"></ng-content>\n    </div>\n    <div class="nx-stepper__input-underline"></div>\n  </div>\n\n  <button\n    [attr.aria-label]="_intl.incrementAriaLabel"\n    [nxButton]="_buttonType"\n    class="nx-stepper__up nx-stepper__control"\n    (click)="incrementOnClick()"\n    [disabled]="value >= max"\n    type="button">\n    <nx-icon name="plus" size="s"></nx-icon>\n  </button>\n</div>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,inputs:["classNames: nxSize"],host:{"[class.is-negative]":"negative"},providers:[b,v],styles:[":host{display:block}:host input{padding:0}.nx-stepper__input-container{align-items:flex-end;display:flex;margin-top:12px}.nx-stepper__label{display:flex;font-size:20px;font-size:var(--number-stepper-label-font-size,20px);line-height:28px;line-height:var(--number-stepper-label-line-height,28px);font-weight:400;font-weight:var(--number-stepper-label-font-weight,400);letter-spacing:.2px;letter-spacing:var(--number-stepper-label-letter-spacing,.2px)}.nx-stepper__control{width:32px;height:32px;min-height:32px;font-size:24px;margin:0;padding:0}.nx-stepper__input{width:56px;min-width:56px}.nx-stepper__input,::ng-deep .nx-stepper__prefix,::ng-deep .nx-stepper__suffix{font-size:20px;font-size:var(--number-stepper-small-font-size,20px);line-height:28px;line-height:var(--number-stepper-small-line-height,28px);font-weight:400;font-weight:var(--number-stepper-small-font-weight,400);letter-spacing:.2px;letter-spacing:var(--number-stepper-small-letter-spacing,.2px);color:#414141;color:var(--number-stepper-color,#414141);background:0 0;outline:0;border:0;text-align:center}::ng-deep .nx-stepper__suffix{margin-left:4px}::ng-deep .nx-stepper__prefix{margin-right:4px}.nx-stepper__input-wrapper{display:flex;align-items:center;flex-direction:column;margin:0 16px}.nx-stepper__inner-wrapper{height:28px;display:flex;align-items:baseline}.nx-stepper__input-underline{width:100%;margin-top:2px;height:2px;background:#414141;background:var(--number-stepper-underline-color,#414141)}:host.nx-stepper--big .nx-stepper__control{width:72px;min-height:48px;margin-bottom:0}:host.nx-stepper--big .nx-stepper__input{width:72px;min-width:72px}:host.nx-stepper--big .nx-stepper__input,:host.nx-stepper--big ::ng-deep .nx-stepper__prefix,:host.nx-stepper--big ::ng-deep .nx-stepper__suffix{font-size:40px;font-size:var(--number-stepper-large-font-size,40px);line-height:48px;line-height:var(--number-stepper-large-line-height,48px);font-weight:400;font-weight:var(--number-stepper-large-font-weight,400);letter-spacing:.3px;letter-spacing:var(--number-stepper-large-letter-spacing,.3px);height:48px;padding:0;margin-bottom:0}:host.nx-stepper--big .nx-stepper__input-wrapper{margin:0 24px}:host.nx-stepper--big .nx-stepper__input-underline{margin-top:-2px}:host.nx-stepper--big .nx-stepper__inner-wrapper{height:48px}:host.is-negative .nx-stepper__label,:host.is-negative ::ng-deep .nx-stepper__prefix,:host.is-negative ::ng-deep .nx-stepper__suffix{color:#fff}:host.is-negative .nx-stepper__input{color:#fff}:host.is-negative .nx-stepper__input-underline{background:#fff}@media screen and (-ms-high-contrast:active){button.nx-stepper__control:disabled{border-color:GrayText;color:GrayText;opacity:1}.nx-stepper__input{color:buttonText}::ng-deep .nx-stepper__prefix,::ng-deep .nx-stepper__suffix,:host.nx-stepper--big ::ng-deep .nx-stepper__prefix,:host.nx-stepper--big ::ng-deep .nx-stepper__suffix{-ms-high-contrast-adjust:none;color:windowText}.nx-stepper__inner-wrapper{background:buttonFace}.nx-stepper__input-underline{background:buttonText}}"]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:n.Renderer2},{type:n.ElementRef},{type:g}]},t.propDecorators={ngContentWrapper:[{type:n.ViewChild,args:["customLabel",{static:!1}]}],autoResize:[{type:n.ViewChild,args:[d,{static:!0}]}],valueChange:[{type:n.Output,args:["nxValueChange"]}],resize:[{type:n.Input,args:["nxResize"]}],label:[{type:n.Input,args:["nxLabel"]}],step:[{type:n.Input,args:["nxStep"]}],min:[{type:n.Input,args:["nxMin"]}],max:[{type:n.Input,args:["nxMax"]}],value:[{type:n.Input,args:["nxValue"]}],negative:[{type:n.Input}],leadingZero:[{type:n.Input}]},t}(l.MappedStyles);var z=function(){function e(){}return e.decorators=[{type:n.Directive,args:[{selector:"nx-number-stepper-prefix",host:{class:"nx-stepper__prefix"}}]}],e}(),C=function(){function e(){}return e.decorators=[{type:n.Directive,args:[{selector:"nx-number-stepper-suffix",host:{class:"nx-stepper__suffix"}}]}],e}(),N=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[o.NxInputModule,u.FormsModule,a.NxIconModule,p.NxButtonModule,s.CommonModule],exports:[w,d,z,C],declarations:[w,d,z,C],providers:[g]}]}],e}();e.NxNumberStepperComponent=w,e.NxNumberStepperIntl=g,e.NxNumberStepperModule=N,e.NxNumberStepperPrefixDirective=z,e.NxNumberStepperSuffixDirective=C,e.ɵa=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-number-stepper.umd.min.js.map
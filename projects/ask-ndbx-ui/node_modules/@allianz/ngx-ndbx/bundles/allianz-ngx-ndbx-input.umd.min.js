!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@allianz/ngx-ndbx/formfield"),require("@angular/cdk/coercion"),require("@angular/cdk/platform"),require("@angular/forms"),require("rxjs"),require("@angular/cdk/text-field"),require("@allianz/ngx-ndbx/utils"),require("@angular/cdk/keycodes"),require("@allianz/ngx-ndbx/icon")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/input",["exports","@angular/common","@angular/core","@allianz/ngx-ndbx/formfield","@angular/cdk/coercion","@angular/cdk/platform","@angular/forms","rxjs","@angular/cdk/text-field","@allianz/ngx-ndbx/utils","@angular/cdk/keycodes","@allianz/ngx-ndbx/icon"],t):t(((e=e||self).allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"].input={}),e.ng.common,e.ng.core,e.allianz["ngx-ndbx"].formfield,e.ng.cdk.coercion,e.ng.cdk.platform,e.ng.forms,e.rxjs,e.ng.cdk["text-field"],e.allianz["ngx-ndbx"].utils,e.ng.cdk.keycodes,e.allianz["ngx-ndbx"].icon)}(this,function(e,t,n,o,r,i,a,s,l,u,p,c){"use strict";var d=new n.InjectionToken("NX_INPUT_VALUE_ACCESSOR"),h=["button","checkbox","file","hidden","image","radio","range","reset","submit"],f=["date","datetime","datetime-local","month","time","week"].filter(function(e){return i.getSupportedInputTypes().has(e)}),y=0,g=function(){function e(e,t,n,o,r,i,a,l){this._elementRef=e,this._platform=t,this.ngControl=n,this._parentForm=o,this._parentFormGroup=r,this._errorStateMatcher=i,this._autofillMonitor=l,this._type="text",this._uid="nx-input-"+y++,this._disabled=!1,this._required=!1,this._readonly=!1,this.errorState=!1,this.controlType="nx-input",this.autofilled=!1,this.stateChanges=new s.Subject,this.focused=!1,this.id=this.id,this._inputValueAccessor=a||this._elementRef.nativeElement,this._previousNativeValue=this.value,"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()&&(this.controlType="textarea")}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(e){e!==this.value&&(this._inputValueAccessor.value=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=r.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=r.coerceBooleanProperty(e),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=r.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e||"text",this._validateType(),!this._isTextarea()&&i.getSupportedInputTypes().has(this._type)&&(this._elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this.empty?this._placeholder:""},set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(function(t){e.autofilled=t.isAutofilled,e.stateChanges.next()})},Object.defineProperty(e.prototype,"elementRef",{get:function(){return this._elementRef},enumerable:!0,configurable:!0}),e.prototype._onInput=function(){},e.prototype._focusChanged=function(e){e===this.focused||this.readonly||(this.focused=e,this.stateChanges.next())},e.prototype.ngOnChanges=function(){this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()},e.prototype.updateErrorState=function(){var e=this.errorState,t=this._parentFormGroup||this._parentForm,n=this.ngControl?this.ngControl.control:null,o=this._errorStateMatcher.isErrorState(n,t);o!==e&&(this.errorState=o,this.stateChanges.next())},e.prototype.setDescribedByIds=function(e){this._ariaDescribedby=e.join(" ")},e.prototype.setAriaLabel=function(e){this._ariaLabel=e},e.prototype._isBadInput=function(){var e=this._elementRef.nativeElement.validity;return e&&e.badInput},Object.defineProperty(e.prototype,"empty",{get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)},enumerable:!0,configurable:!0}),e.prototype._isNeverEmpty=function(){return f.indexOf(this._type)>-1},e.prototype._isTextarea=function(){var e=this._elementRef.nativeElement;return!!e.nodeName&&"textarea"===e.nodeName.toLowerCase()},e.prototype._validateType=function(){if(h.indexOf(this._type)>-1)throw new Error("Input of type '"+this._type+"' is not supported")},Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty||this.placeholder&&this.placeholder.length>0},enumerable:!0,configurable:!0}),e.prototype._dirtyCheckNativeValue=function(){var e=this.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())},e.decorators=[{type:n.Directive,args:[{selector:"input[nxInput], textarea[nxInput], select[nxInput]",exportAs:"nxInput",host:{"[class.c-input]":"true","[attr.id]":"id","[class.is-filled]":"empty === false","[class.is-disabled]":"disabled","[class.has-error]":"errorState","[class.is-focused]":"focused","[attr.disabled]":"disabled || null","[attr.readonly]":"readonly || null","[attr.required]":"required || null","[attr.aria-label]":"_ariaLabel || null","[attr.aria-describedby]":"_ariaDescribedby || null","[attr.aria-invalid]":"errorState","[attr.aria-required]":"required.toString()","[attr.placeholder]":"placeholder || null","(blur)":"_focusChanged(false)","(focus)":"_focusChanged(true)","(input)":"_onInput()"},providers:[{provide:o.NxFormfieldControl,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:i.Platform},{type:a.NgControl,decorators:[{type:n.Optional},{type:n.Self}]},{type:a.NgForm,decorators:[{type:n.Optional}]},{type:a.FormGroupDirective,decorators:[{type:n.Optional}]},{type:u.ErrorStateMatcher},{type:void 0,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[d]}]},{type:l.AutofillMonitor}]},e.propDecorators={_ariaLabel:[{type:n.Input,args:["nxAriaLabel"]}],id:[{type:n.Input}],value:[{type:n.Input}],readonly:[{type:n.Input}],disabled:[{type:n.Input}],required:[{type:n.Input}],type:[{type:n.Input}],placeholder:[{type:n.Input}]},e}();var b={show:"password-show-o",hide:"password-hide-o"},x=function(){function e(e){this._changeDetectorRef=e,this._currentIcon=b.show,this._pressed=!1,this._ariaLabel="Show password"}return Object.defineProperty(e.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){e!==this._ariaLabel&&(this._ariaLabel=e,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.control?this._currentIcon="password"===this.control.type?b.show:b.hide:console.warn("You need to pass an input as a control to the password toggle.")},e.prototype.toggleInputType=function(){this.control&&(this.control.type="password"===this.control.type?"text":"password",this._pressed=!this._pressed,this.toggleIcon(),this._changeDetectorRef.markForCheck())},e.prototype.toggleIcon=function(){this._currentIcon=this._currentIcon===b.show?b.hide:b.show},e.prototype._onKeydown=function(e){!e||e.keyCode!==p.ENTER&&e.keyCode!==p.SPACE||this.toggleInputType()},Object.defineProperty(e.prototype,"tabindex",{get:function(){return this.control?this.control.disabled?-1:0:null},enumerable:!0,configurable:!0}),e.decorators=[{type:n.Component,args:[{selector:"nx-password-toggle",template:'<nx-icon\n      aria-hidden="true"\n      [name]="_currentIcon">\n    </nx-icon>',host:{"[attr.aria-label]":"ariaLabel","[attr.tabindex]":"tabindex","[attr.aria-pressed]":"_pressed",role:"button","(click)":"toggleInputType()","(keydown)":"_onKeydown($event)"},changeDetection:n.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;display:inline-block;height:24px;width:24px;cursor:pointer}:host:focus{outline:0}:host:hover{color:#006192;color:var(--hover-primary,#006192)}:host-context([data-whatinput=keyboard]):focus ::ng-deep nx-icon{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;box-shadow:var(--focus-box-shadow,0 0 0 2px #fff,0 0 0 6px #009de6);border-radius:4px}@media screen and (-ms-high-contrast:active){:host{color:buttonText}:host-context([data-whatinput=keyboard]):focus ::ng-deep nx-icon{box-shadow:0 0 0 2px background,0 0 0 6px windowText}}:host-context(.is-disabled){pointer-events:none}"]}]}],e.ctorParameters=function(){return[{type:n.ChangeDetectorRef}]},e.propDecorators={control:[{type:n.Input}],ariaLabel:[{type:n.Input}]},e}();var _=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.NxFormfieldModule,c.NxIconModule],declarations:[g,x],exports:[o.NxFormfieldModule,g,x]}]}],e}();e.NX_INPUT_VALUE_ACCESSOR=d,e.NxInputDirective=g,e.NxInputModule=_,e.NxPasswordToggleComponent=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-input.umd.min.js.map
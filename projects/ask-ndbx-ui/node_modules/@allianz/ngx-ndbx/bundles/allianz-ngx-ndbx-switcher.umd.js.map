{"version":3,"file":"allianz-ngx-ndbx-switcher.umd.js","sources":["ng://@allianz/ngx-ndbx/switcher/switcher.component.ts","ng://@allianz/ngx-ndbx/switcher/switcher.module.ts"],"sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Optional,\n  Self,\n  DoCheck,\n  ViewChild,\n  ElementRef\n} from '@angular/core';\nimport { ControlValueAccessor, FormControl, FormGroupDirective, NgControl, NgForm } from '@angular/forms';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { ErrorStateMatcher } from '@allianz/ngx-ndbx/utils';\n\nlet nextId = 0;\n/** Options for placement of the label */\nexport type POSITION = 'left' | 'right';\n/** Options for sizing of the label */\nexport type LABEL_SIZE = 'small' | 'large';\n\n@Component({\n  selector: 'nx-switcher',\n  templateUrl: 'switcher.component.html',\n  styleUrls: ['./switcher.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    /* the host id should be set to null, otherwise nx-switcher and its <input> get the same id\n    and on label click the input click is not triggered (double id problem) */\n    '[attr.id]': 'null',\n    '[class.is-negative]': 'negative',\n    '[class.is-checked]': 'checked',\n    '[class.is-big]': 'big',\n    '[class.nx-switcher--small-label]': 'labelSize === \"small\"',\n    '[class.nx-switcher--large-label]': 'labelSize === \"large\"',\n    '[class.is-disabled]': 'disabled',\n    '[class.is-swapped]': 'labelPosition === \"left\"',\n    '[class.has-error]': 'errorState',\n    '[attr.aria-invalid]': 'errorState'\n  }\n})\n\nexport class NxSwitcherComponent implements ControlValueAccessor, DoCheck {\n\n  private _id: string = `nx-switcher-${nextId++}`;\n  /** @docs-private */\n  errorState: boolean = false;\n\n  /** @docs-private */\n  @ViewChild('switcherLabelWrapper', { static: true }) _switcherLabelWrapper: ElementRef;\n\n  /** Sets the id of the switcher */\n  @Input()\n  set id(value: string) {\n    this._id = value;\n    this._changeDetectorRef.markForCheck();\n  }\n  get id(): string {\n    return this._id;\n  }\n\n  private _labelPosition: POSITION = 'right';\n  /** Specifies the placement of the label */\n  @Input()\n  set labelPosition(value: POSITION) {\n    this._labelPosition = value;\n    this._changeDetectorRef.markForCheck();\n  }\n  get labelPosition(): POSITION {\n    return this._labelPosition;\n  }\n\n  private _name: string = null;\n  /** Sets the label text of the switcher */\n  @Input()\n  set name(value: string) {\n    this._name = value;\n    this._changeDetectorRef.markForCheck();\n  }\n  get name(): string {\n    return this._name;\n  }\n\n  private _checked: boolean = false;\n  /** Whether the switcher is checked (on) or unchecked (off) */\n  @Input()\n  set checked(value: boolean) {\n    this._checked = value;\n    this._changeDetectorRef.markForCheck();\n  }\n  get checked(): boolean {\n    return this._checked;\n  }\n\n  private _big: boolean = false;\n  /** Whether the big switcher is used */\n  @Input('nxBig')\n  set big(value: boolean) {\n    const newValue = coerceBooleanProperty(value);\n    this._big = newValue;\n    this._changeDetectorRef.markForCheck();\n  }\n  get big(): boolean {\n    return this._big;\n  }\n\n  private _labelSize: LABEL_SIZE = 'large';\n  /** Sets the size of the label */\n  @Input()\n  set labelSize(value: LABEL_SIZE) {\n    this._labelSize = value;\n    this._changeDetectorRef.markForCheck();\n  }\n  get labelSize(): LABEL_SIZE {\n    return this._labelSize;\n  }\n\n  private _negative: boolean = false;\n  /** Whether the style for a dark background is used */\n  @Input('nxNegative')\n  set negative(value: boolean) {\n    const newValue = coerceBooleanProperty(value);\n    this._negative = newValue;\n    this._changeDetectorRef.markForCheck();\n  }\n  get negative(): boolean {\n    return this._negative;\n  }\n\n  private _disabled: boolean = false;\n  /** Whether the switcher is in the disabled state */\n  @Input()\n  set disabled(value: boolean) {\n    const newValue = coerceBooleanProperty(value);\n    this._disabled = newValue;\n    this._changeDetectorRef.markForCheck();\n  }\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  /** An event is dispatched each time the switcher value is changed */\n  @Output('checkedChange') checkedChange = new EventEmitter<boolean>();\n\n  private onChangeCallback = (_: any) => {};\n  private onTouchedCallback = () => {};\n\n  constructor(private _changeDetectorRef: ChangeDetectorRef,\n              @Optional() @Self() public ngControl: NgControl,\n              private _errorStateMatcher: ErrorStateMatcher,\n              @Optional() private _parentForm: NgForm,\n              @Optional() private _parentFormGroup: FormGroupDirective\n  ) {\n    if (this.ngControl) {\n      // Note: we provide the value accessor through here, instead of\n      // the `providers` to avoid running into a circular import.\n      this.ngControl.valueAccessor = this;\n    }\n  }\n\n  /** Allows to toggle between the states */\n  toggle() {\n    if (!this.disabled) {\n      this.checked = !this.checked;\n      this.onChangeCallback(this.checked);\n      this.checkedChange.emit(this.checked);\n      if (this.onTouchedCallback) {\n        this.onTouchedCallback();\n      }\n    }\n  }\n\n  writeValue(value: any): void {\n    if (value === null) {\n      value = false;\n    }\n    if (value !== this.checked) {\n      this.checked = value;\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  ngDoCheck() {\n    if (this.ngControl) {\n      // We need to re-evaluate this on every change detection cycle, because there are some\n      // error triggers that we can't subscribe to (e.g. parent form submissions). This means\n      // that whatever logic is in here has to be super lean or we risk destroying the performance.\n      this.updateErrorState();\n    }\n  }\n\n  setDisabledState(isDisabled: boolean) {\n    this.disabled = isDisabled;\n  }\n\n  /** @docs-private */\n  touch() {\n    this.onTouchedCallback();\n  }\n\n  /** @docs-private */\n  updateErrorState() {\n    const oldState = this.errorState;\n    const parent = this._parentFormGroup || this._parentForm;\n    const control = this.ngControl ? this.ngControl.control as FormControl : null;\n    const newState = this._errorStateMatcher.isErrorState(control, parent);\n\n    if (newState !== oldState) {\n      this.errorState = newState;\n    }\n  }\n\n  /** @docs-private */\n  get labelHasContent() {\n    return !!this._switcherLabelWrapper.nativeElement.innerHTML.trim();\n  }\n\n  /** @docs-private\n   * Callback for when the content of the label has changed.\n   */\n  labelContentChanged() {\n    this._changeDetectorRef.detectChanges();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NxSwitcherComponent } from './switcher.component';\nimport { CommonModule } from '@angular/common';\nimport { NxIconModule } from '@allianz/ngx-ndbx/icon';\nimport {ObserversModule} from '@angular/cdk/observers';\n\n@NgModule({\n  declarations: [ NxSwitcherComponent ],\n  exports: [ NxSwitcherComponent ],\n  imports: [ CommonModule, NxIconModule, ObserversModule ]\n})\nexport class NxSwitcherModule {}\n"],"names":["EventEmitter","coerceBooleanProperty","Component","ChangeDetectionStrategy","ChangeDetectorRef","NgControl","Optional","Self","ErrorStateMatcher","NgForm","FormGroupDirective","ViewChild","Input","Output","NgModule","CommonModule","NxIconModule","ObserversModule"],"mappings":"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"}
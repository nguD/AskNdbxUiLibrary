!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("rxjs"),require("@allianz/ngx-ndbx/utils"),require("@angular/cdk/keycodes"),require("@angular/cdk/coercion")):"function"==typeof define&&define.amd?define("@allianz/ngx-ndbx/code-input",["exports","@angular/common","@angular/core","@angular/forms","rxjs","@allianz/ngx-ndbx/utils","@angular/cdk/keycodes","@angular/cdk/coercion"],t):t(((e=e||self).allianz=e.allianz||{},e.allianz["ngx-ndbx"]=e.allianz["ngx-ndbx"]||{},e.allianz["ngx-ndbx"]["code-input"]={}),e.ng.common,e.ng.core,e.ng.forms,e.rxjs,e.allianz["ngx-ndbx"].utils,e.ng.cdk.keycodes,e.ng.cdk.coercion)}(this,function(e,t,o,n,r,i,a,s){"use strict";var c=function(){function e(){this.changes=new r.Subject,this.inputFieldAriaLabel="Enter Key",this.ofLabel="of"}return e.decorators=[{type:o.Injectable}],e}();var p=6,l=function(){function e(e,t,o,n,r,i,a){this._changeDetectorRef=e,this._el=t,this._control=o,this._intl=n,this._errorStateMatcher=r,this._parentForm=i,this._parentFormGroup=a,this.errorState=!1,this._codeLength=p,this._type="text",this._isUpDown=!1,this._tabindex=0,this._keyCode=new Array(p),this._focused=!1,this._negative=!1,this._disabled=!1,this.propagateChange=function(e){},this.propagateTouch=function(e){},this._control&&(this._control.valueAccessor=this)}return Object.defineProperty(e.prototype,"codeLength",{get:function(){return this._codeLength},set:function(e){this._codeLength=e,this.setInputLength(),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return this._tabindex},set:function(e){this._tabindex=e,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convertTo",{get:function(){return this._convertTo},set:function(e){this._convertTo=e,this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negative",{get:function(){return this._negative},set:function(e){var t=s.coerceBooleanProperty(e);this._negative!==t&&(this._negative=t,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){var t=s.coerceBooleanProperty(e);this._disabled!==t&&(this._disabled=t,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){this._control&&this.updateErrorState()},e.prototype.setInputLength=function(){this.codeLength?this._keyCode=new Array(this.codeLength):this._keyCode=new Array(p)},e.prototype._convertLetterSize=function(e){return"ÃŸ"===e?e:"string"==typeof e?"upper"===this.convertTo?e.toUpperCase():"lower"===this.convertTo?e.toLowerCase():e:void 0},e.prototype._keydownAction=function(e){var t=e.target.previousElementSibling,o=e.target.nextElementSibling;switch(e.keyCode){case a.SPACE:return!1;case a.BACKSPACE:""===e.target.value&&t&&"INPUT"===t.tagName&&this.selectInput(t);break;case a.LEFT_ARROW:t&&"INPUT"===t.tagName&&(e.preventDefault(),this.selectInput(t));break;case a.RIGHT_ARROW:o&&"INPUT"===o.tagName&&this.selectInput(o),e.preventDefault();break;case a.DOWN_ARROW:this._isUpDown=!0,"number"!==this._type||""!==e.target.value&&"0"!==e.target.value||e.preventDefault();break;case a.UP_ARROW:this._isUpDown=!0,"number"===this._type&&"9"===e.target.value&&e.preventDefault()}},e.prototype._selectText=function(e){this.selectInput(e.target)},e.prototype._selectNextInput=function(e){e.target.value=this._convertLetterSize(e.target.value.slice(0,1));var t=this._getFocusedInputIndex(e);this._keyCode[t]=e.target.value,this.propagateChange(this._keyCode.join(""));var o=!(this._isUpDown&&"number"===this.type);if(e.target.value&&o){var n=e.target.nextSibling;null!==n&&"INPUT"===n.tagName&&(n.focus(),""!==n.value&&this.selectInput(n))}this._isUpDown=!1},e.prototype._pasteClipboard=function(e){var t=(e.clipboardData||window.clipboardData).getData("text"),o=0,n=this._getFocusedInputIndex(e);t="number"===this.type?this._formatNumberInput(t):t;for(var r=n;r<this.codeLength;r++)this._keyCode[r]=this._convertLetterSize(t[o]),o++;this.propagateChange(this._keyCode.join("")),n+t.length<this.codeLength?this._el.nativeElement.children.item(n+t.length).focus():this._el.nativeElement.children.item(this.codeLength-1).focus(),e.preventDefault()},e.prototype._getFocusedInputIndex=function(e){for(var t,o=0;o<this._el.nativeElement.children.length;o++)e.srcElement===this._el.nativeElement.children.item(o)&&(t=o);return t},e.prototype._formatNumberInput=function(e){for(var t="",o=0;o<e.length;o++)e[o].match(/[0-9]{1}$/)&&(t+=e[o]);return t},e.prototype._onBlur=function(){var e=this;this._focused=!1,setTimeout(function(){e._focused||e.propagateTouch(e._keyCode.join("")),e._changeDetectorRef.markForCheck()})},e.prototype._setFocusState=function(){this._focused=!0},e.prototype.setDisabledState=function(e){this.disabled=e,this._changeDetectorRef.markForCheck()},e.prototype.writeValue=function(e){if(e)for(var t=e.split("").slice(0,this.codeLength),o=0;o<this.codeLength;o++)this._keyCode[o]=t[o];else this.setInputLength();this._changeDetectorRef.markForCheck()},e.prototype._trackByKeyCode=function(e,t){return e},e.prototype._inputGap=function(e){switch(this.codeLength){case 4:case 6:case 8:if(e===this.codeLength/2)return"nx-code-input--field-with-gap";break;default:return}},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.updateErrorState=function(){var e=this.errorState,t=this._parentFormGroup||this._parentForm,o=this._control?this._control.control:null,n=this._errorStateMatcher.isErrorState(o,t);n!==e&&(this.errorState=n)},e.prototype.getAriaLabel=function(e){return this._intl.inputFieldAriaLabel+" "+(e+1)+" "+this._intl.ofLabel+" "+this._keyCode.length},e.prototype.selectInput=function(e){e.focus();try{e.setSelectionRange(0,e.value.length)}catch(e){if(!(e instanceof DOMException&&"InvalidStateError"===e.name))throw e}},e.decorators=[{type:o.Component,args:[{selector:"nx-code-input",template:'<input\n        class="nx-code-input__field"\n        maxlength="1"\n        *ngFor="let key of _keyCode; index as i; trackBy: _trackByKeyCode;"\n        [(ngModel)]="_keyCode[i]"\n        [ngClass]="_inputGap(i)"\n        [attr.aria-label]="getAriaLabel(i)"\n        [attr.type]="type"\n        (input)="_selectNextInput($event)"\n        (paste)="_pasteClipboard($event)"\n        (blur)="_onBlur()"\n        (focus)="_setFocusState()"\n        (click)="_selectText($event)"\n        (keydown)="_keydownAction($event)"\n        [attr.tabindex]="tabindex"\n        [attr.disabled]="disabled ? \'\' : null"\n />\n',host:{"[class.nx-code-input]":"true","[class.has-error]":"errorState","[class.is-negative]":"negative","[class.is-disabled]":"disabled","[attr.tabindex]":"-1"},changeDetection:o.ChangeDetectionStrategy.OnPush,styles:[":host{display:block}:host .nx-code-input__field{font-size:26px;font-size:var(--code-input-font-size,26px);line-height:32px;line-height:var(--code-input-line-height,32px);font-weight:600;font-weight:var(--code-input-font-weight,600);letter-spacing:.3px;letter-spacing:var(--code-input-letter-spacing,.3px);color:#414141;color:var(--code-input-color,#414141);margin:0 4px;text-align:center;border:0;outline:0;caret-color:#007ab3;caret-color:var(--code-input-active-color,#007ab3);box-shadow:inset 0 -1px 0 0 #414141;box-shadow:inset 0 -1px 0 0 var(--code-input-color,#414141);width:32px;border-radius:0;padding:0;background:0 0;box-sizing:border-box}:host .nx-code-input__field:focus{margin-bottom:-1px;color:#007ab3;color:var(--code-input-active-color,#007ab3);box-shadow:inset 0 -2px 0 0 #007ab3;box-shadow:inset 0 -2px 0 0 var(--code-input-active-color,#007ab3)}:host .nx-code-input__field:first-child{margin-left:0}:host .nx-code-input__field:last-child{margin-right:0}:host .nx-code-input--field-with-gap{margin-left:20px}:host:focus{outline:0}:host.is-negative .nx-code-input__field{caret-color:#fff;box-shadow:inset 0 -1px 0 0 #fff;color:#fff}:host.is-negative .nx-code-input__field:focus{box-shadow:inset 0 -2px 0 0 #fff}:host.has-error:not(.is-negative) .nx-code-input__field{margin-bottom:-1px;font-weight:700;color:#dc3149;color:var(--code-input-error-color,#dc3149);box-shadow:inset 0 -1px 0 0 #dc3149;box-shadow:inset 0 -1px 0 0 var(--code-input-error-color,#dc3149)}:host.has-error:not(.is-negative) .nx-code-input__field:focus{box-shadow:inset 0 -2px 0 0 #dc3149;box-shadow:inset 0 -2px 0 0 var(--code-input-error-color,#dc3149)}:host.has-error.is-negative .nx-code-input__field{font-weight:700}:host.is-disabled{cursor:not-allowed}:host.is-disabled .nx-code-input__field{cursor:not-allowed;color:#c2c2c2;color:var(--code-input-disabled-color,#c2c2c2);box-shadow:inset 0 -1px 0 0 nx-theme-color(code-input-disabled-color);box-shadow:inset 0 -1px 0 0 var(--code-input-disabled-color,#c2c2c2)}:host.is-disabled.is-negative .nx-code-input__field{color:rgba(194,194,194,.4);box-shadow:inset 0 -1px 0 0 rgba(194,194,194,.4)}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}@media screen and (-ms-high-contrast:active){.nx-code-input__field{box-shadow:inset 0 -1px 0 0 buttonText}.nx-code-input__field:focus{box-shadow:inset 0 -2px 0 0 buttonText}:host.is-disabled .nx-code-input__field{color:GrayText;box-shadow:inset 0 -1px 0 0 GrayText;opacity:1}}"]}]}],e.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:o.ElementRef},{type:n.NgControl,decorators:[{type:o.Self},{type:o.Optional}]},{type:c},{type:i.ErrorStateMatcher},{type:n.NgForm,decorators:[{type:o.Optional}]},{type:n.FormGroupDirective,decorators:[{type:o.Optional}]}]},e.propDecorators={codeLength:[{type:o.Input,args:["length"]}],type:[{type:o.Input}],tabindex:[{type:o.Input}],convertTo:[{type:o.Input,args:["nxConvertTo"]}],negative:[{type:o.Input}],disabled:[{type:o.Input}]},e}();var u=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,n.FormsModule,n.ReactiveFormsModule],declarations:[l],exports:[l],providers:[c]}]}],e}();e.NxCodeInputComponent=l,e.NxCodeInputIntl=c,e.NxCodeInputModule=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianz-ngx-ndbx-code-input.umd.min.js.map
{"version":3,"sources":["ng://@allianz/ngx-ndbx/modal/modal.service.ts","ng://@allianz/ngx-ndbx/modal/animations.ts","ng://@allianz/ngx-ndbx/modal/modal.component.ts","ng://@allianz/ngx-ndbx/modal/modal-open-on-click.directive.ts","ng://@allianz/ngx-ndbx/modal/modal.module.ts"],"names":["NxModalService","this","subject","Subject","close$","asObservable","prototype","close","next","Injectable","fadeIn","animation","style","opacity","animate","fadeOut","scaleUp","transform","scaleDown","NxModalActionsDirective","Directive","args","selector","host","[class.nx-modal__actions]","NxModalContentDirective","[class.nx-modal__content]","NxModalComponent","modalService","eventManager","_changeDetectorRef","_closeButtonLabel","hideOnEsc","hideOnClickOutside","showCloseIcon","closeEvent","EventEmitter","closeSubscription","Subscription","EMPTY","removeEventListener","undefined","Object","defineProperty","value","markForCheck","ngOnInit","_this","subscribe","emit","addGlobalEventListener","ngOnDestroy","unsubscribe","clickOutsideModal","closeButtonClick","cancelClick","evt","stopPropagation","Component","template","changeDetection","ChangeDetectionStrategy","OnPush","animations","trigger","transition","useAnimation","query","animateChild","[@fadeInOut]","[class.nx-modal--fixed-width]","EventManager","ChangeDetectorRef","Input","Output","NxOpenModalOnClickDirective","templateRef","viewContainer","clickHandler","event","clear","createEmbeddedView","preventDefault","subscription","elements","forEach","el","length","addEventListener","elementRef","nativeElement","console","warn","TemplateRef","ViewContainerRef","NxModalModule","forRoot","ngModule","providers","NgModule","imports","CommonModule","A11yModule","NxIconModule","declarations","exports"],"mappings":"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","sourcesContent":["import {Injectable} from '@angular/core';\nimport {Observable, Subject} from 'rxjs';\n\n/** @docs-private */\n@Injectable()\nexport class NxModalService {\n\n  private subject = new Subject();\n  close$: Observable<any> = this.subject.asObservable();\n\n  close() {\n    this.subject.next();\n  }\n}\n","import { animate, animation, AnimationReferenceMetadata, style } from '@angular/animations';\n\nexport const fadeIn: AnimationReferenceMetadata = animation([\n    style({opacity: 0}),\n    animate('300ms', style({opacity: 1}))\n  ]);\n\nexport const fadeOut: AnimationReferenceMetadata = animation(\n  animate('300ms', style({opacity: 0}))\n);\n\nexport const scaleUp: AnimationReferenceMetadata = animation([\n    style({transform: 'scale(1)', opacity: 1}),\n    animate('250ms', style({transform: 'scale(1.3)', opacity: 0}))\n  ]);\n\nexport const scaleDown: AnimationReferenceMetadata = animation([\n    style({transform: 'scale(1.3)', opacity: 0}),\n    animate('250ms', style({transform: 'scale(1)', opacity: 1}))\n  ]);\n","import { OnDestroy, ChangeDetectionStrategy, Directive, ChangeDetectorRef } from '@angular/core';\nimport { Component, Input, OnInit, TemplateRef, Output, EventEmitter } from '@angular/core';\nimport { NxModalService } from './modal.service';\nimport { EventManager } from '@angular/platform-browser';\nimport { fadeIn, fadeOut, scaleDown, scaleUp } from './animations';\nimport { animateChild, query, transition, trigger, useAnimation } from '@angular/animations';\nimport { Subscription } from 'rxjs';\n\n/** Container for the action buttons in a modal. Has a fixed position at the bottom of the modal on scroll. */\n@Directive({\n  selector: '[nxModalActions]',\n  host: {\n    '[class.nx-modal__actions]': 'true'\n  }\n})\nexport class NxModalActionsDirective {}\n\n/** Scrollable container for the content of a modal. */\n@Directive({\n  selector: '[nxModalContent]',\n  host: {\n    '[class.nx-modal__content]': 'true'\n  }\n})\nexport class NxModalContentDirective {}\n\n@Component({\n  selector: 'nx-modal',\n  templateUrl: 'modal.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: [ './modal.component.scss' ],\n  animations: [\n    trigger('fadeInOut', [\n      transition(':enter', [\n        useAnimation(fadeIn),\n        query('@scaleUpDown', [\n          animateChild()\n        ])\n      ]),\n      transition(':leave', [\n        query('@scaleUpDown', [\n          animateChild()\n        ]),\n        useAnimation(fadeOut)\n      ])\n    ]),\n    trigger('scaleUpDown', [\n      transition(':enter', useAnimation(scaleDown)),\n      transition(':leave', useAnimation(scaleUp))\n    ])\n  ],\n  host: {\n    '[@fadeInOut]': '',\n    '[class.nx-modal--fixed-width]': 'size === \"fixed\"'\n  }\n})\n\nexport class NxModalComponent implements OnInit, OnDestroy {\n\n  private _closeButtonLabel: string = 'Close dialog';\n\n  /** Sets the 'aria-label' of the modal close button needed for accessibility.\n   *\n   * Default value is 'Close dialog'.\n   */\n  @Input()\n  set closeButtonLabel(value: string) {\n    if (value !== this._closeButtonLabel) {\n      this._closeButtonLabel = value;\n      this._changeDetectorRef.markForCheck();\n    }\n  }\n  get closeButtonLabel(): string {\n    return this._closeButtonLabel;\n  }\n\n  /**\n   * A template reference variable pointing to the template\n   * which contains the content of the modal view.\n   */\n  @Input('nxBody') body: TemplateRef<any>;\n\n  /**\n   * Whether the modal view should close when the user hits the escape key.\n   * Default is true.\n   */\n  @Input('nxHideOnEsc') hideOnEsc: boolean = true;\n\n  /**\n   * Whether the modal view should close when the user clicks on the backdrop.\n   * Default is true.\n   */\n  @Input('nxHideOnClickOutside') hideOnClickOutside: boolean = true;\n\n  /**\n   * Whether the modal view should have a close icon in the upper right corner.\n   * Default is true.\n   */\n  @Input('nxShowCloseIcon') showCloseIcon: boolean = true;\n\n  /**\n   * Controls the width of the dialog.\n   * On `auto` the width is controlled by the content width,\n   * on `fixed` the dialog gets a fixed width of 736px if the viewport is big enough. */\n  @Input('nxSize') size: 'fixed' | 'auto';\n\n  /**\n   * An event emitted when the user clicks on the backdrop or uses the built-in close button.\n   * This event can be applied in conjunction with the custom open state handling\n   * of a modal to close it when requested by the user.\n   */\n  @Output('nxClose') closeEvent = new EventEmitter<void>();\n\n  private closeSubscription: Subscription = Subscription.EMPTY;\n  private removeEventListener: Function = undefined;\n\n  constructor(private modalService: NxModalService, private eventManager: EventManager, private _changeDetectorRef: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n    this.closeSubscription = this.modalService.close$.subscribe(() => this.closeEvent.emit());\n\n    this.removeEventListener = this.eventManager.addGlobalEventListener('window', 'keyup.esc', () => {\n      if (this.hideOnEsc) {\n        this.modalService.close();\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.removeEventListener();\n    this.closeSubscription.unsubscribe();\n  }\n\n  /** @docs-private */\n  clickOutsideModal() {\n    if (this.hideOnClickOutside) {\n      this.modalService.close();\n    }\n  }\n\n  /** @docs-private */\n  closeButtonClick() {\n    this.modalService.close();\n  }\n\n  /** @docs-private */\n  cancelClick(evt: KeyboardEvent) {\n    evt.stopPropagation();\n  }\n}\n","import { Directive, Input, OnDestroy, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { SubscriptionLike as ISubscription } from 'rxjs';\n\nimport { NxModalService } from './modal.service';\n\n@Directive({selector: '[nxOpenModalOnClick]'})\nexport class NxOpenModalOnClickDirective implements OnInit, OnDestroy {\n\n  /** @docs-private */\n  elements: Array<any>;\n\n  private subscription: ISubscription;\n\n  constructor(private templateRef: TemplateRef<any>,\n              private viewContainer: ViewContainerRef,\n              private modalService: NxModalService) {\n  }\n\n  ngOnInit() {\n    this.subscription = this.modalService.close$.subscribe(() => this.viewContainer.clear());\n  }\n\n  ngOnDestroy() {\n    this.elements.forEach(el => {\n      if (el.removeEventListener) {\n        el.removeEventListener('click', this.clickHandler);\n      }\n    });\n\n    this.subscription.unsubscribe();\n  }\n\n  /** @docs-private */\n  clickHandler = (event: any) => {\n    this.viewContainer.clear();\n    // instantiate the template onto which this directive is applied\n    const viewRef = this.viewContainer.createEmbeddedView(this.templateRef);\n    // we need to mark the viewRef explicitly if the modal is used inside another\n    // component that is using onPush change detection\n    viewRef.markForCheck();\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  /**\n   * One or multiple template reference variables pointing to elements\n   * which should trigger opening the modal on click.\n   *\n   * Value: A single template reference variable or an array of template reference variables.\n   */\n  @Input()\n  set nxOpenModalOnClick(elements) {\n    // also support the case where only one element is passed, check for the length property to be sure elements is an array\n    if (elements.length) {\n      this.elements = elements;\n    } else {\n      this.elements = [ elements ];\n    }\n    // add a click event listener to any element passed as property to this directive\n    this.elements.forEach(el => {\n      if (el.addEventListener) {\n        el.addEventListener('click', this.clickHandler);\n      // workaround until refactoring: if the reference is a component\n      // reference the component has to implement a getter to its own elementRef\n      } else if (el.elementRef) {\n        el.elementRef.nativeElement.addEventListener('click', this.clickHandler);\n      } else {\n        console.warn(`nxOpenModalOnClick: Given Element doesn't appear to be an ElementRef.`, el);\n      }\n    });\n  }\n\n}\n","import { NxIconModule } from '@allianz/ngx-ndbx/icon';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport {NxModalComponent, NxModalActionsDirective, NxModalContentDirective} from './modal.component';\nimport { CommonModule } from '@angular/common';\nimport { NxOpenModalOnClickDirective } from './modal-open-on-click.directive';\nimport { NxModalService } from './modal.service';\nimport { A11yModule } from '@angular/cdk/a11y';\n\n@NgModule({\n  imports: [ CommonModule, A11yModule, NxIconModule ],\n  declarations: [\n    NxModalComponent,\n    NxOpenModalOnClickDirective,\n    NxModalActionsDirective,\n    NxModalContentDirective\n  ],\n  exports: [\n    NxModalComponent,\n    NxOpenModalOnClickDirective,\n    NxModalActionsDirective,\n    NxModalContentDirective\n  ],\n})\n\nexport class NxModalModule {\n  // define the modal service on root level as an application wide singleton,\n  // assuming that we only display one modal at a time, which seems quite reasonable\n  // this is static and named \"forRoot\" by convention\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: NxModalModule,\n      providers: [NxModalService]\n    };\n  }\n}\n"]}
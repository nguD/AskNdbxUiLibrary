/**
 * @fileoverview added by tsickle
 * Generated from: slider.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { clamp } from '@allianz/ngx-ndbx/utils';
import { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';
import { DOWN_ARROW, LEFT_ARROW, RIGHT_ARROW, UP_ARROW } from '@angular/cdk/keycodes';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, Input, Output, ViewChild, NgZone } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { Decimal } from 'decimal.js';
import { fromEvent } from 'rxjs';
/**
 * @record
 */
function Position() { }
if (false) {
    /** @type {?} */
    Position.prototype.x;
    /** @type {?} */
    Position.prototype.y;
}
/** @enum {number} */
var EventType = {
    TOUCH: 0, MOUSE: 1,
};
EventType[EventType.TOUCH] = 'TOUCH';
EventType[EventType.MOUSE] = 'MOUSE';
/** @type {?} */
var nextId = 0;
/** @type {?} */
var DEFAULT_MIN = 0;
/** @type {?} */
var DEFAULT_MAX = 100;
/** @type {?} */
var DEFAULT_STEP = 1;
var NxSliderComponent = /** @class */ (function () {
    function NxSliderComponent(elementRef, _changeDetectorRef, _ngZone) {
        this.elementRef = elementRef;
        this._changeDetectorRef = _changeDetectorRef;
        this._ngZone = _ngZone;
        this._id = "nx-slider-" + nextId++;
        this._tabIndex = 0;
        this._min = DEFAULT_MIN;
        this._max = DEFAULT_MAX;
        this._disabled = false;
        this._inverted = false;
        this._thumbLabel = true;
        this._negative = false;
        /**
         * An event is dispatched on each value change.
         */
        this.valueChange = new EventEmitter();
        this.isActive = false;
        this.dragSubscriptions = [];
        this.position = null;
        this._value = 0;
        this._step = DEFAULT_STEP;
        this._currentValue = 0;
        this._onChange = (/**
         * @return {?}
         */
        function () { });
        this._onTouched = (/**
         * @return {?}
         */
        function () { });
        /**
         * Sets the customization function for the value which is displayed above the slider handle (Default:(value) => value). ).
         */
        this.valueFormatter = (/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value; });
        /**
         * Sets the customization function for the label on the min-side of the slider (Default:(value) => value).
         */
        this.labelMinFormatter = (/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value; });
        /**
         * Sets the customization function for the label on the max-side of the slider (Default:(value) => value).
         */
        this.labelMaxFormatter = (/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value; });
    }
    Object.defineProperty(NxSliderComponent.prototype, "id", {
        get: /**
         * @return {?}
         */
        function () {
            return this._id;
        },
        /** Sets the id of the slider. */
        set: /**
         * Sets the id of the slider.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._id !== value) {
                this._id = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "tabindex", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tabIndex;
        },
        /** Sets the tabindex of the slider. */
        set: /**
         * Sets the tabindex of the slider.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabIndex = coerceNumberProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "min", {
        get: /**
         * @return {?}
         */
        function () {
            return this._min;
        },
        /** Sets the minimum value (Default: 0). */
        set: /**
         * Sets the minimum value (Default: 0).
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._min = coerceNumberProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "max", {
        get: /**
         * @return {?}
         */
        function () {
            return this._max;
        },
        /** Sets the maximum value (Default: 100). */
        set: /**
         * Sets the maximum value (Default: 100).
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._max = coerceNumberProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "step", {
        /** Sets the step size by which the value of the slider can be increased or decreased (Default: 1). */
        get: /**
         * Sets the step size by which the value of the slider can be increased or decreased (Default: 1).
         * @return {?}
         */
        function () { return this._step; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._step = coerceNumberProperty(value, this._step);
            if (this._step % 1 !== 0) {
                this._roundToDecimal = this._step.toString().split('.').pop().length;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "label", {
        get: /**
         * @return {?}
         */
        function () {
            return this._label;
        },
        /** Sets the label which is displayed on top of the slider. */
        set: /**
         * Sets the label which is displayed on top of the slider.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._label !== value) {
                this._label = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        /** Whether the input to the control of the slider should be disabled. */
        set: /**
         * Whether the input to the control of the slider should be disabled.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._disabled = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "inverted", {
        get: /**
         * @return {?}
         */
        function () {
            return this._inverted;
        },
        /** Whether the max value is to the right (false) or left (true).*/
        set: /**
         * Whether the max value is to the right (false) or left (true).
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._inverted = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "thumbLabel", {
        get: /**
         * @return {?}
         */
        function () {
            return this._thumbLabel;
        },
        /** Whether to display the thumb label on top of the slider.*/
        set: /**
         * Whether to display the thumb label on top of the slider.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._thumbLabel = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "negative", {
        get: /**
         * @return {?}
         */
        function () {
            return this._negative;
        },
        /** Whether the negative set of styles is applied (Default: 'false').*/
        set: /**
         * Whether the negative set of styles is applied (Default: 'false').
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._negative = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxSliderComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        /** Sets the current value of the slider. */
        set: /**
         * Sets the current value of the slider.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.writeValue(Number(value));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NxSliderComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.reset();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    NxSliderComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value !== this._value) {
            this._value = value;
            this.valueChange.emit(value);
            this._changeDetectorRef.markForCheck();
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxSliderComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxSliderComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onTouched = fn;
    };
    /**
     * @param {?} disabled
     * @return {?}
     */
    NxSliderComponent.prototype.setDisabledState = /**
     * @param {?} disabled
     * @return {?}
     */
    function (disabled) {
        this.disabled = disabled;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.isMinimum = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this._value === this.min;
    };
    /** @docs-private
     * A valid step is either:
     * - the minimum because thats our anchor for all value evaluation and steps
     * - (_value - min) % step === 0
     */
    /**
     * \@docs-private
     * A valid step is either:
     * - the minimum because thats our anchor for all value evaluation and steps
     * - (_value - min) % step === 0
     * @return {?}
     */
    NxSliderComponent.prototype.isValidStep = /**
     * \@docs-private
     * A valid step is either:
     * - the minimum because thats our anchor for all value evaluation and steps
     * - (_value - min) % step === 0
     * @return {?}
     */
    function () {
        /** @type {?} */
        var safeValue = new Decimal(this._value).minus(this.min);
        /** @type {?} */
        var modulo = safeValue.mod(this.step);
        return this.isMinimum() || modulo.cmp(0) === 0;
    };
    /** @docs-private
     * We have to look at two cases:
     * - current value is a valid multitude of the step size
     *   then we can safely add or subtract the step
     * - the value is not a valid multitude. this could be the max value or the value bound
     *   via nxValue
     *   then we look for the next closest value upwards or downwards
     *   decimal.js provides a nice utility function for this.
     */
    /**
     * \@docs-private
     * We have to look at two cases:
     * - current value is a valid multitude of the step size
     *   then we can safely add or subtract the step
     * - the value is not a valid multitude. this could be the max value or the value bound
     *   via nxValue
     *   then we look for the next closest value upwards or downwards
     *   decimal.js provides a nice utility function for this.
     * @param {?} valueDiff
     * @return {?}
     */
    NxSliderComponent.prototype.changeValue = /**
     * \@docs-private
     * We have to look at two cases:
     * - current value is a valid multitude of the step size
     *   then we can safely add or subtract the step
     * - the value is not a valid multitude. this could be the max value or the value bound
     *   via nxValue
     *   then we look for the next closest value upwards or downwards
     *   decimal.js provides a nice utility function for this.
     * @param {?} valueDiff
     * @return {?}
     */
    function (valueDiff) {
        /** @type {?} */
        var newValue = new Decimal(this._value);
        if (this.isValidStep()) {
            newValue = newValue.plus(valueDiff);
        }
        else {
            // subtract the minimum to find the closest multitude then add the minimum again to get the valid slider step
            /** @type {?} */
            var minAdjustedValue = new Decimal(this._value).minus(this.min);
            newValue = valueDiff < 0 ? minAdjustedValue.toNearest(this.step, Decimal.ROUND_DOWN)
                : minAdjustedValue.toNearest(this.step, Decimal.ROUND_UP);
            newValue = newValue.plus(this.min);
        }
        // cast the Decimal object to a JS number before it gets returned
        /** @type {?} */
        var toNumber = newValue.toNumber();
        toNumber = clamp(toNumber, this.min, this.max);
        if (this.value !== toNumber) {
            this._onChange(toNumber);
            this.valueChange.emit(toNumber);
            this.value = toNumber;
        }
    };
    Object.defineProperty(NxSliderComponent.prototype, "percentageValue", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var percentageValue = ((this.value || 0) - this.min) / (this.max - this.min) * 100;
            if (this.inverted) {
                percentageValue = 100 - percentageValue;
            }
            return clamp(percentageValue, 0, 100);
        },
        enumerable: true,
        configurable: true
    });
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.sliderClick = /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (this.disabled) {
            return;
        }
        this._focusHandleElement();
        event.stopPropagation();
        this.position = this.getPositionFromEvent(event);
        this.frameId = requestAnimationFrame((/**
         * @return {?}
         */
        function () {
            _this.valueByPosition();
            if (_this.value !== _this._currentValue) {
                _this._currentValue = _this.value;
                _this._onChange(_this.value);
            }
        }));
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.focus = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        if (this.disabled) {
            return;
        }
        this._focusHandleElement();
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.blur = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        if (this.disabled) {
            return;
        }
    };
    /**
     * @docs-private
     * Prevent text selection when dragging the handle.
     */
    /**
     * \@docs-private
     * Prevent text selection when dragging the handle.
     * @return {?}
     */
    NxSliderComponent.prototype.selectStart = /**
     * \@docs-private
     * Prevent text selection when dragging the handle.
     * @return {?}
     */
    function () {
        return false;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.handleKeypress = /**
     * \@docs-private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.disabled) {
            return;
        }
        if (event.which < LEFT_ARROW || event.which > DOWN_ARROW) {
            return;
        }
        switch (event.which) {
            case this.inverted ? RIGHT_ARROW : LEFT_ARROW:
            case DOWN_ARROW:
                return this.changeValue(-this.step);
            case UP_ARROW:
            case this.inverted ? LEFT_ARROW : RIGHT_ARROW:
                return this.changeValue(this.step);
        }
    };
    /** @docs-private
     * this is called on mousedown or touchstart
     */
    /**
     * \@docs-private
     * this is called on mousedown or touchstart
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.dragStart = /**
     * \@docs-private
     * this is called on mousedown or touchstart
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (this.disabled) {
            return;
        }
        this.isActive = true;
        /** @type {?} */
        var isTouchEvent = this.detectEventType(event) === EventType.TOUCH;
        this._currentValue = this.value;
        if (isTouchEvent) {
            this._ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.dragSubscriptions.push(fromEvent(document, 'touchmove').subscribe(_this.handleDragMove.bind(_this)));
                _this.dragSubscriptions.push(fromEvent(document, 'touchend').subscribe(_this.handleDragStop.bind(_this)));
            }));
            this._ngZone.run((/**
             * @return {?}
             */
            function () {
                _this.dragSubscriptions.push(fromEvent(document, 'touchcancel').subscribe(_this.handleDragStop.bind(_this)));
            }));
        }
        else {
            this._ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.dragSubscriptions.push(fromEvent(document, 'mousemove').subscribe(_this.handleDragMove.bind(_this)));
            }));
            this._ngZone.run((/**
             * @return {?}
             */
            function () {
                _this.dragSubscriptions.push(fromEvent(document, 'mouseup').subscribe(_this.handleDragStop.bind(_this)));
            }));
        }
        this.position = this.getPositionFromEvent(event);
        this.runChangeObserver();
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxSliderComponent.prototype.formatValue = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return this.valueFormatter(value);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.formatLabelLeft = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.inverted ? this.formatLabelMax() : this.formatLabelMin();
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.formatLabelRight = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.inverted ? this.formatLabelMin() : this.formatLabelMax();
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.valueByPosition = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rect = this.elementRef.nativeElement.getBoundingClientRect();
        /** @type {?} */
        var x = Math.max(rect.left, Math.min(rect.right, this.position.x));
        // position of slider relative to slider width
        /** @type {?} */
        var percent = (x - rect.left) / rect.width;
        if (this.inverted) {
            percent = 1 - percent;
        }
        /** @type {?} */
        var exactValue = this.min + percent * (this.max - this.min);
        /**
         * edge case handling because of float precision errors
         * you couldn't reach the maximum
         * @type {?}
         */
        var closestValue;
        if (percent === 1) {
            closestValue = this.max;
        }
        else if (percent === 0) {
            closestValue = this.min;
        }
        else {
            closestValue = Math.round((exactValue - this.min) / this.step) * this.step + this.min;
        }
        if (this._roundToDecimal) {
            closestValue = this.roundToDecimal(closestValue);
        }
        closestValue = clamp(closestValue, this.min, this.max);
        this.value = closestValue;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    NxSliderComponent.prototype.roundToDecimal = /**
     * \@docs-private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return parseFloat(value.toFixed(this._roundToDecimal));
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.formatLabelMin = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.labelMinFormatter(this.min);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype.formatLabelMax = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.labelMaxFormatter(this.max);
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.handleDragMove = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.position = this.getPositionFromEvent(event);
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.handleDragStop = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.reset();
        this.valueByPosition();
        if (this.value !== this._currentValue) {
            this._currentValue = this.value;
            this._onChange(this.value);
        }
    };
    /**
     * @private
     * @return {?}
     */
    NxSliderComponent.prototype.runChangeObserver = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.frameId = requestAnimationFrame((/**
         * @return {?}
         */
        function () {
            _this.valueByPosition();
            if (_this.isActive) {
                _this.runChangeObserver();
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    NxSliderComponent.prototype.reset = /**
     * @private
     * @return {?}
     */
    function () {
        var e_1, _a;
        this.isActive = false;
        try {
            for (var _b = tslib_1.__values(this.dragSubscriptions), _c = _b.next(); !_c.done; _c = _b.next()) {
                var subscription = _c.value;
                subscription.unsubscribe();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this.dragSubscriptions = [];
        cancelAnimationFrame(this.frameId);
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.detectEventType = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        return event.type.includes('touch') ? EventType.TOUCH : EventType.MOUSE;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    NxSliderComponent.prototype.getPositionFromEvent = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var eventType = this.detectEventType(event);
        /** @type {?} */
        var cursor = eventType === EventType.TOUCH ? ((/** @type {?} */ (event))).touches.item(0) : event;
        return {
            x: cursor.clientX,
            y: cursor.clientY
        };
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxSliderComponent.prototype._focusHandleElement = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        this.handleElement.nativeElement.focus();
    };
    NxSliderComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-slider',
                    template: "<label class=\"nx-slider__label\" [id]=\"id + '-label'\" [attr.for]=\"id + '-handle'\" (click)=\"_focusHandleElement()\">{{label}}</label>\n\n<div\n  class=\"nx-slider__wrapper\"\n  (click)=\"sliderClick($event)\"\n>\n\n  <span class=\"nx-slider__background\">\n    <span class=\"nx-slider__filler\" [style.width.%]=\"percentageValue\"></span>\n\n    <div class=\"nx-slider__handle\"\n        [id]=\"id + '-handle'\"\n        [attr.tabindex]=\"tabindex\"\n        [attr.aria-labelledby]=\"id + '-label'\"\n        role=\"slider\"\n        [attr.aria-valuemin]=\"formatLabelMin()\"\n        [attr.aria-valuemax]=\"formatLabelMax()\"\n        [attr.aria-valuetext]=\"formatValue(value)\"\n        [attr.aria-valuenow]=\"formatValue(value)\"\n        (mousedown)=\"dragStart($event)\"\n        (touchstart)=\"dragStart($event)\"\n        (selectstart)=\"selectStart()\"\n        #handle\n      >\n\n      <span *ngIf=\"thumbLabel\" class=\"nx-slider__value\">{{formatValue(value)}}\n        <div class=\"nx-slider__arrow\">\n        </div>\n      </span>\n    </div>\n\n  </span>\n</div>\n\n<div class=\"nx-slider__label-container\">\n    <span class=\"nx-slider__value-label\">{{formatLabelLeft()}}</span>\n    <span class=\"nx-slider__value-label\">{{formatLabelRight()}}</span>\n</div>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [{
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NxSliderComponent; })),
                            multi: true
                        }],
                    host: {
                        '[attr.aria-disabled]': 'disabled ? true : null',
                        '(keydown)': 'handleKeypress($event)',
                        '[class.nx-slider--disabled]': 'disabled',
                        '[class.nx-slider--negative]': 'negative'
                    },
                    styles: [":host{display:block}.nx-slider__label{font-size:20px;font-size:var(--slider-label-font-size,20px);line-height:28px;line-height:var(--slider-label-line-height,28px);font-weight:300;font-weight:var(--slider-label-font-weight,300);letter-spacing:.2px;letter-spacing:var(--slider-label-letter-spacing,.2px);color:#414141;color:var(--slider-label-color,#414141)}.nx-slider__wrapper{width:100%;padding:66px 0 18px}.nx-slider__background{position:relative;background-color:#d9d9d9;background-color:var(--slider-background-color,#d9d9d9);display:block;height:4px;border-radius:2px;white-space:nowrap;cursor:pointer}.nx-slider__filler{display:inline-block;height:4px;border-radius:2px;background-color:#007ab3;background-color:var(--slider-indicator-color,#007ab3);float:left}.nx-slider__handle{display:inline-block;position:relative;width:24px;height:24px;border-radius:50%;box-shadow:0 2px 4px rgba(65,65,65,.5);border-color:var(--slider-handle-border-color,#f5f5f5);background:#fff;background:var(--slider-handle-background-color,#fff);box-sizing:border-box;margin-left:-12px;top:-10px;z-index:2;cursor:-webkit-grab;cursor:grab;border:1px solid #f5f5f5}.nx-slider__handle:focus{outline:0;border-color:#007ab3;border-color:var(--slider-handle-focus-border-color,#007ab3)}.nx-slider__handle:active{box-shadow:0 2px 4px rgba(65,65,65,.5),inset 0 0 0 4px #fff,inset 0 0 0 24px rgba(0,122,179,.2);box-shadow:0 2px 4px rgba(65,65,65,.5),inset 0 0 0 4px var(--slider-handle-background-color,#fff),inset 0 0 0 24px var(--slider-handle-active-inset-color,rgba(0,122,179,.2));cursor:-webkit-grabbing;cursor:grabbing}:host-context([data-whatinput=keyboard]) .nx-slider__handle:focus{border-color:#7fbcd9;box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;box-shadow:var(--focus-box-shadow,0 0 0 2px #fff,0 0 0 6px #009de6)}@media screen and (-ms-high-contrast:active){:host-context([data-whatinput=keyboard]) .nx-slider__handle:focus{box-shadow:0 0 0 2px background,0 0 0 6px windowText}}.nx-slider__value{font-size:12px;font-size:var(--slider-handle-value-font-size,12px);line-height:16px;line-height:var(--slider-handle-value-line-height,16px);font-weight:600;font-weight:var(--slider-handle-value-font-weight,600);letter-spacing:.5px;letter-spacing:var(--slider-handle-value-letter-spacing,.5px);color:#006192;color:var(--slider-handle-value-color,#006192);border:1px solid #f5f5f5;border-color:var(--slider-handle-border-color,#f5f5f5);border-radius:4px;box-shadow:0 2px 4px rgba(65,65,65,.5);cursor:-webkit-grab;cursor:grab;height:24px;width:48px;text-align:center;right:8px;padding:3px 8px;position:relative;top:-40px;display:table;left:50%;transform:translateX(-50%);background:#fff;background:var(--slider-value-background-color,#fff)}.nx-slider__value:active{cursor:-webkit-grabbing;cursor:grabbing}.nx-slider__arrow{width:6px;height:6px;border-right:1px solid;border-bottom:1px solid;left:50%;transform:translate(-50%,1px) rotate(45deg);position:absolute;box-shadow:-2px -2px 1px 1px #fff,2px 2px 4px rgba(65,65,65,.5);box-shadow:-2px -2px 1px 1px var(--slider-value-background-color,#fff),2px 2px 4px rgba(65,65,65,.5);background:#fff;background:var(--slider-value-background-color,#fff);border-color:#f5f5f5;border-color:var(--slider-handle-border-color,#f5f5f5)}.nx-slider__label-container{display:flex;width:100%;justify-content:space-between;font-size:16px;font-size:var(--slider-value-label-font-size,16px);line-height:24px;line-height:var(--slider-value-label-line-height,24px);font-weight:300;font-weight:var(--slider-value-label-font-weight,300);letter-spacing:0;letter-spacing:var(--slider-value-label-letter-spacing,0);color:#414141;color:var(--slider-value-label-color,#414141)}.nx-slider__max-value-label{text-align:right}:host(.nx-slider--disabled){cursor:not-allowed}:host(.nx-slider--disabled) .nx-slider__background,:host(.nx-slider--disabled) .nx-slider__filler,:host(.nx-slider--disabled) .nx-slider__handle,:host(.nx-slider--disabled) .nx-slider__value,:host(.nx-slider--disabled) .nx-slider__value-label{pointer-events:none;cursor:not-allowed}:host(.nx-slider--disabled) .nx-slider__handle,:host(.nx-slider--disabled) .nx-slider__value{background-color:#fff;background-color:var(--slider-value-disabled-background-color,#fff)}:host(.nx-slider--disabled) .nx-slider__filler{background-color:rgba(0,97,146,.4);background-color:var(--slider-indicator-disabled-color,rgba(0,97,146,.4))}:host(.nx-slider--disabled) .nx-slider__value{color:rgba(0,97,146,.4);color:var(--slider-handle-value-disabled-color,rgba(0,97,146,.4))}:host(.nx-slider--disabled) .nx-slider__label-container{color:#dadada;color:var(--slider-value-label-disabled-color,#dadada)}:host(.nx-slider--disabled) .nx-slider__arrow{background:#fff;background:var(--slider-value-disabled-background-color,#fff);box-shadow:-2px -2px 1px 1px #fff,2px 2px 4px rgba(65,65,65,.5);box-shadow:-2px -2px 1px 1px var(--slider-value-disabled-background-color,#fff),2px 2px 4px rgba(65,65,65,.5)}:host(.nx-slider--disabled) .nx-slider__background{background:#d9d9d9;background:var(--slider-disabled-background-color,#d9d9d9)}:host(.nx-slider--negative) .nx-slider__label,:host(.nx-slider--negative) .nx-slider__value-label{color:#fff}:host(.nx-slider--negative) .nx-slider__filler{background-color:#fff}:host(.nx-slider--negative) .nx-slider__background{background-color:rgba(255,255,255,.35)}:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__label,:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__value-label{color:#d9d9d9}:host(.nx-slider--negative.nx-slider--disabled) .nx-slider__filler{background-color:#d9d9d9}@media screen and (-ms-high-contrast:active){.nx-slider__background{background-color:buttonFace;border:1px solid buttonText}.nx-slider__filler{background-color:highlight}.nx-slider__handle{background-color:buttonFace;border-color:buttonText}.nx-slider__handle:focus,.nx-slider__handle:hover{background-color:highlight}.nx-slider__handle:active{background-color:buttonText}.nx-slider__value{border-color:buttonText;background-color:buttonFace;color:buttonText;-ms-high-contrast-adjust:none}.nx-slider__arrow{-ms-high-contrast-adjust:auto;background-color:buttonFace}:host(.nx-slider--disabled) .nx-slider__background{background-color:background;border:1px solid GrayText}:host(.nx-slider--disabled) .nx-slider__filler{background-color:GrayText}:host(.nx-slider--disabled) .nx-slider__handle{background-color:GrayText}:host(.nx-slider--disabled) .nx-slider__value{border-color:GrayText;color:GrayText}:host(.nx-slider--disabled) .nx-slider__arrow{border-color:GrayText}}"]
                }] }
    ];
    /** @nocollapse */
    NxSliderComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    NxSliderComponent.propDecorators = {
        handleElement: [{ type: ViewChild, args: ['handle', { static: true },] }],
        id: [{ type: Input, args: ['id',] }],
        tabindex: [{ type: Input }],
        min: [{ type: Input, args: ['nxMin',] }],
        max: [{ type: Input, args: ['nxMax',] }],
        step: [{ type: Input, args: ['nxStep',] }],
        label: [{ type: Input, args: ['nxLabel',] }],
        disabled: [{ type: Input }],
        inverted: [{ type: Input, args: ['nxInverted',] }],
        thumbLabel: [{ type: Input }],
        negative: [{ type: Input, args: ['negative',] }],
        valueChange: [{ type: Output, args: ['nxValueChange',] }],
        valueFormatter: [{ type: Input, args: ['nxValueFormatter',] }],
        labelMinFormatter: [{ type: Input, args: ['nxLabelMinFormatter',] }],
        labelMaxFormatter: [{ type: Input, args: ['nxLabelMaxFormatter',] }],
        value: [{ type: Input, args: ['nxValue',] }]
    };
    return NxSliderComponent;
}());
export { NxSliderComponent };
if (false) {
    /**
     * \@docs-private
     * @type {?}
     */
    NxSliderComponent.prototype.handleElement;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._id;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._tabIndex;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._min;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._max;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._label;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._disabled;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._inverted;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._thumbLabel;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._negative;
    /**
     * An event is dispatched on each value change.
     * @type {?}
     */
    NxSliderComponent.prototype.valueChange;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype.isActive;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype.dragSubscriptions;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype.frameId;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype.position;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._value;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._roundToDecimal;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._step;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._currentValue;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._onChange;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._onTouched;
    /**
     * Sets the customization function for the value which is displayed above the slider handle (Default:(value) => value). ).
     * @type {?}
     */
    NxSliderComponent.prototype.valueFormatter;
    /**
     * Sets the customization function for the label on the min-side of the slider (Default:(value) => value).
     * @type {?}
     */
    NxSliderComponent.prototype.labelMinFormatter;
    /**
     * Sets the customization function for the label on the max-side of the slider (Default:(value) => value).
     * @type {?}
     */
    NxSliderComponent.prototype.labelMaxFormatter;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._changeDetectorRef;
    /**
     * @type {?}
     * @private
     */
    NxSliderComponent.prototype._ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xpZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGxpYW56L25neC1uZGJ4L3NsaWRlci8iLCJzb3VyY2VzIjpbInNsaWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2hELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3BGLE9BQU8sRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN0RixPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixVQUFVLEVBQ1YsS0FBSyxFQUVMLE1BQU0sRUFDTixTQUFTLEVBQ1QsTUFBTSxFQUNQLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxTQUFTLEVBQWdCLE1BQU0sTUFBTSxDQUFDOzs7O0FBRS9DLHVCQUdDOzs7SUFGQyxxQkFBVTs7SUFDVixxQkFBVTs7O0FBR1osSUFBSyxTQUFTO0lBQ1osS0FBSyxHQUFBLEVBQUUsS0FBSyxHQUFBO0VBQ2I7Ozs7SUFFRyxNQUFNLEdBQUcsQ0FBQzs7SUFFUixXQUFXLEdBQUcsQ0FBQzs7SUFDZixXQUFXLEdBQUcsR0FBRzs7SUFDakIsWUFBWSxHQUFHLENBQUM7QUFFdEI7SUE4SkUsMkJBQW9CLFVBQXNCLEVBQVUsa0JBQXFDLEVBQ3JFLE9BQWU7UUFEZixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQVUsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQUNyRSxZQUFPLEdBQVAsT0FBTyxDQUFRO1FB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QkFXbEIsS0FBSzsyQkFXTCxLQUFLLFNBQUMsVUFBVTs4QkFVaEIsTUFBTSxTQUFDLGVBQWU7aUNBZXRCLEtBQUssU0FBQyxrQkFBa0I7b0NBRXhCLEtBQUssU0FBQyxxQkFBcUI7b0NBRTNCLEtBQUssU0FBQyxxQkFBcUI7d0JBTzNCLEtBQUssU0FBQyxTQUFTOztJQTBTbEIsd0JBQUM7Q0FBQSxBQTdjRCxJQTZjQztTQTViWSxpQkFBaUI7Ozs7OztJQUc1QiwwQ0FBaUU7Ozs7O0lBRWpFLGdDQUE4Qzs7Ozs7SUFhOUMsc0NBQThCOzs7OztJQVc5QixpQ0FBbUM7Ozs7O0lBV25DLGlDQUFtQzs7Ozs7SUFzQm5DLG1DQUF1Qjs7Ozs7SUFhdkIsc0NBQW1DOzs7OztJQVduQyxzQ0FBbUM7Ozs7O0lBV25DLHdDQUFvQzs7Ozs7SUFXcEMsc0NBQW1DOzs7OztJQVluQyx3Q0FBd0Y7Ozs7O0lBRXhGLHFDQUF5Qjs7Ozs7SUFDekIsOENBQStDOzs7OztJQUMvQyxvQ0FBd0I7Ozs7O0lBQ3hCLHFDQUFrQzs7Ozs7SUFDbEMsbUNBQTJCOzs7OztJQUMzQiw0Q0FBZ0M7Ozs7O0lBQ2hDLGtDQUFxQzs7Ozs7SUFDckMsMENBQWtDOzs7OztJQUVsQyxzQ0FBbUQ7Ozs7O0lBQ25ELHVDQUF5Qzs7Ozs7SUFHekMsMkNBQXVFOzs7OztJQUV2RSw4Q0FBNkU7Ozs7O0lBRTdFLDhDQUE2RTs7Ozs7SUFFakUsdUNBQThCOzs7OztJQUFFLCtDQUE2Qzs7Ozs7SUFDN0Usb0NBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xhbXAgfSBmcm9tICdAYWxsaWFuei9uZ3gtbmRieC91dGlscyc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHksIGNvZXJjZU51bWJlclByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IERPV05fQVJST1csIExFRlRfQVJST1csIFJJR0hUX0FSUk9XLCBVUF9BUlJPVyB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9rZXljb2Rlcyc7XG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBmb3J3YXJkUmVmLFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZCxcbiAgTmdab25lXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRGVjaW1hbCB9IGZyb20gJ2RlY2ltYWwuanMnO1xuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuaW50ZXJmYWNlIFBvc2l0aW9uIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG59XG5cbmVudW0gRXZlbnRUeXBlIHtcbiAgVE9VQ0gsIE1PVVNFXG59XG5cbmxldCBuZXh0SWQgPSAwO1xuXG5jb25zdCBERUZBVUxUX01JTiA9IDA7XG5jb25zdCBERUZBVUxUX01BWCA9IDEwMDtcbmNvbnN0IERFRkFVTFRfU1RFUCA9IDE7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ254LXNsaWRlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9zbGlkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc3R5bGVVcmxzOiBbICcuL3NsaWRlci5jb21wb25lbnQuc2NzcycgXSxcbiAgcHJvdmlkZXJzOiBbIHtcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOeFNsaWRlckNvbXBvbmVudCksXG4gICAgbXVsdGk6IHRydWVcbiAgfSBdLFxuICBob3N0OiB7XG4gICAgJ1thdHRyLmFyaWEtZGlzYWJsZWRdJzogJ2Rpc2FibGVkID8gdHJ1ZSA6IG51bGwnLFxuICAgICcoa2V5ZG93biknOiAnaGFuZGxlS2V5cHJlc3MoJGV2ZW50KScsXG4gICAgJ1tjbGFzcy5ueC1zbGlkZXItLWRpc2FibGVkXSc6ICdkaXNhYmxlZCcsXG4gICAgJ1tjbGFzcy5ueC1zbGlkZXItLW5lZ2F0aXZlXSc6ICduZWdhdGl2ZSdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBOeFNsaWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkRlc3Ryb3kge1xuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIEBWaWV3Q2hpbGQoJ2hhbmRsZScsIHsgc3RhdGljOiB0cnVlIH0pIGhhbmRsZUVsZW1lbnQ6IEVsZW1lbnRSZWY7XG5cbiAgcHJpdmF0ZSBfaWQ6IHN0cmluZyA9IGBueC1zbGlkZXItJHtuZXh0SWQrK31gO1xuICAvKiogU2V0cyB0aGUgaWQgb2YgdGhlIHNsaWRlci4gKi9cbiAgQElucHV0KCdpZCcpXG4gIHNldCBpZCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX2lkICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5faWQgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICBwcml2YXRlIF90YWJJbmRleDogbnVtYmVyID0gMDtcbiAgLyoqIFNldHMgdGhlIHRhYmluZGV4IG9mIHRoZSBzbGlkZXIuICovXG4gIEBJbnB1dCgpXG4gIHNldCB0YWJpbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fdGFiSW5kZXggPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHRhYmluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3RhYkluZGV4O1xuICB9XG5cbiAgcHJpdmF0ZSBfbWluOiBudW1iZXIgPSBERUZBVUxUX01JTjtcbiAgLyoqIFNldHMgdGhlIG1pbmltdW0gdmFsdWUgKERlZmF1bHQ6IDApLiAqL1xuICBASW5wdXQoJ254TWluJylcbiAgc2V0IG1pbih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbWluID0gY29lcmNlTnVtYmVyUHJvcGVydHkodmFsdWUpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBtaW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWluO1xuICB9XG5cbiAgcHJpdmF0ZSBfbWF4OiBudW1iZXIgPSBERUZBVUxUX01BWDtcbiAgLyoqIFNldHMgdGhlIG1heGltdW0gdmFsdWUgKERlZmF1bHQ6IDEwMCkuICovXG4gIEBJbnB1dCgnbnhNYXgnKVxuICBzZXQgbWF4KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9tYXggPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IG1heCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXg7XG4gIH1cblxuICAvKiogU2V0cyB0aGUgc3RlcCBzaXplIGJ5IHdoaWNoIHRoZSB2YWx1ZSBvZiB0aGUgc2xpZGVyIGNhbiBiZSBpbmNyZWFzZWQgb3IgZGVjcmVhc2VkIChEZWZhdWx0OiAxKS4gKi9cbiAgQElucHV0KCdueFN0ZXAnKVxuICBnZXQgc3RlcCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fc3RlcDsgfVxuICBzZXQgc3RlcCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fc3RlcCA9IGNvZXJjZU51bWJlclByb3BlcnR5KHZhbHVlLCB0aGlzLl9zdGVwKTtcblxuICAgIGlmICh0aGlzLl9zdGVwICUgMSAhPT0gMCkge1xuICAgICAgdGhpcy5fcm91bmRUb0RlY2ltYWwgPSB0aGlzLl9zdGVwLnRvU3RyaW5nKCkuc3BsaXQoJy4nKS5wb3AoKS5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbGFiZWw6IHN0cmluZztcbiAgLyoqIFNldHMgdGhlIGxhYmVsIHdoaWNoIGlzIGRpc3BsYXllZCBvbiB0b3Agb2YgdGhlIHNsaWRlci4gKi9cbiAgQElucHV0KCdueExhYmVsJylcbiAgc2V0IGxhYmVsKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fbGFiZWwgIT09IHZhbHVlKSB7XG4gICAgICB0aGlzLl9sYWJlbCA9IHZhbHVlO1xuICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG4gIGdldCBsYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbDtcbiAgfVxuXG4gIHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XG4gIC8qKiBXaGV0aGVyIHRoZSBpbnB1dCB0byB0aGUgY29udHJvbCBvZiB0aGUgc2xpZGVyIHNob3VsZCBiZSBkaXNhYmxlZC4gKi9cbiAgQElucHV0KClcbiAgc2V0IGRpc2FibGVkKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cblxuICBwcml2YXRlIF9pbnZlcnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAvKiogV2hldGhlciB0aGUgbWF4IHZhbHVlIGlzIHRvIHRoZSByaWdodCAoZmFsc2UpIG9yIGxlZnQgKHRydWUpLiovXG4gIEBJbnB1dCgnbnhJbnZlcnRlZCcpXG4gIHNldCBpbnZlcnRlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2ludmVydGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgaW52ZXJ0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2ludmVydGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBfdGh1bWJMYWJlbDogYm9vbGVhbiA9IHRydWU7XG4gIC8qKiBXaGV0aGVyIHRvIGRpc3BsYXkgdGhlIHRodW1iIGxhYmVsIG9uIHRvcCBvZiB0aGUgc2xpZGVyLiovXG4gIEBJbnB1dCgpXG4gIHNldCB0aHVtYkxhYmVsKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fdGh1bWJMYWJlbCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHRodW1iTGFiZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3RodW1iTGFiZWw7XG4gIH1cblxuICBwcml2YXRlIF9uZWdhdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICAvKiogV2hldGhlciB0aGUgbmVnYXRpdmUgc2V0IG9mIHN0eWxlcyBpcyBhcHBsaWVkIChEZWZhdWx0OiAnZmFsc2UnKS4qL1xuICBASW5wdXQoJ25lZ2F0aXZlJylcbiAgc2V0IG5lZ2F0aXZlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fbmVnYXRpdmUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBuZWdhdGl2ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbmVnYXRpdmU7XG4gIH1cblxuICAvKiogQW4gZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoIHZhbHVlIGNoYW5nZS4gKi9cbiAgQE91dHB1dCgnbnhWYWx1ZUNoYW5nZScpIHZhbHVlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuXG4gIHByaXZhdGUgaXNBY3RpdmUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBkcmFnU3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBmcmFtZUlkOiBudW1iZXI7XG4gIHByaXZhdGUgcG9zaXRpb246IFBvc2l0aW9uID0gbnVsbDtcbiAgcHJpdmF0ZSBfdmFsdWU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3JvdW5kVG9EZWNpbWFsOiBudW1iZXI7XG4gIHByaXZhdGUgX3N0ZXA6IG51bWJlciA9IERFRkFVTFRfU1RFUDtcbiAgcHJpdmF0ZSBfY3VycmVudFZhbHVlOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX29uQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICBwcml2YXRlIF9vblRvdWNoZWQ6ICgpID0+IGFueSA9ICgpID0+IHt9O1xuXG4gIC8qKiBTZXRzIHRoZSBjdXN0b21pemF0aW9uIGZ1bmN0aW9uIGZvciB0aGUgdmFsdWUgd2hpY2ggaXMgZGlzcGxheWVkIGFib3ZlIHRoZSBzbGlkZXIgaGFuZGxlIChEZWZhdWx0Oih2YWx1ZSkgPT4gdmFsdWUpLiApLiAqL1xuICBASW5wdXQoJ254VmFsdWVGb3JtYXR0ZXInKSB2YWx1ZUZvcm1hdHRlcjogRnVuY3Rpb24gPSAodmFsdWUpID0+IHZhbHVlO1xuICAvKiogU2V0cyB0aGUgY3VzdG9taXphdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGxhYmVsIG9uIHRoZSBtaW4tc2lkZSBvZiB0aGUgc2xpZGVyIChEZWZhdWx0Oih2YWx1ZSkgPT4gdmFsdWUpLiAqL1xuICBASW5wdXQoJ254TGFiZWxNaW5Gb3JtYXR0ZXInKSBsYWJlbE1pbkZvcm1hdHRlcjogRnVuY3Rpb24gPSAodmFsdWUpID0+IHZhbHVlO1xuICAvKiogU2V0cyB0aGUgY3VzdG9taXphdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGxhYmVsIG9uIHRoZSBtYXgtc2lkZSBvZiB0aGUgc2xpZGVyIChEZWZhdWx0Oih2YWx1ZSkgPT4gdmFsdWUpLiAqL1xuICBASW5wdXQoJ254TGFiZWxNYXhGb3JtYXR0ZXInKSBsYWJlbE1heEZvcm1hdHRlcjogRnVuY3Rpb24gPSAodmFsdWUpID0+IHZhbHVlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICAgICAgICBwcml2YXRlIF9uZ1pvbmU6IE5nWm9uZSkge1xuICB9XG5cbiAgLyoqIFNldHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHNsaWRlci4gKi9cbiAgQElucHV0KCdueFZhbHVlJylcbiAgc2V0IHZhbHVlKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLndyaXRlVmFsdWUoTnVtYmVyKHZhbHVlKSk7XG4gIH1cblxuICBnZXQgdmFsdWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICB3cml0ZVZhbHVlKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMuX3ZhbHVlKSB7XG4gICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46ICh2YWx1ZTogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fb25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIHNldERpc2FibGVkU3RhdGUoZGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBpc01pbmltdW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlID09PSB0aGlzLm1pbjtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlXG4gICAqIEEgdmFsaWQgc3RlcCBpcyBlaXRoZXI6XG4gICAqIC0gdGhlIG1pbmltdW0gYmVjYXVzZSB0aGF0cyBvdXIgYW5jaG9yIGZvciBhbGwgdmFsdWUgZXZhbHVhdGlvbiBhbmQgc3RlcHNcbiAgICogLSAoX3ZhbHVlIC0gbWluKSAlIHN0ZXAgPT09IDBcbiAgICovXG4gIGlzVmFsaWRTdGVwKCkge1xuICAgIGNvbnN0IHNhZmVWYWx1ZSA9IG5ldyBEZWNpbWFsKHRoaXMuX3ZhbHVlKS5taW51cyh0aGlzLm1pbik7XG4gICAgY29uc3QgbW9kdWxvID0gc2FmZVZhbHVlLm1vZCh0aGlzLnN0ZXApO1xuICAgIHJldHVybiB0aGlzLmlzTWluaW11bSgpIHx8IG1vZHVsby5jbXAoMCkgPT09IDA7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZVxuICAgKiBXZSBoYXZlIHRvIGxvb2sgYXQgdHdvIGNhc2VzOlxuICAgKiAtIGN1cnJlbnQgdmFsdWUgaXMgYSB2YWxpZCBtdWx0aXR1ZGUgb2YgdGhlIHN0ZXAgc2l6ZVxuICAgKiAgIHRoZW4gd2UgY2FuIHNhZmVseSBhZGQgb3Igc3VidHJhY3QgdGhlIHN0ZXBcbiAgICogLSB0aGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgbXVsdGl0dWRlLiB0aGlzIGNvdWxkIGJlIHRoZSBtYXggdmFsdWUgb3IgdGhlIHZhbHVlIGJvdW5kXG4gICAqICAgdmlhIG54VmFsdWVcbiAgICogICB0aGVuIHdlIGxvb2sgZm9yIHRoZSBuZXh0IGNsb3Nlc3QgdmFsdWUgdXB3YXJkcyBvciBkb3dud2FyZHNcbiAgICogICBkZWNpbWFsLmpzIHByb3ZpZGVzIGEgbmljZSB1dGlsaXR5IGZ1bmN0aW9uIGZvciB0aGlzLlxuICAgKi9cbiAgY2hhbmdlVmFsdWUodmFsdWVEaWZmOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgbmV3VmFsdWUgPSBuZXcgRGVjaW1hbCh0aGlzLl92YWx1ZSk7XG4gICAgaWYgKHRoaXMuaXNWYWxpZFN0ZXAoKSkge1xuICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZS5wbHVzKHZhbHVlRGlmZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN1YnRyYWN0IHRoZSBtaW5pbXVtIHRvIGZpbmQgdGhlIGNsb3Nlc3QgbXVsdGl0dWRlIHRoZW4gYWRkIHRoZSBtaW5pbXVtIGFnYWluIHRvIGdldCB0aGUgdmFsaWQgc2xpZGVyIHN0ZXBcbiAgICAgIGNvbnN0IG1pbkFkanVzdGVkVmFsdWUgPSBuZXcgRGVjaW1hbCh0aGlzLl92YWx1ZSkubWludXModGhpcy5taW4pO1xuICAgICAgbmV3VmFsdWUgPSB2YWx1ZURpZmYgPCAwID8gbWluQWRqdXN0ZWRWYWx1ZS50b05lYXJlc3QodGhpcy5zdGVwLCBEZWNpbWFsLlJPVU5EX0RPV04pXG4gICAgICAgICAgICAgICAgICA6IG1pbkFkanVzdGVkVmFsdWUudG9OZWFyZXN0KHRoaXMuc3RlcCwgRGVjaW1hbC5ST1VORF9VUCk7XG4gICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlLnBsdXModGhpcy5taW4pO1xuICAgIH1cbiAgICAvLyBjYXN0IHRoZSBEZWNpbWFsIG9iamVjdCB0byBhIEpTIG51bWJlciBiZWZvcmUgaXQgZ2V0cyByZXR1cm5lZFxuICAgIGxldCB0b051bWJlciA9IG5ld1ZhbHVlLnRvTnVtYmVyKCk7XG4gICAgdG9OdW1iZXIgPSBjbGFtcCh0b051bWJlciwgdGhpcy5taW4sIHRoaXMubWF4KTtcbiAgICBpZiAodGhpcy52YWx1ZSAhPT0gdG9OdW1iZXIpIHtcbiAgICAgIHRoaXMuX29uQ2hhbmdlKHRvTnVtYmVyKTtcbiAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0b051bWJlcik7XG4gICAgICB0aGlzLnZhbHVlID0gdG9OdW1iZXI7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZ2V0IHBlcmNlbnRhZ2VWYWx1ZSgpOiBudW1iZXIge1xuICAgIGxldCBwZXJjZW50YWdlVmFsdWUgPSAoKHRoaXMudmFsdWUgfHwgMCkgLSB0aGlzLm1pbikgLyAodGhpcy5tYXggLSB0aGlzLm1pbikgKiAxMDA7XG4gICAgaWYgKHRoaXMuaW52ZXJ0ZWQpIHtcbiAgICAgIHBlcmNlbnRhZ2VWYWx1ZSA9IDEwMCAtIHBlcmNlbnRhZ2VWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wKHBlcmNlbnRhZ2VWYWx1ZSwgMCwgMTAwKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHNsaWRlckNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9mb2N1c0hhbmRsZUVsZW1lbnQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uRnJvbUV2ZW50KGV2ZW50KTtcbiAgICB0aGlzLmZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy52YWx1ZUJ5UG9zaXRpb24oKTtcbiAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB0aGlzLl9jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgdGhpcy5fb25DaGFuZ2UodGhpcy52YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBmb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9mb2N1c0hhbmRsZUVsZW1lbnQoKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGJsdXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRvY3MtcHJpdmF0ZVxuICAgKiBQcmV2ZW50IHRleHQgc2VsZWN0aW9uIHdoZW4gZHJhZ2dpbmcgdGhlIGhhbmRsZS5cbiAgICovXG4gIHNlbGVjdFN0YXJ0KCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGhhbmRsZUtleXByZXNzKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQud2hpY2ggPCBMRUZUX0FSUk9XIHx8IGV2ZW50LndoaWNoID4gRE9XTl9BUlJPVykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHtcbiAgICAgIGNhc2UgdGhpcy5pbnZlcnRlZCA/IFJJR0hUX0FSUk9XIDogTEVGVF9BUlJPVyA6XG4gICAgICBjYXNlIERPV05fQVJST1c6XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZVZhbHVlKC10aGlzLnN0ZXApO1xuXG4gICAgICBjYXNlIFVQX0FSUk9XOlxuICAgICAgY2FzZSB0aGlzLmludmVydGVkID8gTEVGVF9BUlJPVyA6IFJJR0hUX0FSUk9XIDpcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlVmFsdWUodGhpcy5zdGVwKTtcbiAgICB9XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZVxuICAgKiB0aGlzIGlzIGNhbGxlZCBvbiBtb3VzZWRvd24gb3IgdG91Y2hzdGFydFxuICAgKi9cbiAgZHJhZ1N0YXJ0KGV2ZW50OiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgY29uc3QgaXNUb3VjaEV2ZW50ID0gdGhpcy5kZXRlY3RFdmVudFR5cGUoZXZlbnQpID09PSBFdmVudFR5cGUuVE9VQ0g7XG4gICAgdGhpcy5fY3VycmVudFZhbHVlID0gdGhpcy52YWx1ZTtcblxuICAgIGlmIChpc1RvdWNoRXZlbnQpIHtcbiAgICAgIHRoaXMuX25nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHRoaXMuZHJhZ1N1YnNjcmlwdGlvbnMucHVzaChmcm9tRXZlbnQoZG9jdW1lbnQsICd0b3VjaG1vdmUnKS5zdWJzY3JpYmUodGhpcy5oYW5kbGVEcmFnTW92ZS5iaW5kKHRoaXMpKSk7XG4gICAgICAgIHRoaXMuZHJhZ1N1YnNjcmlwdGlvbnMucHVzaChmcm9tRXZlbnQoZG9jdW1lbnQsICd0b3VjaGVuZCcpLnN1YnNjcmliZSh0aGlzLmhhbmRsZURyYWdTdG9wLmJpbmQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fbmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgIHRoaXMuZHJhZ1N1YnNjcmlwdGlvbnMucHVzaChmcm9tRXZlbnQoZG9jdW1lbnQsICd0b3VjaGNhbmNlbCcpLnN1YnNjcmliZSh0aGlzLmhhbmRsZURyYWdTdG9wLmJpbmQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmRyYWdTdWJzY3JpcHRpb25zLnB1c2goZnJvbUV2ZW50KGRvY3VtZW50LCAnbW91c2Vtb3ZlJykuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRHJhZ01vdmUuYmluZCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5kcmFnU3Vic2NyaXB0aW9ucy5wdXNoKGZyb21FdmVudChkb2N1bWVudCwgJ21vdXNldXAnKS5zdWJzY3JpYmUodGhpcy5oYW5kbGVEcmFnU3RvcC5iaW5kKHRoaXMpKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbkZyb21FdmVudChldmVudCk7XG5cbiAgICB0aGlzLnJ1bkNoYW5nZU9ic2VydmVyKCk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBmb3JtYXRWYWx1ZSh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlcih2YWx1ZSk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBmb3JtYXRMYWJlbExlZnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5pbnZlcnRlZCA/IHRoaXMuZm9ybWF0TGFiZWxNYXgoKSA6IHRoaXMuZm9ybWF0TGFiZWxNaW4oKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGZvcm1hdExhYmVsUmlnaHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5pbnZlcnRlZCA/IHRoaXMuZm9ybWF0TGFiZWxNaW4oKSA6IHRoaXMuZm9ybWF0TGFiZWxNYXgoKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHZhbHVlQnlQb3NpdGlvbigpOiB2b2lkIHtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgeCA9IE1hdGgubWF4KHJlY3QubGVmdCwgTWF0aC5taW4ocmVjdC5yaWdodCwgdGhpcy5wb3NpdGlvbi54KSk7XG5cbiAgICAvLyBwb3NpdGlvbiBvZiBzbGlkZXIgcmVsYXRpdmUgdG8gc2xpZGVyIHdpZHRoXG4gICAgbGV0IHBlcmNlbnQgPSAoeCAtIHJlY3QubGVmdCkgLyByZWN0LndpZHRoO1xuICAgIGlmICh0aGlzLmludmVydGVkKSB7XG4gICAgICBwZXJjZW50ID0gMSAtIHBlcmNlbnQ7XG4gICAgfVxuICAgIGNvbnN0IGV4YWN0VmFsdWUgPSB0aGlzLm1pbiArIHBlcmNlbnQgKiAodGhpcy5tYXggLSB0aGlzLm1pbik7XG4gICAgLyoqXG4gICAgICogZWRnZSBjYXNlIGhhbmRsaW5nIGJlY2F1c2Ugb2YgZmxvYXQgcHJlY2lzaW9uIGVycm9yc1xuICAgICAqIHlvdSBjb3VsZG4ndCByZWFjaCB0aGUgbWF4aW11bVxuICAgICAqL1xuICAgIGxldCBjbG9zZXN0VmFsdWU7XG4gICAgaWYgKHBlcmNlbnQgPT09IDEpIHtcbiAgICAgIGNsb3Nlc3RWYWx1ZSA9IHRoaXMubWF4O1xuICAgIH0gZWxzZSBpZiAocGVyY2VudCA9PT0gMCkge1xuICAgICAgY2xvc2VzdFZhbHVlID0gdGhpcy5taW47XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsb3Nlc3RWYWx1ZSA9IE1hdGgucm91bmQoKGV4YWN0VmFsdWUgLSB0aGlzLm1pbikgLyB0aGlzLnN0ZXApICogdGhpcy5zdGVwICsgdGhpcy5taW47XG4gICAgfVxuICAgIGlmICh0aGlzLl9yb3VuZFRvRGVjaW1hbCkge1xuICAgICAgY2xvc2VzdFZhbHVlID0gdGhpcy5yb3VuZFRvRGVjaW1hbChjbG9zZXN0VmFsdWUpO1xuICAgIH1cblxuICAgIGNsb3Nlc3RWYWx1ZSA9IGNsYW1wKGNsb3Nlc3RWYWx1ZSwgdGhpcy5taW4sIHRoaXMubWF4KTtcblxuICAgIHRoaXMudmFsdWUgPSBjbG9zZXN0VmFsdWU7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICByb3VuZFRvRGVjaW1hbCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUudG9GaXhlZCh0aGlzLl9yb3VuZFRvRGVjaW1hbCkpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZm9ybWF0TGFiZWxNaW4oKSB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxNaW5Gb3JtYXR0ZXIodGhpcy5taW4pO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZm9ybWF0TGFiZWxNYXgoKSB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxNYXhGb3JtYXR0ZXIodGhpcy5tYXgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVEcmFnTW92ZShldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbkZyb21FdmVudChldmVudCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZURyYWdTdG9wKGV2ZW50OiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLnZhbHVlQnlQb3NpdGlvbigpO1xuICAgIGlmICh0aGlzLnZhbHVlICE9PSB0aGlzLl9jdXJyZW50VmFsdWUpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLl9vbkNoYW5nZSh0aGlzLnZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJ1bkNoYW5nZU9ic2VydmVyKCk6IHZvaWQge1xuICAgIHRoaXMuZnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB0aGlzLnZhbHVlQnlQb3NpdGlvbigpO1xuXG4gICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLnJ1bkNoYW5nZU9ic2VydmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcblxuICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHRoaXMuZHJhZ1N1YnNjcmlwdGlvbnMpIHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZHJhZ1N1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lSWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXRlY3RFdmVudFR5cGUoZXZlbnQpOiBFdmVudFR5cGUge1xuICAgIHJldHVybiBldmVudC50eXBlLmluY2x1ZGVzKCd0b3VjaCcpID8gRXZlbnRUeXBlLlRPVUNIIDogRXZlbnRUeXBlLk1PVVNFO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRQb3NpdGlvbkZyb21FdmVudChldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiBQb3NpdGlvbiB7XG4gICAgY29uc3QgZXZlbnRUeXBlID0gdGhpcy5kZXRlY3RFdmVudFR5cGUoZXZlbnQpO1xuICAgIGNvbnN0IGN1cnNvcjogYW55ID0gZXZlbnRUeXBlID09PSBFdmVudFR5cGUuVE9VQ0ggPyAoZXZlbnQgYXMgVG91Y2hFdmVudCkudG91Y2hlcy5pdGVtKDApIDogZXZlbnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGN1cnNvci5jbGllbnRYLFxuICAgICAgeTogY3Vyc29yLmNsaWVudFlcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgX2ZvY3VzSGFuZGxlRWxlbWVudCgpIHtcbiAgICB0aGlzLmhhbmRsZUVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICB9XG59XG4iXX0=
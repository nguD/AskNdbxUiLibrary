/**
 * @fileoverview added by tsickle
 * Generated from: taglist/taglist.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';
import { Component, EventEmitter, forwardRef, Input, Output, ChangeDetectionStrategy, ChangeDetectorRef, ViewChildren, ElementRef, QueryList } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { NxTagComponent } from './tag.component';
var NxTaglistComponent = /** @class */ (function () {
    function NxTaglistComponent(_changeDetectorRef) {
        this._changeDetectorRef = _changeDetectorRef;
        /**
         * An event is dispatched each time when the list of tags changed.
         */
        this.tagsChange = new EventEmitter();
        /**
         * An event is dispatched each time when a tag is clicked.
         */
        this.tagClickEvent = new EventEmitter();
        this._tags = [];
        this._tabindex = -1;
        this._allowTagDeletion = true;
        this._isKeywordList = false;
        this._labelProperty = 'nxTaglistLabel';
        this._valueFormatterFn = (/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return value; });
        this._onChange = (/**
         * @return {?}
         */
        function () { });
        this._onTouched = (/**
         * @return {?}
         */
        function () { });
    }
    Object.defineProperty(NxTaglistComponent.prototype, "tags", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tags;
        },
        /** Sets the list of tags. */
        set: /**
         * Sets the list of tags.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tags = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "tabindex", {
        get: /**
         * @return {?}
         */
        function () {
            return this.allowTagDeletion ? 0 : this._tabindex;
        },
        /** Sets the tabindex of the contained tags. Default value: -1. */
        set: /**
         * Sets the tabindex of the contained tags. Default value: -1.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabindex = coerceNumberProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "allowTagDeletion", {
        get: /**
         * @return {?}
         */
        function () {
            return this._allowTagDeletion;
        },
        /** Whether the tags can be removed from the list. Default: true. */
        set: /**
         * Whether the tags can be removed from the list. Default: true.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._allowTagDeletion = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "isKeywordList", {
        get: /**
         * @return {?}
         */
        function () {
            return this._isKeywordList;
        },
        /** Whether the tags can be styled as keywords. */
        set: /**
         * Whether the tags can be styled as keywords.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._isKeywordList = coerceBooleanProperty(value);
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "labelProp", {
        get: /**
         * @return {?}
         */
        function () {
            return this._labelProperty;
        },
        /** Sets the label property, in case tags represent objects. */
        set: /**
         * Sets the label property, in case tags represent objects.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._labelProperty !== value) {
                this._labelProperty = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "labelledby", {
        get: /**
         * @return {?}
         */
        function () {
            return this._ariaLabelledBy;
        },
        /** Sets the label property to improve accessibility. */
        set: /**
         * Sets the label property to improve accessibility.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._ariaLabelledBy !== value) {
                this._ariaLabelledBy = value;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxTaglistComponent.prototype, "valueFormatter", {
        get: /**
         * @return {?}
         */
        function () {
            return this._valueFormatterFn;
        },
        /** Sets the customization function for tag value.  */
        set: /**
         * Sets the customization function for tag value.
         * @param {?} fn
         * @return {?}
         */
        function (fn) {
            this._valueFormatterFn = fn;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    /** Allows to delete a tag given index. Takes index of the tag to be deleted as a parameter */
    /**
     * Allows to delete a tag given index. Takes index of the tag to be deleted as a parameter
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    NxTaglistComponent.prototype.delete = /**
     * Allows to delete a tag given index. Takes index of the tag to be deleted as a parameter
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    function (index, value) {
        if (this.allowTagDeletion) {
            this.tags = tslib_1.__spread(this.tags.slice(0, index), this.tags.slice(index + 1));
            // focus next element after deletion
            if (this.tagChildren.toArray()[index + 1]) {
                this.tagChildren.toArray()[index + 1].nativeElement.focus();
            }
            this._onChange(this.tags);
            this.tagsChange.emit(this.tags);
        }
    };
    /** Allows to add a tag. Takes tag object as an input */
    /**
     * Allows to add a tag. Takes tag object as an input
     * @param {?} tag
     * @return {?}
     */
    NxTaglistComponent.prototype.addTag = /**
     * Allows to add a tag. Takes tag object as an input
     * @param {?} tag
     * @return {?}
     */
    function (tag) {
        var _this = this;
        if (!tag) {
            return;
        }
        // make sure tag is either string or has the configured label prop and is not yet in the list
        if ((typeof tag === 'string' && this.tags.indexOf(tag) === -1) ||
            (tag[this.labelProp] && this.tags.filter((/**
             * @param {?} t
             * @return {?}
             */
            function (t) { return t[_this.labelProp] === tag[_this.labelProp]; })).length < 1)) {
            this.tags = tslib_1.__spread(this.tags, [tag]);
            this._onChange(this.tags);
            this.tagsChange.emit(this.tags);
        }
    };
    /** Allows to clear the tag list. */
    /**
     * Allows to clear the tag list.
     * @return {?}
     */
    NxTaglistComponent.prototype.clearTags = /**
     * Allows to clear the tag list.
     * @return {?}
     */
    function () {
        this.tags = [];
        this._onChange(this.tags);
        this.tagsChange.emit(this.tags);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} tags
     * @return {?}
     */
    NxTaglistComponent.prototype.writeValue = /**
     * \@docs-private
     * @param {?} tags
     * @return {?}
     */
    function (tags) {
        this.tags = tags;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxTaglistComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxTaglistComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this._onTouched = fn;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} tag
     * @return {?}
     */
    NxTaglistComponent.prototype.renderTag = /**
     * \@docs-private
     * @param {?} tag
     * @return {?}
     */
    function (tag) {
        /** @type {?} */
        var tagStr = typeof tag === 'string' ? tag : tag[this.labelProp];
        return this.valueFormatter(tagStr);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    NxTaglistComponent.prototype.tagClick = /**
     * \@docs-private
     * @param {?} index
     * @param {?} value
     * @return {?}
     */
    function (index, value) {
        this.tagClickEvent.emit(this.tags[index]);
    };
    NxTaglistComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-taglist',
                    template: "  <ul class=\"nx-taglist\" *ngIf=\"tags.length > 0\">\n    <li class=\"nx-taglist__list-item\" tabindex=\"-1\" *ngFor=\"let tag of tags; let i = index\">\n      <nx-tag [value]=\"renderTag(tag)\" [removable]=\"allowTagDeletion\" [tabindex]=\"tabindex\" (clicked)=\"tagClick(i, $event)\" (removed)=\"delete(i, $event)\"></nx-tag>\n  </li>\n  </ul>\n  <ng-content *ngIf=\"tags.length < 1\"></ng-content>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NxTaglistComponent; })),
                            multi: true
                        }
                    ],
                    host: {
                        '[class.nx-taglist--keyword]': 'isKeywordList',
                        '[attr.aria-labelledby]': 'labelledby || null',
                        '[attr.tabindex]': '-1'
                    },
                    styles: [":host{position:relative;min-height:32px;margin-bottom:32px;display:flex;justify-content:space-between}:host:focus{outline:0}.nx-taglist{display:flex;flex-wrap:wrap}.nx-taglist__list-item{list-style:none;margin-right:12px;margin-bottom:12px;flex-wrap:wrap;display:flex}@media (max-width:703px){.nx-taglist--keyword{justify-content:center}}"]
                }] }
    ];
    /** @nocollapse */
    NxTaglistComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    NxTaglistComponent.propDecorators = {
        tagsChange: [{ type: Output, args: ['nxTagsChange',] }],
        tagClickEvent: [{ type: Output, args: ['nxTagClick',] }],
        tagChildren: [{ type: ViewChildren, args: [NxTagComponent, { read: ElementRef },] }],
        tags: [{ type: Input, args: ['nxTags',] }],
        tabindex: [{ type: Input }],
        allowTagDeletion: [{ type: Input, args: ['nxAllowTagDeletion',] }],
        isKeywordList: [{ type: Input, args: ['nxIsKeywordList',] }],
        labelProp: [{ type: Input, args: ['nxLabelProperty',] }],
        labelledby: [{ type: Input, args: ['aria-labelledby',] }],
        valueFormatter: [{ type: Input, args: ['nxValueFormatter',] }]
    };
    return NxTaglistComponent;
}());
export { NxTaglistComponent };
if (false) {
    /**
     * An event is dispatched each time when the list of tags changed.
     * @type {?}
     */
    NxTaglistComponent.prototype.tagsChange;
    /**
     * An event is dispatched each time when a tag is clicked.
     * @type {?}
     */
    NxTaglistComponent.prototype.tagClickEvent;
    /**
     * \@docs-private
     * @type {?}
     */
    NxTaglistComponent.prototype.tagChildren;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._tags;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._tabindex;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._allowTagDeletion;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._isKeywordList;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._labelProperty;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._ariaLabelledBy;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._valueFormatterFn;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._onChange;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._onTouched;
    /**
     * @type {?}
     * @private
     */
    NxTaglistComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFnbGlzdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuei9uZ3gtbmRieC8iLCJzb3VyY2VzIjpbInRhZ2xpc3QvdGFnbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUFFLHFCQUFxQixFQUFFLG9CQUFvQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEYsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsdUJBQXVCLEVBQ2xGLGlCQUFpQixFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFvQixNQUFNLGVBQWUsQ0FBQztBQUNsRyxPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRWpEO0lBa0hFLDRCQUFvQixrQkFBcUM7UUFBckMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjs7OztRQTVGakMsZUFBVSxHQUF3QixJQUFJLFlBQVksRUFBUyxDQUFDOzs7O1FBRzlELGtCQUFhLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFLekUsVUFBSyxHQUFlLEVBQUUsQ0FBQztRQVd2QixjQUFTLEdBQVcsQ0FBQyxDQUFDLENBQUM7UUFXdkIsc0JBQWlCLEdBQVksSUFBSSxDQUFDO1FBV2xDLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBV2hDLG1CQUFjLEdBQVcsZ0JBQWdCLENBQUM7UUEwQjFDLHNCQUFpQjs7OztRQUEyQixVQUFDLEtBQUssSUFBSyxPQUFBLEtBQUssRUFBTCxDQUFLLEVBQUM7UUFXN0QsY0FBUzs7O1FBQXlCLGNBQU8sQ0FBQyxFQUFDO1FBQzNDLGVBQVU7OztRQUFjLGNBQU8sQ0FBQyxFQUFDO0lBRW9CLENBQUM7SUFsRjlELHNCQUNJLG9DQUFJOzs7O1FBSVI7WUFDRSxPQUFPLElBQUks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b0JBRS9DLFNBQVMsRUFBRTt3QkFDVDs0QkFDRSxPQUFPLEVBQUUsaUJBQWlCOzRCQUMxQixXQUFXLEVBQUUsVUFBVTs7OzRCQUFDLGNBQU0sT0FBQSxrQkFBa0IsRUFBbEIsQ0FBa0IsRUFBQzs0QkFDakQsS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7b0JBQ0QsSUFBSSxFQUFFO3dCQUNKLDZCQUE2QixFQUFFLGVBQWU7d0JBQzlDLHdCQUF3QixFQUFFLG9CQUFvQjt3QkFDOUMsaUJBQWlCLEVBQUUsSUFBSTtxQkFDeEI7O2lCQUNGOzs7O2dCQXJCQyxpQkFBaUI7Ozs2QkEwQmhCLE1BQU0sU0FBQyxjQUFjO2dDQUdyQixNQUFNLFNBQUMsWUFBWTs4QkFHbkIsWUFBWSxTQUFDLGNBQWMsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUM7dUJBSS9DLEtBQUssU0FBQyxRQUFROzJCQVdkLEtBQUs7bUNBV0wsS0FBSyxTQUFDLG9CQUFvQjtnQ0FXMUIsS0FBSyxTQUFDLGlCQUFpQjs0QkFXdkIsS0FBSyxTQUFDLGlCQUFpQjs2QkFhdkIsS0FBSyxTQUFDLGlCQUFpQjtpQ0FhdkIsS0FBSyxTQUFDLGtCQUFrQjs7SUFnRjNCLHlCQUFDO0NBQUEsQUF0TEQsSUFzTEM7U0FuS1ksa0JBQWtCOzs7Ozs7SUFHN0Isd0NBQW9GOzs7OztJQUdwRiwyQ0FBaUY7Ozs7O0lBR2pGLHlDQUFxRjs7Ozs7SUFFckYsbUNBQStCOzs7OztJQVcvQix1Q0FBK0I7Ozs7O0lBVy9CLCtDQUEwQzs7Ozs7SUFXMUMsNENBQXdDOzs7OztJQVd4Qyw0Q0FBa0Q7Ozs7O0lBYWxELDZDQUFnQzs7Ozs7SUFhaEMsK0NBQXFFOzs7OztJQVdyRSx1Q0FBbUQ7Ozs7O0lBQ25ELHdDQUF5Qzs7Ozs7SUFFN0IsZ0RBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5LCBjb2VyY2VOdW1iZXJQcm9wZXJ0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgZm9yd2FyZFJlZiwgSW5wdXQsIE91dHB1dCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLCBWaWV3Q2hpbGRyZW4sIEVsZW1lbnRSZWYsIFF1ZXJ5TGlzdCwgQWZ0ZXJDb250ZW50SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTnhUYWdDb21wb25lbnQgfSBmcm9tICcuL3RhZy5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdueC10YWdsaXN0JyxcbiAgdGVtcGxhdGVVcmw6ICd0YWdsaXN0LmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0eWxlVXJsczogWyAnLi90YWdsaXN0LmNvbXBvbmVudC5zY3NzJyBdLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE54VGFnbGlzdENvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MubngtdGFnbGlzdC0ta2V5d29yZF0nOiAnaXNLZXl3b3JkTGlzdCcsXG4gICAgJ1thdHRyLmFyaWEtbGFiZWxsZWRieV0nOiAnbGFiZWxsZWRieSB8fCBudWxsJyxcbiAgICAnW2F0dHIudGFiaW5kZXhdJzogJy0xJ1xuICB9XG59KVxuXG5leHBvcnQgY2xhc3MgTnhUYWdsaXN0Q29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuXG4gIC8qKiBBbiBldmVudCBpcyBkaXNwYXRjaGVkIGVhY2ggdGltZSB3aGVuIHRoZSBsaXN0IG9mIHRhZ3MgY2hhbmdlZC4gKi9cbiAgQE91dHB1dCgnbnhUYWdzQ2hhbmdlJykgdGFnc0NoYW5nZTogRXZlbnRFbWl0dGVyPGFueVtdPiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55W10+KCk7XG5cbiAgLyoqIEFuIGV2ZW50IGlzIGRpc3BhdGNoZWQgZWFjaCB0aW1lIHdoZW4gYSB0YWcgaXMgY2xpY2tlZC4gKi9cbiAgQE91dHB1dCgnbnhUYWdDbGljaycpIHRhZ0NsaWNrRXZlbnQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgQFZpZXdDaGlsZHJlbihOeFRhZ0NvbXBvbmVudCwge3JlYWQ6IEVsZW1lbnRSZWZ9KSB0YWdDaGlsZHJlbjogUXVlcnlMaXN0PEVsZW1lbnRSZWY+O1xuXG4gIHByaXZhdGUgX3RhZ3M6IEFycmF5PGFueT4gPSBbXTtcbiAgLyoqIFNldHMgdGhlIGxpc3Qgb2YgdGFncy4gKi9cbiAgQElucHV0KCdueFRhZ3MnKVxuICBzZXQgdGFncyh2YWx1ZTogQXJyYXk8YW55Pikge1xuICAgIHRoaXMuX3RhZ3MgPSB2YWx1ZTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgdGFncygpOiBBcnJheTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5fdGFncztcbiAgfVxuXG4gIHByaXZhdGUgX3RhYmluZGV4OiBudW1iZXIgPSAtMTtcbiAgLyoqIFNldHMgdGhlIHRhYmluZGV4IG9mIHRoZSBjb250YWluZWQgdGFncy4gRGVmYXVsdCB2YWx1ZTogLTEuICovXG4gIEBJbnB1dCgpXG4gIHNldCB0YWJpbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fdGFiaW5kZXggPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHRhYmluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYWxsb3dUYWdEZWxldGlvbiA/IDAgOiB0aGlzLl90YWJpbmRleDtcbiAgfVxuXG4gIHByaXZhdGUgX2FsbG93VGFnRGVsZXRpb246IGJvb2xlYW4gPSB0cnVlO1xuICAvKiogV2hldGhlciB0aGUgdGFncyBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0LiBEZWZhdWx0OiB0cnVlLiAqL1xuICBASW5wdXQoJ254QWxsb3dUYWdEZWxldGlvbicpXG4gIHNldCBhbGxvd1RhZ0RlbGV0aW9uKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fYWxsb3dUYWdEZWxldGlvbiA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IGFsbG93VGFnRGVsZXRpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2FsbG93VGFnRGVsZXRpb247XG4gIH1cblxuICBwcml2YXRlIF9pc0tleXdvcmRMaXN0OiBib29sZWFuID0gZmFsc2U7XG4gIC8qKiBXaGV0aGVyIHRoZSB0YWdzIGNhbiBiZSBzdHlsZWQgYXMga2V5d29yZHMuICovXG4gIEBJbnB1dCgnbnhJc0tleXdvcmRMaXN0JylcbiAgc2V0IGlzS2V5d29yZExpc3QodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9pc0tleXdvcmRMaXN0ID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgaXNLZXl3b3JkTGlzdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNLZXl3b3JkTGlzdDtcbiAgfVxuXG4gIHByaXZhdGUgX2xhYmVsUHJvcGVydHk6IHN0cmluZyA9ICdueFRhZ2xpc3RMYWJlbCc7XG4gICAgLyoqIFNldHMgdGhlIGxhYmVsIHByb3BlcnR5LCBpbiBjYXNlIHRhZ3MgcmVwcmVzZW50IG9iamVjdHMuICovXG4gIEBJbnB1dCgnbnhMYWJlbFByb3BlcnR5JylcbiAgc2V0IGxhYmVsUHJvcCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX2xhYmVsUHJvcGVydHkgIT09IHZhbHVlKSB7XG4gICAgICB0aGlzLl9sYWJlbFByb3BlcnR5ID0gdmFsdWU7XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGxhYmVsUHJvcCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbFByb3BlcnR5O1xuICB9XG5cbiAgcHJpdmF0ZSBfYXJpYUxhYmVsbGVkQnk6IHN0cmluZztcbiAgLyoqIFNldHMgdGhlIGxhYmVsIHByb3BlcnR5IHRvIGltcHJvdmUgYWNjZXNzaWJpbGl0eS4gKi9cbiAgQElucHV0KCdhcmlhLWxhYmVsbGVkYnknKVxuICBzZXQgbGFiZWxsZWRieSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX2FyaWFMYWJlbGxlZEJ5ICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fYXJpYUxhYmVsbGVkQnkgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgbGFiZWxsZWRieSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hcmlhTGFiZWxsZWRCeTtcbiAgfVxuXG4gIHByaXZhdGUgX3ZhbHVlRm9ybWF0dGVyRm46ICh2YWx1ZTogYW55KSA9PiBzdHJpbmcgPSAodmFsdWUpID0+IHZhbHVlO1xuICAvKiogU2V0cyB0aGUgY3VzdG9taXphdGlvbiBmdW5jdGlvbiBmb3IgdGFnIHZhbHVlLiAgKi9cbiAgQElucHV0KCdueFZhbHVlRm9ybWF0dGVyJylcbiAgc2V0IHZhbHVlRm9ybWF0dGVyKGZuOiAodmFsdWU6IGFueSkgPT4gc3RyaW5nKSB7XG4gICAgdGhpcy5fdmFsdWVGb3JtYXR0ZXJGbiA9IGZuO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCB2YWx1ZUZvcm1hdHRlcigpOiAodmFsdWU6IGFueSkgPT4gc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVGb3JtYXR0ZXJGbjtcbiAgfVxuXG4gIHByaXZhdGUgX29uQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICBwcml2YXRlIF9vblRvdWNoZWQ6ICgpID0+IGFueSA9ICgpID0+IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikgeyB9XG5cbiAgLyoqIEFsbG93cyB0byBkZWxldGUgYSB0YWcgZ2l2ZW4gaW5kZXguIFRha2VzIGluZGV4IG9mIHRoZSB0YWcgdG8gYmUgZGVsZXRlZCBhcyBhIHBhcmFtZXRlciAqL1xuICBkZWxldGUoaW5kZXg6IG51bWJlciwgdmFsdWU6IGFueSkge1xuXG4gICAgaWYgKHRoaXMuYWxsb3dUYWdEZWxldGlvbikge1xuICAgICAgdGhpcy50YWdzID0gW1xuICAgICAgICAuLi50aGlzLnRhZ3Muc2xpY2UoMCwgaW5kZXgpLFxuICAgICAgICAuLi50aGlzLnRhZ3Muc2xpY2UoaW5kZXggKyAxKVxuICAgICAgXTtcblxuICAgICAgLy8gZm9jdXMgbmV4dCBlbGVtZW50IGFmdGVyIGRlbGV0aW9uXG4gICAgICBpZiAodGhpcy50YWdDaGlsZHJlbi50b0FycmF5KClbaW5kZXggKyAxXSkge1xuICAgICAgICB0aGlzLnRhZ0NoaWxkcmVuLnRvQXJyYXkoKVtpbmRleCArIDFdLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fb25DaGFuZ2UodGhpcy50YWdzKTtcblxuICAgICAgdGhpcy50YWdzQ2hhbmdlLmVtaXQodGhpcy50YWdzKTtcbiAgICB9XG4gIH1cblxuICAvKiogQWxsb3dzIHRvIGFkZCBhIHRhZy4gVGFrZXMgdGFnIG9iamVjdCBhcyBhbiBpbnB1dCAqL1xuICBhZGRUYWcodGFnOiBhbnkpIHtcbiAgICBpZiAoIXRhZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG1ha2Ugc3VyZSB0YWcgaXMgZWl0aGVyIHN0cmluZyBvciBoYXMgdGhlIGNvbmZpZ3VyZWQgbGFiZWwgcHJvcCBhbmQgaXMgbm90IHlldCBpbiB0aGUgbGlzdFxuICAgIGlmICgodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycgJiYgdGhpcy50YWdzLmluZGV4T2YodGFnKSA9PT0gLTEpIHx8XG4gICAgICAodGFnWyB0aGlzLmxhYmVsUHJvcCBdICYmIHRoaXMudGFncy5maWx0ZXIoKHQpID0+IHRbIHRoaXMubGFiZWxQcm9wIF0gPT09IHRhZ1sgdGhpcy5sYWJlbFByb3AgXSkubGVuZ3RoIDwgMSkpIHtcblxuICAgICAgdGhpcy50YWdzID0gWyAuLi50aGlzLnRhZ3MsIHRhZyBdO1xuICAgICAgdGhpcy5fb25DaGFuZ2UodGhpcy50YWdzKTtcbiAgICAgIHRoaXMudGFnc0NoYW5nZS5lbWl0KHRoaXMudGFncyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEFsbG93cyB0byBjbGVhciB0aGUgdGFnIGxpc3QuICovXG4gIGNsZWFyVGFncygpIHtcbiAgICB0aGlzLnRhZ3MgPSBbXTtcbiAgICB0aGlzLl9vbkNoYW5nZSh0aGlzLnRhZ3MpO1xuICAgIHRoaXMudGFnc0NoYW5nZS5lbWl0KHRoaXMudGFncyk7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICB3cml0ZVZhbHVlKHRhZ3M6IGFueSk6IHZvaWQge1xuICAgIHRoaXMudGFncyA9IHRhZ3M7XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMuX29uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgcmVuZGVyVGFnKHRhZzogYW55KSB7XG4gICAgY29uc3QgdGFnU3RyOiBzdHJpbmcgPSB0eXBlb2YgdGFnID09PSAnc3RyaW5nJyA/IHRhZyA6IHRhZ1sgdGhpcy5sYWJlbFByb3AgXTtcbiAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlcih0YWdTdHIpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgdGFnQ2xpY2soaW5kZXgsIHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLnRhZ0NsaWNrRXZlbnQuZW1pdCh0aGlzLnRhZ3NbaW5kZXhdKTtcbiAgfVxufVxuIl19
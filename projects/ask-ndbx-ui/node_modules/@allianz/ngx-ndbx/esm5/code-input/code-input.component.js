/**
 * @fileoverview added by tsickle
 * Generated from: code-input.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, Component, Input, ChangeDetectorRef, ElementRef, Self, Optional } from '@angular/core';
import { NgControl, NgForm, FormGroupDirective } from '@angular/forms';
import { NxCodeInputIntl } from './code-input-intl';
import { ErrorStateMatcher } from '@allianz/ngx-ndbx/utils';
import { BACKSPACE, LEFT_ARROW, RIGHT_ARROW, SPACE, DOWN_ARROW, UP_ARROW } from '@angular/cdk/keycodes';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
/** @type {?} */
var DEFAULT_INPUT_LENGTH = 6;
/** @type {?} */
var TAG_NAME_INPUT = 'INPUT';
/** @type {?} */
var AUTO_UPPERCASE = 'upper';
/** @type {?} */
var AUTO_LOWERCASE = 'lower';
/** @type {?} */
var INPUT_FIELD_GAP = 'nx-code-input--field-with-gap';
var NxCodeInputComponent = /** @class */ (function () {
    function NxCodeInputComponent(_changeDetectorRef, _el, _control, _intl, _errorStateMatcher, _parentForm, _parentFormGroup) {
        this._changeDetectorRef = _changeDetectorRef;
        this._el = _el;
        this._control = _control;
        this._intl = _intl;
        this._errorStateMatcher = _errorStateMatcher;
        this._parentForm = _parentForm;
        this._parentFormGroup = _parentFormGroup;
        /**
         * Whether the current input of the component has an error.
         */
        this.errorState = false;
        this._codeLength = DEFAULT_INPUT_LENGTH;
        this._type = 'text';
        this._isUpDown = false;
        this._tabindex = 0;
        /**
         * The user input in array form
         */
        this._keyCode = new Array(DEFAULT_INPUT_LENGTH);
        this._focused = false;
        this._negative = false;
        this._disabled = false;
        /**
         * \@docs-private
         */
        this.propagateChange = (/**
         * @param {?} _
         * @return {?}
         */
        function (_) {
        });
        /**
         * \@docs-private
         */
        this.propagateTouch = (/**
         * @param {?} _
         * @return {?}
         */
        function (_) {
        });
        if (this._control) {
            // Note: we provide the value accessor through here, instead of
            // the `providers` to avoid running into a circular import.
            this._control.valueAccessor = this;
        }
    }
    Object.defineProperty(NxCodeInputComponent.prototype, "codeLength", {
        get: /**
         * @return {?}
         */
        function () {
            return this._codeLength;
        },
        /** The length of the code input. Default: 6. */
        set: /**
         * The length of the code input. Default: 6.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._codeLength = value;
            this.setInputLength();
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCodeInputComponent.prototype, "type", {
        get: /**
         * @return {?}
         */
        function () {
            return this._type;
        },
        /** The type of HTML input */
        set: /**
         * The type of HTML input
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._type = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCodeInputComponent.prototype, "tabindex", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tabindex;
        },
        /** Sets the tabindex of the contained input elements. */
        set: /**
         * Sets the tabindex of the contained input elements.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabindex = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCodeInputComponent.prototype, "convertTo", {
        get: /**
         * @return {?}
         */
        function () {
            return this._convertTo;
        },
        /** Whether the form should auto capitalize or lowercase (optional). */
        set: /**
         * Whether the form should auto capitalize or lowercase (optional).
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._convertTo = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCodeInputComponent.prototype, "negative", {
        get: /**
         * @return {?}
         */
        function () {
            return this._negative;
        },
        /** Whether the code input uses the negative set of styling. */
        set: /**
         * Whether the code input uses the negative set of styling.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var newValue = coerceBooleanProperty(value);
            if (this._negative !== newValue) {
                this._negative = newValue;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxCodeInputComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        /** Whether the code input is disabled. */
        set: /**
         * Whether the code input is disabled.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var newValue = coerceBooleanProperty(value);
            if (this._disabled !== newValue) {
                this._disabled = newValue;
                this._changeDetectorRef.markForCheck();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NxCodeInputComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        if (this._control) {
            // We need to re-evaluate this on every change detection cycle, because there are some
            // error triggers that we can't subscribe to (e.g. parent form submissions). This means
            // that whatever logic is in here has to be super lean or we risk destroying the performance.
            this.updateErrorState();
        }
    };
    /** Sets the length of the input fields. */
    /**
     * Sets the length of the input fields.
     * @return {?}
     */
    NxCodeInputComponent.prototype.setInputLength = /**
     * Sets the length of the input fields.
     * @return {?}
     */
    function () {
        if (this.codeLength) {
            this._keyCode = new Array(this.codeLength);
        }
        else {
            this._keyCode = new Array(DEFAULT_INPUT_LENGTH);
        }
    };
    /** Converts to upper or lowercase when enabled. */
    /**
     * Converts to upper or lowercase when enabled.
     * @param {?} value
     * @return {?}
     */
    NxCodeInputComponent.prototype._convertLetterSize = /**
     * Converts to upper or lowercase when enabled.
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === 'ÃŸ') {
            return value;
        }
        if (typeof value === 'string') {
            if (this.convertTo === AUTO_UPPERCASE) {
                return value.toUpperCase();
            }
            else if (this.convertTo === AUTO_LOWERCASE) {
                return value.toLowerCase();
            }
            return value;
        }
    };
    /** Reacts to keydown event. */
    /**
     * Reacts to keydown event.
     * @param {?} event
     * @return {?}
     */
    NxCodeInputComponent.prototype._keydownAction = /**
     * Reacts to keydown event.
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var previousInputField = event.target.previousElementSibling;
        /** @type {?} */
        var nextInputField = event.target.nextElementSibling;
        switch (event.keyCode) {
            case SPACE:
                return false;
            case BACKSPACE:
                if (event.target.value === '') {
                    if (previousInputField && previousInputField.tagName === TAG_NAME_INPUT) {
                        this.selectInput(previousInputField);
                    }
                }
                break;
            case LEFT_ARROW:
                if (previousInputField && previousInputField.tagName === TAG_NAME_INPUT) {
                    event.preventDefault();
                    this.selectInput(previousInputField);
                }
                break;
            case RIGHT_ARROW:
                if (nextInputField && nextInputField.tagName === TAG_NAME_INPUT) {
                    this.selectInput(nextInputField);
                }
                event.preventDefault();
                break;
            case DOWN_ARROW:
                this._isUpDown = true;
                if (this._type === 'number' && (event.target.value === '' || event.target.value === '0')) {
                    event.preventDefault();
                }
                break;
            case UP_ARROW:
                this._isUpDown = true;
                if (this._type === 'number' && event.target.value === '9') {
                    event.preventDefault();
                }
                break;
            default:
                break;
        }
    };
    /** Selects the value on click of an input field. */
    /**
     * Selects the value on click of an input field.
     * @param {?} event
     * @return {?}
     */
    NxCodeInputComponent.prototype._selectText = /**
     * Selects the value on click of an input field.
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.selectInput(event.target);
    };
    /** Automatically focuses and selects the next input on key input. */
    /**
     * Automatically focuses and selects the next input on key input.
     * @param {?} event
     * @return {?}
     */
    NxCodeInputComponent.prototype._selectNextInput = /**
     * Automatically focuses and selects the next input on key input.
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.target.value = this._convertLetterSize(event.target.value.slice(0, 1));
        /** @type {?} */
        var currentIndex = this._getFocusedInputIndex(event);
        // save in model with uppercase if needed
        this._keyCode[currentIndex] = event.target.value;
        this.propagateChange(this._keyCode.join(''));
        // don't jump to next input if the user uses UP/DOWn arrow (native behaviour)
        /** @type {?} */
        var focusNextInput = !(this._isUpDown && this.type === 'number');
        if (event.target.value && focusNextInput) {
            /** @type {?} */
            var nextInputField = event.target.nextSibling;
            if (nextInputField !== null && nextInputField.tagName === TAG_NAME_INPUT) {
                nextInputField.focus();
                if (nextInputField.value !== '') {
                    this.selectInput(nextInputField);
                }
            }
        }
        this._isUpDown = false;
    };
    /** Paste event to distribute content in input fields. */
    /**
     * Paste event to distribute content in input fields.
     * @param {?} event
     * @return {?}
     */
    NxCodeInputComponent.prototype._pasteClipboard = /**
     * Paste event to distribute content in input fields.
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var copiedText = (event.clipboardData || ((/** @type {?} */ (window))).clipboardData).getData('text');
        /** @type {?} */
        var copiedTextIndex = 0;
        /** @type {?} */
        var inputIndex = this._getFocusedInputIndex(event);
        copiedText = this.type === 'number' ? this._formatNumberInput(copiedText) : copiedText;
        for (var i = inputIndex; i < this.codeLength; i++) {
            this._keyCode[i] = this._convertLetterSize(copiedText[copiedTextIndex]);
            copiedTextIndex++;
        }
        this.propagateChange(this._keyCode.join(''));
        if (inputIndex + copiedText.length < this.codeLength) {
            this._el.nativeElement.children.item(inputIndex + copiedText.length).focus();
        }
        else {
            this._el.nativeElement.children.item(this.codeLength - 1).focus();
        }
        event.preventDefault();
    };
    /** Returns the index of the code input, which is currently focused. */
    /**
     * Returns the index of the code input, which is currently focused.
     * @private
     * @param {?} event
     * @return {?}
     */
    NxCodeInputComponent.prototype._getFocusedInputIndex = /**
     * Returns the index of the code input, which is currently focused.
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var inputIndex;
        for (var i = 0; i < this._el.nativeElement.children.length; i++) {
            if (event.srcElement === this._el.nativeElement.children.item(i)) {
                inputIndex = i;
            }
        }
        return inputIndex;
    };
    /** Removes all characters from the input except for numbers [0-9]. */
    /**
     * Removes all characters from the input except for numbers [0-9].
     * @private
     * @param {?} copiedText
     * @return {?}
     */
    NxCodeInputComponent.prototype._formatNumberInput = /**
     * Removes all characters from the input except for numbers [0-9].
     * @private
     * @param {?} copiedText
     * @return {?}
     */
    function (copiedText) {
        /** @type {?} */
        var formattedInput = '';
        for (var i = 0; i < copiedText.length; i++) {
            if (copiedText[i].match(/[0-9]{1}$/)) {
                formattedInput += copiedText[i];
            }
        }
        return formattedInput;
    };
    /** Triggers when an input field is blurred. */
    /**
     * Triggers when an input field is blurred.
     * @return {?}
     */
    NxCodeInputComponent.prototype._onBlur = /**
     * Triggers when an input field is blurred.
     * @return {?}
     */
    function () {
        var _this = this;
        this._focused = false;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (!_this._focused) {
                _this.propagateTouch(_this._keyCode.join(''));
            }
            _this._changeDetectorRef.markForCheck();
        }));
    };
    /** Sets _focused state and makes valid. */
    /**
     * Sets _focused state and makes valid.
     * @return {?}
     */
    NxCodeInputComponent.prototype._setFocusState = /**
     * Sets _focused state and makes valid.
     * @return {?}
     */
    function () {
        this._focused = true;
    };
    /**
     * Disables the code input. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param isDisabled Sets whether the component is disabled.
     */
    /**
     * Disables the code input. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param {?} isDisabled Sets whether the component is disabled.
     * @return {?}
     */
    NxCodeInputComponent.prototype.setDisabledState = /**
     * Disables the code input. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param {?} isDisabled Sets whether the component is disabled.
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
        this._changeDetectorRef.markForCheck();
    };
    /** Sets initial value, used by ControlValueAccessor. */
    /**
     * Sets initial value, used by ControlValueAccessor.
     * @param {?} value
     * @return {?}
     */
    NxCodeInputComponent.prototype.writeValue = /**
     * Sets initial value, used by ControlValueAccessor.
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value) {
            /** @type {?} */
            var valueAsArray = value.split('').slice(0, this.codeLength);
            for (var i = 0; i < this.codeLength; i++) {
                this._keyCode[i] = valueAsArray[i];
            }
        }
        else {
            this.setInputLength();
        }
        this._changeDetectorRef.markForCheck();
    };
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    NxCodeInputComponent.prototype._trackByKeyCode = /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    function (index, item) {
        return index;
    };
    /** Adds a gap to input fields when appropriate. */
    /**
     * Adds a gap to input fields when appropriate.
     * @param {?} index
     * @return {?}
     */
    NxCodeInputComponent.prototype._inputGap = /**
     * Adds a gap to input fields when appropriate.
     * @param {?} index
     * @return {?}
     */
    function (index) {
        switch (this.codeLength) {
            case 4:
            case 6:
            case 8:
                if (index === this.codeLength / 2) {
                    return INPUT_FIELD_GAP;
                }
                break;
            default:
                return;
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxCodeInputComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.propagateChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NxCodeInputComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.propagateTouch = fn;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxCodeInputComponent.prototype.updateErrorState = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var oldState = this.errorState;
        /** @type {?} */
        var parent = this._parentFormGroup || this._parentForm;
        /** @type {?} */
        var control = this._control ? (/** @type {?} */ (this._control.control)) : null;
        /** @type {?} */
        var newState = this._errorStateMatcher.isErrorState(control, parent);
        if (newState !== oldState) {
            this.errorState = newState;
        }
    };
    /**
     * @param {?} keyIndex
     * @return {?}
     */
    NxCodeInputComponent.prototype.getAriaLabel = /**
     * @param {?} keyIndex
     * @return {?}
     */
    function (keyIndex) {
        return this._intl.inputFieldAriaLabel + " " + (keyIndex + 1) + " " + this._intl.ofLabel + " " + this._keyCode.length;
    };
    /** @docs-private
     * Workaround preventing the selection error because the `setSelectionRange` is not supported on input['type=number']
     * */
    /**
     * \@docs-private
     * Workaround preventing the selection error because the `setSelectionRange` is not supported on input['type=number']
     *
     * @param {?} input
     * @return {?}
     */
    NxCodeInputComponent.prototype.selectInput = /**
     * \@docs-private
     * Workaround preventing the selection error because the `setSelectionRange` is not supported on input['type=number']
     *
     * @param {?} input
     * @return {?}
     */
    function (input) {
        input.focus();
        try {
            input.setSelectionRange(0, input.value.length);
        }
        catch (err) {
            if (err instanceof DOMException && err.name === 'InvalidStateError') {
                // setSelectionRange does not apply
            }
            else {
                throw err;
            }
        }
    };
    NxCodeInputComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-code-input',
                    template: "<input\n        class=\"nx-code-input__field\"\n        maxlength=\"1\"\n        *ngFor=\"let key of _keyCode; index as i; trackBy: _trackByKeyCode;\"\n        [(ngModel)]=\"_keyCode[i]\"\n        [ngClass]=\"_inputGap(i)\"\n        [attr.aria-label]=\"getAriaLabel(i)\"\n        [attr.type]=\"type\"\n        (input)=\"_selectNextInput($event)\"\n        (paste)=\"_pasteClipboard($event)\"\n        (blur)=\"_onBlur()\"\n        (focus)=\"_setFocusState()\"\n        (click)=\"_selectText($event)\"\n        (keydown)=\"_keydownAction($event)\"\n        [attr.tabindex]=\"tabindex\"\n        [attr.disabled]=\"disabled ? '' : null\"\n />\n",
                    host: {
                        '[class.nx-code-input]': 'true',
                        '[class.has-error]': 'errorState',
                        '[class.is-negative]': 'negative',
                        '[class.is-disabled]': 'disabled',
                        '[attr.tabindex]': '-1'
                    },
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [":host{display:block}:host .nx-code-input__field{font-size:26px;font-size:var(--code-input-font-size,26px);line-height:32px;line-height:var(--code-input-line-height,32px);font-weight:600;font-weight:var(--code-input-font-weight,600);letter-spacing:.3px;letter-spacing:var(--code-input-letter-spacing,.3px);color:#414141;color:var(--code-input-color,#414141);margin:0 4px;text-align:center;border:0;outline:0;caret-color:#007ab3;caret-color:var(--code-input-active-color,#007ab3);box-shadow:inset 0 -1px 0 0 #414141;box-shadow:inset 0 -1px 0 0 var(--code-input-color,#414141);width:32px;border-radius:0;padding:0;background:0 0;box-sizing:border-box}:host .nx-code-input__field:focus{margin-bottom:-1px;color:#007ab3;color:var(--code-input-active-color,#007ab3);box-shadow:inset 0 -2px 0 0 #007ab3;box-shadow:inset 0 -2px 0 0 var(--code-input-active-color,#007ab3)}:host .nx-code-input__field:first-child{margin-left:0}:host .nx-code-input__field:last-child{margin-right:0}:host .nx-code-input--field-with-gap{margin-left:20px}:host:focus{outline:0}:host.is-negative .nx-code-input__field{caret-color:#fff;box-shadow:inset 0 -1px 0 0 #fff;color:#fff}:host.is-negative .nx-code-input__field:focus{box-shadow:inset 0 -2px 0 0 #fff}:host.has-error:not(.is-negative) .nx-code-input__field{margin-bottom:-1px;font-weight:700;color:#dc3149;color:var(--code-input-error-color,#dc3149);box-shadow:inset 0 -1px 0 0 #dc3149;box-shadow:inset 0 -1px 0 0 var(--code-input-error-color,#dc3149)}:host.has-error:not(.is-negative) .nx-code-input__field:focus{box-shadow:inset 0 -2px 0 0 #dc3149;box-shadow:inset 0 -2px 0 0 var(--code-input-error-color,#dc3149)}:host.has-error.is-negative .nx-code-input__field{font-weight:700}:host.is-disabled{cursor:not-allowed}:host.is-disabled .nx-code-input__field{cursor:not-allowed;color:#c2c2c2;color:var(--code-input-disabled-color,#c2c2c2);box-shadow:inset 0 -1px 0 0 nx-theme-color(code-input-disabled-color);box-shadow:inset 0 -1px 0 0 var(--code-input-disabled-color,#c2c2c2)}:host.is-disabled.is-negative .nx-code-input__field{color:rgba(194,194,194,.4);box-shadow:inset 0 -1px 0 0 rgba(194,194,194,.4)}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}@media screen and (-ms-high-contrast:active){.nx-code-input__field{box-shadow:inset 0 -1px 0 0 buttonText}.nx-code-input__field:focus{box-shadow:inset 0 -2px 0 0 buttonText}:host.is-disabled .nx-code-input__field{color:GrayText;box-shadow:inset 0 -1px 0 0 GrayText;opacity:1}}"]
                }] }
    ];
    /** @nocollapse */
    NxCodeInputComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: ElementRef },
        { type: NgControl, decorators: [{ type: Self }, { type: Optional }] },
        { type: NxCodeInputIntl },
        { type: ErrorStateMatcher },
        { type: NgForm, decorators: [{ type: Optional }] },
        { type: FormGroupDirective, decorators: [{ type: Optional }] }
    ]; };
    NxCodeInputComponent.propDecorators = {
        codeLength: [{ type: Input, args: ['length',] }],
        type: [{ type: Input }],
        tabindex: [{ type: Input }],
        convertTo: [{ type: Input, args: ['nxConvertTo',] }],
        negative: [{ type: Input }],
        disabled: [{ type: Input }]
    };
    return NxCodeInputComponent;
}());
export { NxCodeInputComponent };
if (false) {
    /**
     * Whether the current input of the component has an error.
     * @type {?}
     */
    NxCodeInputComponent.prototype.errorState;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._codeLength;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._type;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._isUpDown;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._tabindex;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._convertTo;
    /**
     * The user input in array form
     * @type {?}
     */
    NxCodeInputComponent.prototype._keyCode;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._focused;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._negative;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._disabled;
    /**
     * \@docs-private
     * @type {?}
     */
    NxCodeInputComponent.prototype.propagateChange;
    /**
     * \@docs-private
     * @type {?}
     */
    NxCodeInputComponent.prototype.propagateTouch;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._changeDetectorRef;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._el;
    /** @type {?} */
    NxCodeInputComponent.prototype._control;
    /** @type {?} */
    NxCodeInputComponent.prototype._intl;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._errorStateMatcher;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._parentForm;
    /**
     * @type {?}
     * @private
     */
    NxCodeInputComponent.prototype._parentFormGroup;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29kZS1pbnB1dC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuei9uZ3gtbmRieC9jb2RlLWlucHV0LyIsInNvdXJjZXMiOlsiY29kZS1pbnB1dC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxLQUFLLEVBQ0wsaUJBQWlCLEVBQ2pCLFVBQVUsRUFDVixJQUFJLEVBQ0osUUFBUSxFQUVULE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBd0IsU0FBUyxFQUFFLE1BQU0sRUFBRSxrQkFBa0IsRUFBZSxNQUFNLGdCQUFnQixDQUFDO0FBQzFHLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN4RyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQzs7SUFFeEQsb0JBQW9CLEdBQUcsQ0FBQzs7SUFDeEIsY0FBYyxHQUFHLE9BQU87O0lBQ3hCLGNBQWMsR0FBRyxPQUFPOztJQUN4QixjQUFjLEdBQUcsT0FBTzs7SUFDeEIsZUFBZSxHQUFHLCtCQUErQjtBQUd2RDtJQW9HRSw4QkFDVSxrQkFBcUMsRUFDckMsR0FBZSxFQUNJLFFBQW1CLEVBQ3ZDLEtBQXNCLEVBQ3JCLGtCQUFxQyxFQUN6QixXQUFtQixFQUNuQixnQkFBb0M7UUFOaEQsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQUNyQyxRQUFHLEdBQUgsR0FBRyxDQUFZO1FBQ0ksYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUN2QyxVQUFLLEdBQUwsS0FBSyxDQUFpQjtRQUNyQix1QkFBa0IsR0FBbEIs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QyxRQUFRO3VCQVlkLEtBQUs7MkJBWUwsS0FBSzs0QkFXTCxLQUFLLFNBQUMsYUFBYTsyQkFlbkIsS0FBSzsyQkFlTCxLQUFLOztJQTRTUiwyQkFBQztDQUFBLEFBbFlELElBa1lDO1NBblhZLG9CQUFvQjs7Ozs7O0lBRy9CLDBDQUE0Qjs7Ozs7SUFZNUIsMkNBQW1EOzs7OztJQVduRCxxQ0FBK0I7Ozs7O0lBQy9CLHlDQUFtQzs7Ozs7SUFXbkMseUNBQThCOzs7OztJQVc5QiwwQ0FBdUM7Ozs7O0lBR3ZDLHdDQUFxRDs7Ozs7SUFDckQsd0NBQWtDOzs7OztJQWVsQyx5Q0FBbUM7Ozs7O0lBZW5DLHlDQUFtQzs7Ozs7SUFrUG5DLCtDQUNDOzs7OztJQUdELDhDQUNDOzs7OztJQXBQQyxrREFBNkM7Ozs7O0lBQzdDLG1DQUF1Qjs7SUFDdkIsd0NBQThDOztJQUM5QyxxQ0FBNkI7Ozs7O0lBQzdCLGtEQUE2Qzs7Ozs7SUFDN0MsMkNBQXVDOzs7OztJQUN2QyxnREFBd0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIEVsZW1lbnRSZWYsXG4gIFNlbGYsXG4gIE9wdGlvbmFsLFxuICBEb0NoZWNrXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5nQ29udHJvbCwgTmdGb3JtLCBGb3JtR3JvdXBEaXJlY3RpdmUsIEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTnhDb2RlSW5wdXRJbnRsIH0gZnJvbSAnLi9jb2RlLWlucHV0LWludGwnO1xuaW1wb3J0IHsgRXJyb3JTdGF0ZU1hdGNoZXIgfSBmcm9tICdAYWxsaWFuei9uZ3gtbmRieC91dGlscyc7XG5pbXBvcnQgeyBCQUNLU1BBQ0UsIExFRlRfQVJST1csIFJJR0hUX0FSUk9XLCBTUEFDRSwgRE9XTl9BUlJPVywgVVBfQVJST1cgfSBmcm9tICdAYW5ndWxhci9jZGsva2V5Y29kZXMnO1xuaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcblxuY29uc3QgREVGQVVMVF9JTlBVVF9MRU5HVEggPSA2O1xuY29uc3QgVEFHX05BTUVfSU5QVVQgPSAnSU5QVVQnO1xuY29uc3QgQVVUT19VUFBFUkNBU0UgPSAndXBwZXInO1xuY29uc3QgQVVUT19MT1dFUkNBU0UgPSAnbG93ZXInO1xuY29uc3QgSU5QVVRfRklFTERfR0FQID0gJ254LWNvZGUtaW5wdXQtLWZpZWxkLXdpdGgtZ2FwJztcbmV4cG9ydCB0eXBlIE54Q29udmVyc2lvblR5cGVzID0gJ2xvd2VyJyB8ICd1cHBlcic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ254LWNvZGUtaW5wdXQnLFxuICB0ZW1wbGF0ZVVybDogJ2NvZGUtaW5wdXQuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFtcbiAgICAnY29kZS1pbnB1dC5zY3NzJ1xuICBdLFxuICBob3N0OiB7XG4gICAgJ1tjbGFzcy5ueC1jb2RlLWlucHV0XSc6ICd0cnVlJyxcbiAgICAnW2NsYXNzLmhhcy1lcnJvcl0nOiAnZXJyb3JTdGF0ZScsXG4gICAgJ1tjbGFzcy5pcy1uZWdhdGl2ZV0nOiAnbmVnYXRpdmUnLFxuICAgICdbY2xhc3MuaXMtZGlzYWJsZWRdJzogJ2Rpc2FibGVkJyxcbiAgICAnW2F0dHIudGFiaW5kZXhdJzogJy0xJ1xuICB9LFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBOeENvZGVJbnB1dENvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBEb0NoZWNrIHtcblxuICAvKiogV2hldGhlciB0aGUgY3VycmVudCBpbnB1dCBvZiB0aGUgY29tcG9uZW50IGhhcyBhbiBlcnJvci4gKi9cbiAgZXJyb3JTdGF0ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKiBUaGUgbGVuZ3RoIG9mIHRoZSBjb2RlIGlucHV0LiBEZWZhdWx0OiA2LiAqL1xuICBASW5wdXQoJ2xlbmd0aCcpXG4gIHNldCBjb2RlTGVuZ3RoKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9jb2RlTGVuZ3RoID0gdmFsdWU7XG4gICAgdGhpcy5zZXRJbnB1dExlbmd0aCgpO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBjb2RlTGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9jb2RlTGVuZ3RoO1xuICB9XG4gIHByaXZhdGUgX2NvZGVMZW5ndGg6IG51bWJlciA9IERFRkFVTFRfSU5QVVRfTEVOR1RIO1xuXG4gIC8qKiBUaGUgdHlwZSBvZiBIVE1MIGlucHV0ICovXG4gIEBJbnB1dCgpXG4gIHNldCB0eXBlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl90eXBlID0gdmFsdWU7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gIH1cbiAgcHJpdmF0ZSBfdHlwZTogc3RyaW5nID0gJ3RleHQnO1xuICBwcml2YXRlIF9pc1VwRG93bjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKiBTZXRzIHRoZSB0YWJpbmRleCBvZiB0aGUgY29udGFpbmVkIGlucHV0IGVsZW1lbnRzLiAqL1xuICBASW5wdXQoKVxuICBzZXQgdGFiaW5kZXgodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX3RhYmluZGV4ID0gdmFsdWU7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHRhYmluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3RhYmluZGV4O1xuICB9XG4gIHByaXZhdGUgX3RhYmluZGV4OiBudW1iZXIgPSAwO1xuXG4gIC8qKiBXaGV0aGVyIHRoZSBmb3JtIHNob3VsZCBhdXRvIGNhcGl0YWxpemUgb3IgbG93ZXJjYXNlIChvcHRpb25hbCkuICovXG4gIEBJbnB1dCgnbnhDb252ZXJ0VG8nKVxuICBzZXQgY29udmVydFRvKHZhbHVlOiBOeENvbnZlcnNpb25UeXBlcykge1xuICAgIHRoaXMuX2NvbnZlcnRUbyA9IHZhbHVlO1xuICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG4gIGdldCBjb252ZXJ0VG8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRUbztcbiAgfVxuICBwcml2YXRlIF9jb252ZXJ0VG8/OiBOeENvbnZlcnNpb25UeXBlcztcblxuICAvKiogVGhlIHVzZXIgaW5wdXQgaW4gYXJyYXkgZm9ybSAqL1xuICBfa2V5Q29kZTogc3RyaW5nW10gPSBuZXcgQXJyYXkoREVGQVVMVF9JTlBVVF9MRU5HVEgpO1xuICBwcml2YXRlIF9mb2N1c2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqIFdoZXRoZXIgdGhlIGNvZGUgaW5wdXQgdXNlcyB0aGUgbmVnYXRpdmUgc2V0IG9mIHN0eWxpbmcuICovXG4gIEBJbnB1dCgpXG4gIHNldCBuZWdhdGl2ZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICBpZiAodGhpcy5fbmVnYXRpdmUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICB0aGlzLl9uZWdhdGl2ZSA9IG5ld1ZhbHVlO1xuICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG4gIGdldCBuZWdhdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmVnYXRpdmU7XG4gIH1cblxuICBwcml2YXRlIF9uZWdhdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKiBXaGV0aGVyIHRoZSBjb2RlIGlucHV0IGlzIGRpc2FibGVkLiAqL1xuICBASW5wdXQoKVxuICBzZXQgZGlzYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgaWYgKHRoaXMuX2Rpc2FibGVkICE9PSBuZXdWYWx1ZSkge1xuICAgICAgdGhpcy5fZGlzYWJsZWQgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9jaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBfZWw6IEVsZW1lbnRSZWYsXG4gICAgQFNlbGYoKSBAT3B0aW9uYWwoKSBwdWJsaWMgX2NvbnRyb2w6IE5nQ29udHJvbCxcbiAgICBwdWJsaWMgX2ludGw6IE54Q29kZUlucHV0SW50bCxcbiAgICBwcml2YXRlIF9lcnJvclN0YXRlTWF0Y2hlcjogRXJyb3JTdGF0ZU1hdGNoZXIsXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBfcGFyZW50Rm9ybTogTmdGb3JtLFxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgX3BhcmVudEZvcm1Hcm91cDogRm9ybUdyb3VwRGlyZWN0aXZlKSB7XG4gICAgaWYgKHRoaXMuX2NvbnRyb2wpIHtcbiAgICAgIC8vIE5vdGU6IHdlIHByb3ZpZGUgdGhlIHZhbHVlIGFjY2Vzc29yIHRocm91Z2ggaGVyZSwgaW5zdGVhZCBvZlxuICAgICAgLy8gdGhlIGBwcm92aWRlcnNgIHRvIGF2b2lkIHJ1bm5pbmcgaW50byBhIGNpcmN1bGFyIGltcG9ydC5cbiAgICAgIHRoaXMuX2NvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XG4gICAgfVxuICB9XG5cbiAgbmdEb0NoZWNrKCkge1xuICAgIGlmICh0aGlzLl9jb250cm9sKSB7XG4gICAgICAvLyBXZSBuZWVkIHRvIHJlLWV2YWx1YXRlIHRoaXMgb24gZXZlcnkgY2hhbmdlIGRldGVjdGlvbiBjeWNsZSwgYmVjYXVzZSB0aGVyZSBhcmUgc29tZVxuICAgICAgLy8gZXJyb3IgdHJpZ2dlcnMgdGhhdCB3ZSBjYW4ndCBzdWJzY3JpYmUgdG8gKGUuZy4gcGFyZW50IGZvcm0gc3VibWlzc2lvbnMpLiBUaGlzIG1lYW5zXG4gICAgICAvLyB0aGF0IHdoYXRldmVyIGxvZ2ljIGlzIGluIGhlcmUgaGFzIHRvIGJlIHN1cGVyIGxlYW4gb3Igd2UgcmlzayBkZXN0cm95aW5nIHRoZSBwZXJmb3JtYW5jZS5cbiAgICAgIHRoaXMudXBkYXRlRXJyb3JTdGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBTZXRzIHRoZSBsZW5ndGggb2YgdGhlIGlucHV0IGZpZWxkcy4gKi9cbiAgc2V0SW5wdXRMZW5ndGgoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29kZUxlbmd0aCkge1xuICAgICAgdGhpcy5fa2V5Q29kZSA9IG5ldyBBcnJheSh0aGlzLmNvZGVMZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9rZXlDb2RlID0gbmV3IEFycmF5KERFRkFVTFRfSU5QVVRfTEVOR1RIKTtcbiAgICB9XG4gIH1cblxuICAvKiogQ29udmVydHMgdG8gdXBwZXIgb3IgbG93ZXJjYXNlIHdoZW4gZW5hYmxlZC4gKi9cbiAgX2NvbnZlcnRMZXR0ZXJTaXplKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICAgIGlmICh2YWx1ZSA9PT0gJ8OfJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodGhpcy5jb252ZXJ0VG8gPT09IEFVVE9fVVBQRVJDQVNFKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnZlcnRUbyA9PT0gQVVUT19MT1dFUkNBU0UpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogUmVhY3RzIHRvIGtleWRvd24gZXZlbnQuICovXG4gIF9rZXlkb3duQWN0aW9uKGV2ZW50KTogdm9pZCB8IGZhbHNlIHtcbiAgICBjb25zdCBwcmV2aW91c0lucHV0RmllbGQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBldmVudC50YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBjb25zdCBuZXh0SW5wdXRGaWVsZDogSFRNTElucHV0RWxlbWVudCA9IGV2ZW50LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgIGNhc2UgU1BBQ0U6XG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgY2FzZSBCQUNLU1BBQ0U6XG4gICAgICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgaWYgKHByZXZpb3VzSW5wdXRGaWVsZCAmJiBwcmV2aW91c0lucHV0RmllbGQudGFnTmFtZSA9PT0gVEFHX05BTUVfSU5QVVQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SW5wdXQocHJldmlvdXNJbnB1dEZpZWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTEVGVF9BUlJPVzpcbiAgICAgICAgaWYgKHByZXZpb3VzSW5wdXRGaWVsZCAmJiBwcmV2aW91c0lucHV0RmllbGQudGFnTmFtZSA9PT0gVEFHX05BTUVfSU5QVVQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0SW5wdXQocHJldmlvdXNJbnB1dEZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSSUdIVF9BUlJPVzpcbiAgICAgICAgaWYgKG5leHRJbnB1dEZpZWxkICYmIG5leHRJbnB1dEZpZWxkLnRhZ05hbWUgPT09IFRBR19OQU1FX0lOUFVUKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RJbnB1dChuZXh0SW5wdXRGaWVsZCk7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRE9XTl9BUlJPVzpcbiAgICAgICAgdGhpcy5faXNVcERvd24gPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fdHlwZSA9PT0gJ251bWJlcicgJiYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gJycgfHwgZXZlbnQudGFyZ2V0LnZhbHVlID09PSAnMCcpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBVUF9BUlJPVzpcbiAgICAgICAgdGhpcy5faXNVcERvd24gPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fdHlwZSA9PT0gJ251bWJlcicgJiYgZXZlbnQudGFyZ2V0LnZhbHVlID09PSAnOScpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKiogU2VsZWN0cyB0aGUgdmFsdWUgb24gY2xpY2sgb2YgYW4gaW5wdXQgZmllbGQuICovXG4gIF9zZWxlY3RUZXh0KGV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RJbnB1dChldmVudC50YXJnZXQpO1xuICB9XG5cbiAgLyoqIEF1dG9tYXRpY2FsbHkgZm9jdXNlcyBhbmQgc2VsZWN0cyB0aGUgbmV4dCBpbnB1dCBvbiBrZXkgaW5wdXQuICovXG4gIF9zZWxlY3ROZXh0SW5wdXQoZXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC50YXJnZXQudmFsdWUgPSB0aGlzLl9jb252ZXJ0TGV0dGVyU2l6ZShldmVudC50YXJnZXQudmFsdWUuc2xpY2UoMCwgMSkpO1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuX2dldEZvY3VzZWRJbnB1dEluZGV4KGV2ZW50KTtcbiAgICAvLyBzYXZlIGluIG1vZGVsIHdpdGggdXBwZXJjYXNlIGlmIG5lZWRlZFxuICAgIHRoaXMuX2tleUNvZGVbY3VycmVudEluZGV4XSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh0aGlzLl9rZXlDb2RlLmpvaW4oJycpKTtcblxuICAgIC8vIGRvbid0IGp1bXAgdG8gbmV4dCBpbnB1dCBpZiB0aGUgdXNlciB1c2VzIFVQL0RPV24gYXJyb3cgKG5hdGl2ZSBiZWhhdmlvdXIpXG4gICAgY29uc3QgZm9jdXNOZXh0SW5wdXQgPSAhKHRoaXMuX2lzVXBEb3duICYmIHRoaXMudHlwZSA9PT0gJ251bWJlcicpO1xuXG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSAmJiBmb2N1c05leHRJbnB1dCkge1xuICAgICAgY29uc3QgbmV4dElucHV0RmllbGQgPSBldmVudC50YXJnZXQubmV4dFNpYmxpbmc7XG5cbiAgICAgIGlmIChuZXh0SW5wdXRGaWVsZCAhPT0gbnVsbCAmJiBuZXh0SW5wdXRGaWVsZC50YWdOYW1lID09PSBUQUdfTkFNRV9JTlBVVCkge1xuICAgICAgICBuZXh0SW5wdXRGaWVsZC5mb2N1cygpO1xuICAgICAgICBpZiAobmV4dElucHV0RmllbGQudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RJbnB1dChuZXh0SW5wdXRGaWVsZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9pc1VwRG93biA9IGZhbHNlO1xuICB9XG5cbiAgLyoqIFBhc3RlIGV2ZW50IHRvIGRpc3RyaWJ1dGUgY29udGVudCBpbiBpbnB1dCBmaWVsZHMuICovXG4gIF9wYXN0ZUNsaXBib2FyZChldmVudCk6IHZvaWQge1xuICAgIGxldCBjb3BpZWRUZXh0ID0gKGV2ZW50LmNsaXBib2FyZERhdGEgfHwgKDxhbnk+IHdpbmRvdykuY2xpcGJvYXJkRGF0YSkuZ2V0RGF0YSgndGV4dCcpO1xuICAgIGxldCBjb3BpZWRUZXh0SW5kZXggPSAwO1xuICAgIGNvbnN0IGlucHV0SW5kZXggPSB0aGlzLl9nZXRGb2N1c2VkSW5wdXRJbmRleChldmVudCk7XG5cbiAgICBjb3BpZWRUZXh0ID0gdGhpcy50eXBlID09PSAnbnVtYmVyJyA/IHRoaXMuX2Zvcm1hdE51bWJlcklucHV0KGNvcGllZFRleHQpIDogY29waWVkVGV4dDtcblxuICAgIGZvciAobGV0IGkgPSBpbnB1dEluZGV4OyBpIDwgdGhpcy5jb2RlTGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2tleUNvZGVbaV0gPSB0aGlzLl9jb252ZXJ0TGV0dGVyU2l6ZShjb3BpZWRUZXh0W2NvcGllZFRleHRJbmRleF0pO1xuICAgICAgY29waWVkVGV4dEluZGV4Kys7XG4gICAgfVxuXG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UodGhpcy5fa2V5Q29kZS5qb2luKCcnKSk7XG5cbiAgICBpZiAoaW5wdXRJbmRleCArIGNvcGllZFRleHQubGVuZ3RoIDwgdGhpcy5jb2RlTGVuZ3RoKSB7XG4gICAgICB0aGlzLl9lbC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuLml0ZW0oaW5wdXRJbmRleCArIGNvcGllZFRleHQubGVuZ3RoKS5mb2N1cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuLml0ZW0odGhpcy5jb2RlTGVuZ3RoIC0gMSkuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBjb2RlIGlucHV0LCB3aGljaCBpcyBjdXJyZW50bHkgZm9jdXNlZC4gKi9cbiAgcHJpdmF0ZSBfZ2V0Rm9jdXNlZElucHV0SW5kZXgoZXZlbnQpIHtcbiAgICBsZXQgaW5wdXRJbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2VsLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChldmVudC5zcmNFbGVtZW50ID09PSB0aGlzLl9lbC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuLml0ZW0oaSkpIHtcbiAgICAgICAgaW5wdXRJbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnB1dEluZGV4O1xuICB9XG5cbiAgLyoqIFJlbW92ZXMgYWxsIGNoYXJhY3RlcnMgZnJvbSB0aGUgaW5wdXQgZXhjZXB0IGZvciBudW1iZXJzIFswLTldLiAqL1xuICBwcml2YXRlIF9mb3JtYXROdW1iZXJJbnB1dChjb3BpZWRUZXh0OiBzdHJpbmcpIHtcbiAgICBsZXQgZm9ybWF0dGVkSW5wdXQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcGllZFRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjb3BpZWRUZXh0W2ldLm1hdGNoKC9bMC05XXsxfSQvKSkge1xuICAgICAgICBmb3JtYXR0ZWRJbnB1dCArPSBjb3BpZWRUZXh0W2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3JtYXR0ZWRJbnB1dDtcbiAgfVxuXG4gIC8qKiBUcmlnZ2VycyB3aGVuIGFuIGlucHV0IGZpZWxkIGlzIGJsdXJyZWQuICovXG4gIF9vbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fZm9jdXNlZCA9IGZhbHNlO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9mb2N1c2VkKSB7XG4gICAgICAgIHRoaXMucHJvcGFnYXRlVG91Y2godGhpcy5fa2V5Q29kZS5qb2luKCcnKSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBTZXRzIF9mb2N1c2VkIHN0YXRlIGFuZCBtYWtlcyB2YWxpZC4gKi9cbiAgX3NldEZvY3VzU3RhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5fZm9jdXNlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgdGhlIGNvZGUgaW5wdXQuIFBhcnQgb2YgdGhlIENvbnRyb2xWYWx1ZUFjY2Vzc29yIGludGVyZmFjZSByZXF1aXJlZFxuICAgKiB0byBpbnRlZ3JhdGUgd2l0aCBBbmd1bGFyJ3MgY29yZSBmb3JtcyBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSBpc0Rpc2FibGVkIFNldHMgd2hldGhlciB0aGUgY29tcG9uZW50IGlzIGRpc2FibGVkLlxuICAgKi9cbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKiogU2V0cyBpbml0aWFsIHZhbHVlLCB1c2VkIGJ5IENvbnRyb2xWYWx1ZUFjY2Vzc29yLiAqL1xuICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlQXNBcnJheSA9IHZhbHVlLnNwbGl0KCcnKS5zbGljZSgwLCB0aGlzLmNvZGVMZW5ndGgpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29kZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2tleUNvZGVbaV0gPSB2YWx1ZUFzQXJyYXlbaV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRMZW5ndGgoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIF90cmFja0J5S2V5Q29kZShpbmRleDogbnVtYmVyLCBpdGVtOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKiBBZGRzIGEgZ2FwIHRvIGlucHV0IGZpZWxkcyB3aGVuIGFwcHJvcHJpYXRlLiAqL1xuICBfaW5wdXRHYXAoaW5kZXgpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5jb2RlTGVuZ3RoKSB7XG4gICAgICBjYXNlIDQ6XG4gICAgICBjYXNlIDY6XG4gICAgICBjYXNlIDg6XG4gICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5jb2RlTGVuZ3RoIC8gMikge1xuICAgICAgICAgIHJldHVybiBJTlBVVF9GSUVMRF9HQVA7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBwcm9wYWdhdGVDaGFuZ2UgPSAoXzogYW55KSA9PiB7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBwcm9wYWdhdGVUb3VjaCA9IChfOiBhbnkpID0+IHtcbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSkge1xuICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KSB7XG4gICAgdGhpcy5wcm9wYWdhdGVUb3VjaCA9IGZuO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgdXBkYXRlRXJyb3JTdGF0ZSgpIHtcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMuZXJyb3JTdGF0ZTtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLl9wYXJlbnRGb3JtR3JvdXAgfHwgdGhpcy5fcGFyZW50Rm9ybTtcbiAgICBjb25zdCBjb250cm9sID0gdGhpcy5fY29udHJvbCA/IHRoaXMuX2NvbnRyb2wuY29udHJvbCBhcyBGb3JtQ29udHJvbCA6IG51bGw7XG4gICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLl9lcnJvclN0YXRlTWF0Y2hlci5pc0Vycm9yU3RhdGUoY29udHJvbCwgcGFyZW50KTtcblxuICAgIGlmIChuZXdTdGF0ZSAhPT0gb2xkU3RhdGUpIHtcbiAgICAgIHRoaXMuZXJyb3JTdGF0ZSA9IG5ld1N0YXRlO1xuICAgIH1cbiAgfVxuXG4gIGdldEFyaWFMYWJlbChrZXlJbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuX2ludGwuaW5wdXRGaWVsZEFyaWFMYWJlbH0gJHtrZXlJbmRleCArIDF9ICR7dGhpcy5faW50bC5vZkxhYmVsfSAke3RoaXMuX2tleUNvZGUubGVuZ3RofWA7XG4gIH1cblxuIC8qKiBAZG9jcy1wcml2YXRlXG4gICogV29ya2Fyb3VuZCBwcmV2ZW50aW5nIHRoZSBzZWxlY3Rpb24gZXJyb3IgYmVjYXVzZSB0aGUgYHNldFNlbGVjdGlvblJhbmdlYCBpcyBub3Qgc3VwcG9ydGVkIG9uIGlucHV0Wyd0eXBlPW51bWJlciddXG4gICogKi9cbiBzZWxlY3RJbnB1dChpbnB1dDogSFRNTElucHV0RWxlbWVudCkge1xuICAgaW5wdXQuZm9jdXMoKTtcbiAgIHRyeSB7XG4gICAgIGlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIGlucHV0LnZhbHVlLmxlbmd0aCk7XG4gICB9IGNhdGNoIChlcnIpIHtcbiAgICAgaWYgKGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnIubmFtZSA9PT0gJ0ludmFsaWRTdGF0ZUVycm9yJykge1xuICAgICAgIC8vIHNldFNlbGVjdGlvblJhbmdlIGRvZXMgbm90IGFwcGx5XG4gICAgIH0gZWxzZSB7XG4gICAgICAgdGhyb3cgZXJyO1xuICAgICB9XG4gICB9XG4gfVxufVxuIl19
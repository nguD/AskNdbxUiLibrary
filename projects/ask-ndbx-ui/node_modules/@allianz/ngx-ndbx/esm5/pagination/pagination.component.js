/**
 * @fileoverview added by tsickle
 * Generated from: pagination/pagination.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Inject, Input, Optional, Output, } from '@angular/core';
import { DefaultPaginationTexts, NX_PAGINATION_TEXTS } from './pagination-texts';
import { NxPaginationUtils } from './pagination-utils';
/**
 * \@docs-private
 * @record
 */
export function Page() { }
if (false) {
    /** @type {?} */
    Page.prototype.label;
    /** @type {?} */
    Page.prototype.value;
    /** @type {?} */
    Page.prototype.class;
}
var NxPaginationComponent = /** @class */ (function () {
    function NxPaginationComponent(paginationTexts, paginationUtilsService, _changeDetectorRef) {
        this.paginationUtilsService = paginationUtilsService;
        this._changeDetectorRef = _changeDetectorRef;
        this._type = 'simple';
        /**
         * \@docs-private
         */
        this.totalNumberPages = 0;
        /**
         * An event emitted when the previous page button is clicked.
         */
        this.nxGoPrev = new EventEmitter();
        /**
         * An event emitted when the next page button is clicked
         */
        this.nxGoNext = new EventEmitter();
        /**
         * An event emitted when a page number is clicked.
         * Provides the number of the page as parameter.
         */
        this.nxGoPage = new EventEmitter();
        this.paginationTexts = paginationTexts || DefaultPaginationTexts;
    }
    Object.defineProperty(NxPaginationComponent.prototype, "page", {
        get: /**
         * @return {?}
         */
        function () { return this._page; },
        /** Sets the current page. */
        set: /**
         * Sets the current page.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._page = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxPaginationComponent.prototype, "count", {
        get: /**
         * @return {?}
         */
        function () { return this._count; },
        /** Number of total items over all pages. */
        set: /**
         * Number of total items over all pages.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._count = value;
            this.totalNumberPages = this.calculateTotalPages();
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxPaginationComponent.prototype, "perPage", {
        get: /**
         * @return {?}
         */
        function () { return this._perPage; },
        /** Sets the number of items you want to show per page. */
        set: /**
         * Sets the number of items you want to show per page.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._perPage = value;
            this.totalNumberPages = this.calculateTotalPages();
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NxPaginationComponent.prototype, "type", {
        get: /**
         * @return {?}
         */
        function () { return this._type; },
        /**
         * Determines the type of pagination.
         *
         * Values: simple | advanced, default: simple.
         */
        set: /**
         * Determines the type of pagination.
         *
         * Values: simple | advanced, default: simple.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._type = value;
            this._changeDetectorRef.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.totalNumberPages = this.calculateTotalPages();
    };
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        if (this.type === 'advanced' && (!this.paginationTexts.last || !this.paginationTexts.first)) {
            console.warn('Please define aria labels for the last and first arrows.');
        }
    };
    /** Returns the number of the first page. */
    /**
     * Returns the number of the first page.
     * @return {?}
     */
    NxPaginationComponent.prototype.getMin = /**
     * Returns the number of the first page.
     * @return {?}
     */
    function () {
        return this.totalNumberPages > 0 ? 1 : 0;
    };
    /** Returns the number of the last page. */
    /**
     * Returns the number of the last page.
     * @return {?}
     */
    NxPaginationComponent.prototype.getMax = /**
     * Returns the number of the last page.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var max = this._perPage * this._page;
        if (max > this._count) {
            max = this._count;
        }
        return max;
    };
    /** Returns the total number of pages */
    /**
     * Returns the total number of pages
     * @return {?}
     */
    NxPaginationComponent.prototype.calculateTotalPages = /**
     * Returns the total number of pages
     * @return {?}
     */
    function () {
        return Math.ceil(this._count / this._perPage) || 0;
    };
    /** Directs to the page with number n. */
    /**
     * Directs to the page with number n.
     * @param {?} n
     * @return {?}
     */
    NxPaginationComponent.prototype.onPage = /**
     * Directs to the page with number n.
     * @param {?} n
     * @return {?}
     */
    function (n) {
        this.nxGoPage.emit(n);
    };
    /** Directs to the previous page. */
    /**
     * Directs to the previous page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onPrev = /**
     * Directs to the previous page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationPreviousDisabled()) {
            this.nxGoPrev.emit();
        }
    };
    /** Directs to the next page. */
    /**
     * Directs to the next page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onNext = /**
     * Directs to the next page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationNextDisabled()) {
            this.nxGoNext.emit();
        }
    };
    /** Directs to the first page. */
    /**
     * Directs to the first page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onFirst = /**
     * Directs to the first page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationPreviousDisabled()) {
            this.onPage(1);
        }
    };
    /** Directs to the last page. */
    /**
     * Directs to the last page.
     * @return {?}
     */
    NxPaginationComponent.prototype.onLast = /**
     * Directs to the last page.
     * @return {?}
     */
    function () {
        if (!this._isPaginationNextDisabled()) {
            this.onPage(this.totalNumberPages);
        }
    };
    /** Returns if the current page is the last page. */
    /**
     * Returns if the current page is the last page.
     * @return {?}
     */
    NxPaginationComponent.prototype.lastPage = /**
     * Returns if the current page is the last page.
     * @return {?}
     */
    function () {
        return this._perPage * this._page >= this._count;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxPaginationComponent.prototype.getPages = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.paginationUtilsService.getPages(this._page, this.totalNumberPages);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxPaginationComponent.prototype.getMobilePages = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.paginationUtilsService.getMobilePages(this._page, this.totalNumberPages);
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    NxPaginationComponent.prototype.getPaginationItemClasses = /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    function (page) {
        /** @type {?} */
        var classes = {
            'is-ellipsis': page.label === '...',
            'nx-pagination__item--expanded-view': page.class === 'expanded-view'
        };
        return classes;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    NxPaginationComponent.prototype.getPaginationNumberClasses = /**
     * \@docs-private
     * @param {?} page
     * @return {?}
     */
    function (page) {
        /** @type {?} */
        var classes = {
            'is-active': page.value === this.page,
            'nx-pagination__ellipsis': page.label === '...',
            'nx-pagination__link': page.label !== '...'
        };
        return classes;
    };
    /** Returns true, if `nxCount` is greater than 0, else false. */
    /**
     * Returns true, if `nxCount` is greater than 0, else false.
     * @return {?}
     */
    NxPaginationComponent.prototype.isPaginationVisible = /**
     * Returns true, if `nxCount` is greater than 0, else false.
     * @return {?}
     */
    function () {
        return this.count > 0;
    };
    /** Returns true, if `nxCount` is greater than 0 and the type of pagination is 'simple', else false. */
    /**
     * Returns true, if `nxCount` is greater than 0 and the type of pagination is 'simple', else false.
     * @return {?}
     */
    NxPaginationComponent.prototype.isPaginationCompactVisible = /**
     * Returns true, if `nxCount` is greater than 0 and the type of pagination is 'simple', else false.
     * @return {?}
     */
    function () {
        return this.type.includes('simple') && this.count > 0;
    };
    /** @docs-private */
    /**
     * \@docs-private
     * @return {?}
     */
    NxPaginationComponent.prototype.isPaginationContainerVisible = /**
     * \@docs-private
     * @return {?}
     */
    function () {
        return this.type.includes('advanced');
    };
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype._isPaginationPreviousDisabled = /**
     * @return {?}
     */
    function () {
        return this.page === this.getMin();
    };
    /**
     * @return {?}
     */
    NxPaginationComponent.prototype._isPaginationNextDisabled = /**
     * @return {?}
     */
    function () {
        return this.page === this.totalNumberPages;
    };
    NxPaginationComponent.decorators = [
        { type: Component, args: [{
                    selector: 'nx-pagination',
                    template: "<nav *ngIf=\"isPaginationVisible()\"  aria-label=\"Page navigation\" class=\"nx-pagination\" >\n  <ul *ngIf=\"isPaginationContainerVisible()\"  [attr.aria-label]=\"paginationTexts.ariaLabel\" class=\"nx-pagination__container\">\n    <li class=\"nx-pagination__item\">\n      <button\n        [attr.aria-label]=\"paginationTexts.first\"\n        [class.is-disabled]=\"_isPaginationPreviousDisabled()\"\n        [tabindex]=\"_isPaginationPreviousDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--first\"\n        (click)=\"onFirst()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-first\"></nx-icon>\n      </button>\n    </li>\n    <li class=\"nx-pagination__item nx-pagination__item-previous\">\n      <button\n        [attr.aria-label]=\"paginationTexts.previous\"\n        [class.is-disabled]=\"_isPaginationPreviousDisabled()\"\n        [tabindex]=\"_isPaginationPreviousDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--previous\"\n        (click)=\"onPrev()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-left\"></nx-icon>\n      </button>\n    </li>\n    <li *ngFor=\"let pageNum of getPages()\" class=\"nx-pagination__item nx-pagination__item--desktop\" [ngClass]=\"getPaginationItemClasses(pageNum)\">\n      <button class=\"nx-pagination--number\"\n        *ngIf=\"pageNum.label !== '...'\"\n        (click)=\"onPage(pageNum.value)\"\n        [attr.aria-current]=\"(pageNum.value === page) ? 'page' : ''\"\n        [ngClass]=\"getPaginationNumberClasses(pageNum)\">\n        {{ pageNum.label }}\n      </button>\n      <span *ngIf=\"pageNum.label === '...'\">\n        {{ pageNum.label }}\n      </span>\n    </li>\n    <li *ngFor=\"let pageNum of getMobilePages()\" class=\"nx-pagination__item nx-pagination__item--mobile\" [ngClass]=\"getPaginationItemClasses(pageNum)\">\n      <button class=\"nx-pagination--number\"\n        (click)=\"onPage(pageNum.value)\"\n        [attr.aria-current]=\"(pageNum.value === page) ? 'page' : ''\"\n        [ngClass]=\"getPaginationNumberClasses(pageNum)\">\n        {{ pageNum.label }}\n      </button>\n    </li>\n    <li class=\"nx-pagination__item nx-pagination__item-next\">\n      <button\n        [attr.aria-label]=\"paginationTexts.next\"\n        [class.is-disabled]=\"_isPaginationNextDisabled()\"\n        [tabindex]=\"_isPaginationNextDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--next\"\n        (click)=\"onNext()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-right\"></nx-icon>\n      </button>\n    </li>\n    <li class=\"nx-pagination__item\">\n      <button\n        [attr.aria-label]=\"paginationTexts.last\"\n        [class.is-disabled]=\"_isPaginationNextDisabled()\"\n        [tabindex]=\"_isPaginationNextDisabled() ? -1 : 0\"\n        class=\"nx-pagination__link nx-pagination__link--last\"\n        (click)=\"onLast()\">\n        <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-last\"></nx-icon>\n      </button>\n    </li>\n  </ul>\n</nav>\n<nav *ngIf=\"isPaginationCompactVisible()\" [attr.aria-label]=\"paginationTexts.ariaLabel\" class=\"nx-pagination-compact\" >\n  <button [attr.aria-label]=\"paginationTexts.previous\"\n    class=\"nx-pagination-compact__previous\"\n    [class.is-disabled]=\"_isPaginationPreviousDisabled()\"\n    [tabindex]=\"_isPaginationPreviousDisabled() ? -1 : 0\"\n\n    (click)=\"onPrev()\">\n    <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-left\"></nx-icon>\n    <span class=\"nx-pagination-compact__direction-label\">\n      {{ paginationTexts.previous }}\n    </span>\n  </button>\n  <div class=\"nx-pagination-compact__display\">\n      <span class=\"nx-pagination-compact__current-page\">{{ page }}</span>\n      <span class=\"nx-pagination-compact__page-separator\"> {{ paginationTexts.ofLabel }} </span>\n      <span class=\"nx-pagination-compact__total-pages\">{{ totalNumberPages }}</span>\n  </div>\n  <button\n    class=\"nx-pagination-compact__next\"\n    [class.is-disabled]=\"_isPaginationNextDisabled()\"\n    [tabindex]=\"_isPaginationNextDisabled() ? -1 : 0\"\n    [attr.aria-label]=\"paginationTexts.next\"\n    (click)=\"onNext()\">\n    <span class=\"nx-pagination-compact__direction-label\"> {{ paginationTexts.next }} </span>\n    <nx-icon class=\"nx-pagination__arrow\" name=\"arrow-right\"></nx-icon>\n  </button>\n</nav>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [":host button:focus{outline:0}:host button::-moz-focus-inner{border:0}.nx-pagination__container{display:flex;font-size:16px;font-size:var(--pagination-font-size,16px);line-height:24px;line-height:var(--pagination-line-height,24px);font-weight:400;font-weight:var(--pagination-font-weight,400);letter-spacing:0;letter-spacing:var(--pagination-letter-spacing,0);margin:8px 0;padding:0}@media (min-width:704px){.nx-pagination__container{margin:8px 0 40px}}.nx-pagination__item{margin:0 16px;list-style:none;font-weight:600;font-weight:var(--pagination-item-font-weight,600)}.nx-pagination__item:first-child,.nx-pagination__item:last-child{margin:0}.nx-pagination__item.is-ellipsis{color:#414141;color:var(--pagination-text-color,#414141)}.nx-pagination__item--expanded-view{display:block}.nx-pagination__link{color:#006192;color:var(--pagination-link-color,#006192);padding:0;text-decoration:none;background-color:transparent;border:0;cursor:pointer}.nx-pagination__link.is-active{color:#414141;color:var(--pagination-text-color,#414141);font-weight:700;cursor:default}nx-icon.nx-pagination__arrow{font-size:24px;font-size:var(--pagination-icon-size,24px)}.nx-pagination-compact{display:flex;font-size:16px;font-size:var(--pagination-font-size,16px);line-height:24px;line-height:var(--pagination-line-height,24px);font-weight:400;font-weight:var(--pagination-font-weight,400);letter-spacing:0;letter-spacing:var(--pagination-letter-spacing,0);margin:16px 0;padding:0}@media (min-width:704px){.nx-pagination-compact{margin:40px 0}}.nx-pagination-compact__display{color:#414141;color:var(--pagination-text-color,#414141);display:flex}.nx-pagination-compact__current-page{font-weight:700;margin-right:8px}.nx-pagination-compact__total-pages{margin-left:8px}.nx-pagination-compact__next,.nx-pagination-compact__previous,.nx-pagination__arrow-first,.nx-pagination__arrow-last{color:#006192;color:var(--pagination-link-color,#006192);font-weight:600;font-weight:var(--pagination-icon-font-weight,600);text-decoration:none;text-transform:uppercase;display:flex;align-items:center;padding:0;background-color:transparent;cursor:pointer;border:0}.nx-pagination-compact__previous{margin-right:32px}.nx-pagination-compact__next{margin-left:32px}.nx-pagination-compact__direction-label{font-size:16px;font-size:var(--pagination-compact-direction-font-size,16px);line-height:24px;line-height:var(--pagination-compact-direction-line-height,24px);font-weight:600;font-weight:var(--pagination-compact-direction-font-weight,600);letter-spacing:1px;letter-spacing:var(--pagination-compact-direction-letter-spacing,1px)}.nx-pagination-compact__direction-label:first-child{margin-right:8px}.nx-pagination-compact__direction-label:last-child{margin-left:8px}.nx-pagination-compact__next.is-disabled,.nx-pagination-compact__previous.is-disabled,.nx-pagination__link.is-disabled{color:rgba(0,97,146,.4);color:var(--pagination-link-disabled-color,rgba(0,97,146,.4));cursor:not-allowed}:host-context([data-whatinput=keyboard]) .nx-pagination--number:focus,:host-context([data-whatinput=keyboard]) .nx-pagination-compact__next:focus,:host-context([data-whatinput=keyboard]) .nx-pagination-compact__previous:focus,:host-context([data-whatinput=keyboard]) .nx-pagination__link:focus{box-shadow:0 0 0 2px #fff,0 0 0 6px #009de6;box-shadow:var(--focus-box-shadow,0 0 0 2px #fff,0 0 0 6px #009de6);border-radius:4px}@media screen and (-ms-high-contrast:active){.nx-pagination__link.is-active{border-bottom:4px solid windowText}.nx-pagination-compact__next.is-disabled,.nx-pagination-compact__previous.is-disabled,.nx-pagination__link.is-disabled{color:GrayText}:host-context([data-whatinput=keyboard]) .nx-pagination--number:focus,:host-context([data-whatinput=keyboard]) .nx-pagination-compact__next:focus,:host-context([data-whatinput=keyboard]) .nx-pagination-compact__previous:focus,:host-context([data-whatinput=keyboard]) .nx-pagination__link:focus{box-shadow:0 0 0 2px background,0 0 0 6px windowText}}.nx-pagination__link--first,.nx-pagination__link--last,.nx-pagination__link--next,.nx-pagination__link--previous{display:flex;align-items:center}.nx-pagination__item-next{margin-right:8px}.nx-pagination__item-previous{margin-left:8px}.nx-pagination-compact__direction-label,.nx-pagination__item--desktop,.nx-pagination__link--first,.nx-pagination__link--last{display:block}.nx-pagination__item--mobile{display:none}@media (max-width:703px){.nx-pagination-compact__direction-label,.nx-pagination__item--desktop,.nx-pagination__link--first,.nx-pagination__link--last{display:none}.nx-pagination__item--mobile{display:block}}"]
                }] }
    ];
    /** @nocollapse */
    NxPaginationComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [NX_PAGINATION_TEXTS,] }] },
        { type: NxPaginationUtils },
        { type: ChangeDetectorRef }
    ]; };
    NxPaginationComponent.propDecorators = {
        page: [{ type: Input, args: ['nxPage',] }],
        count: [{ type: Input, args: ['nxCount',] }],
        perPage: [{ type: Input, args: ['nxPerPage',] }],
        type: [{ type: Input, args: ['nxType',] }],
        nxGoPrev: [{ type: Output }],
        nxGoNext: [{ type: Output }],
        nxGoPage: [{ type: Output }]
    };
    return NxPaginationComponent;
}());
export { NxPaginationComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._page;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._count;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._perPage;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._type;
    /**
     * \@docs-private
     * @type {?}
     */
    NxPaginationComponent.prototype.paginationTexts;
    /**
     * \@docs-private
     * @type {?}
     */
    NxPaginationComponent.prototype.totalNumberPages;
    /**
     * An event emitted when the previous page button is clicked.
     * @type {?}
     */
    NxPaginationComponent.prototype.nxGoPrev;
    /**
     * An event emitted when the next page button is clicked
     * @type {?}
     */
    NxPaginationComponent.prototype.nxGoNext;
    /**
     * An event emitted when a page number is clicked.
     * Provides the number of the page as parameter.
     * @type {?}
     */
    NxPaginationComponent.prototype.nxGoPage;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype.paginationUtilsService;
    /**
     * @type {?}
     * @private
     */
    NxPaginationComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuei9uZ3gtbmRieC8iLCJzb3VyY2VzIjpbInBhZ2luYXRpb24vcGFnaW5hdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sRUFDTixLQUFLLEVBRUwsUUFBUSxFQUNSLE1BQU0sR0FFUCxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsc0JBQXNCLEVBQW9CLG1CQUFtQixFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDbkcsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sb0JBQW9CLENBQUM7Ozs7O0FBR3ZELDBCQUlDOzs7SUFIQyxxQkFBYzs7SUFDZCxxQkFBVzs7SUFDWCxxQkFBYzs7QUFHaEI7SUFzRUUsK0JBQzZDLGVBQWlDLEVBQ2xFLHNCQUF5QyxFQUN6QyxrQkFBcUM7UUFEckMsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUFtQjtRQUN6Qyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1CO1FBOUR6QyxVQUFLLEdBQVcsUUFBUSxDQUFDOzs7O1FBTWpDLHFCQUFnQixHQUFXLENBQUMsQ0FBQzs7OztRQTBDbkIsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7Ozs7UUFHcEMsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7Ozs7O1FBTXBDLGFBQVEsR0FBRyxJQUFJLFlBQVksRUFBVSxDQUFDO1FBTTlDLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxJQUFJLHNCQUFzQixDQUFDO0lBQ2xFLENBQUM7SUF4REYsc0JBQUksdUNBQUk7Ozs7UUFBUixjQUFxQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRXpDLDZCQUE2Qjs7Ozs7O1FBQzdCLFVBQ1MsS0FBYTtZQUNwQixJQUFJLENB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QkFBdUIsQ0FBQyxNQUFNOztpQkFFaEQ7Ozs7Z0RBa0VNLFFBQVEsWUFBSSxNQUFNLFNBQUMsbUJBQW1CO2dCQWhGcEMsaUJBQWlCO2dCQVp4QixpQkFBaUI7Ozt1QkEyQ2hCLEtBQUssU0FBQyxRQUFRO3dCQVFkLEtBQUssU0FBQyxTQUFTOzBCQVNmLEtBQUssU0FBQyxXQUFXO3VCQWFqQixLQUFLLFNBQUMsUUFBUTsyQkFPZCxNQUFNOzJCQUdOLE1BQU07MkJBTU4sTUFBTTs7SUErSFQsNEJBQUM7Q0FBQSxBQW5NRCxJQW1NQztTQTVMWSxxQkFBcUI7Ozs7OztJQUNoQyxzQ0FBc0I7Ozs7O0lBQ3RCLHVDQUF1Qjs7Ozs7SUFDdkIseUNBQXlCOzs7OztJQUN6QixzQ0FBaUM7Ozs7O0lBR2pDLGdEQUFrQzs7Ozs7SUFHbEMsaURBQTZCOzs7OztJQTBDN0IseUNBQThDOzs7OztJQUc5Qyx5Q0FBOEM7Ozs7OztJQU05Qyx5Q0FBZ0Q7Ozs7O0lBSTVDLHVEQUFpRDs7Ozs7SUFDakQsbURBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPcHRpb25hbCxcbiAgT3V0cHV0LFxuICBBZnRlckNvbnRlbnRJbml0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRGVmYXVsdFBhZ2luYXRpb25UZXh0cywgSVBhZ2luYXRpb25UZXh0cywgTlhfUEFHSU5BVElPTl9URVhUUyB9IGZyb20gJy4vcGFnaW5hdGlvbi10ZXh0cyc7XG5pbXBvcnQgeyBOeFBhZ2luYXRpb25VdGlscyB9IGZyb20gJy4vcGFnaW5hdGlvbi11dGlscyc7XG5cbi8qKiBAZG9jcy1wcml2YXRlICovXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2Uge1xuICBsYWJlbDogc3RyaW5nO1xuICB2YWx1ZTogYW55O1xuICBjbGFzczogc3RyaW5nO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdueC1wYWdpbmF0aW9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3BhZ2luYXRpb24uY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc3R5bGVVcmxzOiBbICcuL3BhZ2luYXRpb24uY29tcG9uZW50LnNjc3MnIF0sXG59KVxuXG5leHBvcnQgY2xhc3MgTnhQYWdpbmF0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0IHtcbiAgcHJpdmF0ZSBfcGFnZTogbnVtYmVyO1xuICBwcml2YXRlIF9jb3VudDogbnVtYmVyO1xuICBwcml2YXRlIF9wZXJQYWdlOiBudW1iZXI7XG4gIHByaXZhdGUgX3R5cGU6IHN0cmluZyA9ICdzaW1wbGUnO1xuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIHBhZ2luYXRpb25UZXh0czogSVBhZ2luYXRpb25UZXh0cztcblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICB0b3RhbE51bWJlclBhZ2VzOiBudW1iZXIgPSAwO1xuXG4gIGdldCBwYWdlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9wYWdlOyB9XG5cbiAgLyoqIFNldHMgdGhlIGN1cnJlbnQgcGFnZS4gKi9cbiAgQElucHV0KCdueFBhZ2UnKSAvLyB0aGUgY3VycmVudCBwYWdlXG4gIHNldCBwYWdlKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9wYWdlID0gdmFsdWU7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IGNvdW50KCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9jb3VudDsgfVxuXG4gIC8qKiBOdW1iZXIgb2YgdG90YWwgaXRlbXMgb3ZlciBhbGwgcGFnZXMuICovXG4gIEBJbnB1dCgnbnhDb3VudCcpIC8vIGhvdyBtYW55IHRvdGFsIGl0ZW1zIHRoZXJlIGFyZSBpbiBhbGwgcGFnZXNcbiAgc2V0IGNvdW50KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9jb3VudCA9IHZhbHVlO1xuICAgIHRoaXMudG90YWxOdW1iZXJQYWdlcyA9ICB0aGlzLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKTtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuICBnZXQgcGVyUGFnZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fcGVyUGFnZTsgfVxuXG4gIC8qKiBTZXRzIHRoZSBudW1iZXIgb2YgaXRlbXMgeW91IHdhbnQgdG8gc2hvdyBwZXIgcGFnZS4gKi9cbiAgQElucHV0KCdueFBlclBhZ2UnKSAvLyBob3cgbWFueSBpdGVtcyB3ZSB3YW50IHRvIHNob3cgcGVyIHBhZ2VcbiAgc2V0IHBlclBhZ2UodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX3BlclBhZ2UgPSB2YWx1ZTtcbiAgICB0aGlzLnRvdGFsTnVtYmVyUGFnZXMgPSAgdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzKCk7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbiAgZ2V0IHR5cGUoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuX3R5cGU7IH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB0aGUgdHlwZSBvZiBwYWdpbmF0aW9uLlxuICAgKlxuICAgKiBWYWx1ZXM6IHNpbXBsZSB8IGFkdmFuY2VkLCBkZWZhdWx0OiBzaW1wbGUuXG4gICAqL1xuICBASW5wdXQoJ254VHlwZScpXG4gIHNldCB0eXBlKHZhbHVlOiBzdHJpbmcpIHsgLy8gdHlwZSBhZHZhbmNlZCBvciBzaW1wbGVcbiAgICB0aGlzLl90eXBlID0gdmFsdWU7XG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKiogQW4gZXZlbnQgZW1pdHRlZCB3aGVuIHRoZSBwcmV2aW91cyBwYWdlIGJ1dHRvbiBpcyBjbGlja2VkLiAqL1xuICBAT3V0cHV0KCkgbnhHb1ByZXYgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgLyoqIEFuIGV2ZW50IGVtaXR0ZWQgd2hlbiB0aGUgbmV4dCBwYWdlIGJ1dHRvbiBpcyBjbGlja2VkICovXG4gIEBPdXRwdXQoKSBueEdvTmV4dCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICAvKipcbiAgICogQW4gZXZlbnQgZW1pdHRlZCB3aGVuIGEgcGFnZSBudW1iZXIgaXMgY2xpY2tlZC5cbiAgICogUHJvdmlkZXMgdGhlIG51bWJlciBvZiB0aGUgcGFnZSBhcyBwYXJhbWV0ZXIuXG4gICAqL1xuICBAT3V0cHV0KCkgbnhHb1BhZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIEBPcHRpb25hbCgpIEBJbmplY3QoTlhfUEFHSU5BVElPTl9URVhUUykgcGFnaW5hdGlvblRleHRzOiBJUGFnaW5hdGlvblRleHRzLFxuICAgICAgcHJpdmF0ZSBwYWdpbmF0aW9uVXRpbHNTZXJ2aWNlOiBOeFBhZ2luYXRpb25VdGlscyxcbiAgICAgIHByaXZhdGUgX2NoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHRoaXMucGFnaW5hdGlvblRleHRzID0gcGFnaW5hdGlvblRleHRzIHx8IERlZmF1bHRQYWdpbmF0aW9uVGV4dHM7XG4gICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy50b3RhbE51bWJlclBhZ2VzID0gIHRoaXMuY2FsY3VsYXRlVG90YWxQYWdlcygpO1xuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdhZHZhbmNlZCcgJiYgKCF0aGlzLnBhZ2luYXRpb25UZXh0cy5sYXN0IHx8ICF0aGlzLnBhZ2luYXRpb25UZXh0cy5maXJzdCkpIHtcbiAgICAgIGNvbnNvbGUud2FybignUGxlYXNlIGRlZmluZSBhcmlhIGxhYmVscyBmb3IgdGhlIGxhc3QgYW5kIGZpcnN0IGFycm93cy4nKTtcbiAgICB9XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRoZSBmaXJzdCBwYWdlLiAqL1xuICBnZXRNaW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50b3RhbE51bWJlclBhZ2VzID4gMCA/IDEgOiAwO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIG51bWJlciBvZiB0aGUgbGFzdCBwYWdlLiAqL1xuICBnZXRNYXgoKTogbnVtYmVyIHtcbiAgICBsZXQgbWF4ID0gdGhpcy5fcGVyUGFnZSAqIHRoaXMuX3BhZ2U7XG4gICAgaWYgKG1heCA+IHRoaXMuX2NvdW50KSB7XG4gICAgICBtYXggPSB0aGlzLl9jb3VudDtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2YgcGFnZXMgKi9cbiAgY2FsY3VsYXRlVG90YWxQYWdlcygpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5fY291bnQgLyB0aGlzLl9wZXJQYWdlKSB8fCAwO1xuICB9XG5cbiAgLyoqIERpcmVjdHMgdG8gdGhlIHBhZ2Ugd2l0aCBudW1iZXIgbi4gKi9cbiAgb25QYWdlKG46IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubnhHb1BhZ2UuZW1pdChuKTtcbiAgfVxuXG4gIC8qKiBEaXJlY3RzIHRvIHRoZSBwcmV2aW91cyBwYWdlLiAqL1xuICBvblByZXYoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pc1BhZ2luYXRpb25QcmV2aW91c0Rpc2FibGVkKCkpIHtcbiAgICAgIHRoaXMubnhHb1ByZXYuZW1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBEaXJlY3RzIHRvIHRoZSBuZXh0IHBhZ2UuICovXG4gIG9uTmV4dCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzUGFnaW5hdGlvbk5leHREaXNhYmxlZCgpKSB7XG4gICAgICB0aGlzLm54R29OZXh0LmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICAvKiogRGlyZWN0cyB0byB0aGUgZmlyc3QgcGFnZS4gKi9cbiAgb25GaXJzdCgpIHtcbiAgICBpZiAoIXRoaXMuX2lzUGFnaW5hdGlvblByZXZpb3VzRGlzYWJsZWQoKSkge1xuICAgICAgdGhpcy5vblBhZ2UoMSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIERpcmVjdHMgdG8gdGhlIGxhc3QgcGFnZS4gKi9cbiAgb25MYXN0KCkge1xuICAgIGlmICghdGhpcy5faXNQYWdpbmF0aW9uTmV4dERpc2FibGVkKCkpIHtcbiAgICAgIHRoaXMub25QYWdlKHRoaXMudG90YWxOdW1iZXJQYWdlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqIFJldHVybnMgaWYgdGhlIGN1cnJlbnQgcGFnZSBpcyB0aGUgbGFzdCBwYWdlLiAqL1xuICBsYXN0UGFnZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fcGVyUGFnZSAqIHRoaXMuX3BhZ2UgPj0gdGhpcy5fY291bnQ7XG4gIH1cblxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICBnZXRQYWdlcygpOiBQYWdlW10ge1xuICAgIHJldHVybiB0aGlzLnBhZ2luYXRpb25VdGlsc1NlcnZpY2UuZ2V0UGFnZXModGhpcy5fcGFnZSwgdGhpcy50b3RhbE51bWJlclBhZ2VzKTtcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGdldE1vYmlsZVBhZ2VzKCk6IFBhZ2VbXSB7XG4gICAgcmV0dXJuIHRoaXMucGFnaW5hdGlvblV0aWxzU2VydmljZS5nZXRNb2JpbGVQYWdlcyh0aGlzLl9wYWdlLCB0aGlzLnRvdGFsTnVtYmVyUGFnZXMpO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgZ2V0UGFnaW5hdGlvbkl0ZW1DbGFzc2VzKHBhZ2U6IFBhZ2UpOiBPYmplY3Qge1xuICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICAnaXMtZWxsaXBzaXMnOiBwYWdlLmxhYmVsID09PSAnLi4uJyxcbiAgICAgICdueC1wYWdpbmF0aW9uX19pdGVtLS1leHBhbmRlZC12aWV3JzogcGFnZS5jbGFzcyA9PT0gJ2V4cGFuZGVkLXZpZXcnXG4gICAgfTtcbiAgICByZXR1cm4gY2xhc3NlcztcbiAgfVxuXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXG4gIGdldFBhZ2luYXRpb25OdW1iZXJDbGFzc2VzKHBhZ2U6IFBhZ2UpOiBPYmplY3Qge1xuICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICAnaXMtYWN0aXZlJzogcGFnZS52YWx1ZSA9PT0gdGhpcy5wYWdlLFxuICAgICAgJ254LXBhZ2luYXRpb25fX2VsbGlwc2lzJzogcGFnZS5sYWJlbCA9PT0gJy4uLicsXG4gICAgICAnbngtcGFnaW5hdGlvbl9fbGluayc6IHBhZ2UubGFiZWwgIT09ICcuLi4nXG4gICAgfTtcbiAgICByZXR1cm4gY2xhc3NlcztcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRydWUsIGlmIGBueENvdW50YCBpcyBncmVhdGVyIHRoYW4gMCwgZWxzZSBmYWxzZS4gKi9cbiAgaXNQYWdpbmF0aW9uVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudCA+IDA7XG4gIH1cblxuICAvKiogUmV0dXJucyB0cnVlLCBpZiBgbnhDb3VudGAgaXMgZ3JlYXRlciB0aGFuIDAgYW5kIHRoZSB0eXBlIG9mIHBhZ2luYXRpb24gaXMgJ3NpbXBsZScsIGVsc2UgZmFsc2UuICovXG4gIGlzUGFnaW5hdGlvbkNvbXBhY3RWaXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnR5cGUuaW5jbHVkZXMoJ3NpbXBsZScpICYmIHRoaXMuY291bnQgPiAwO1xuICB9XG5cbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgaXNQYWdpbmF0aW9uQ29udGFpbmVyVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50eXBlLmluY2x1ZGVzKCdhZHZhbmNlZCcpO1xuICB9XG5cbiAgX2lzUGFnaW5hdGlvblByZXZpb3VzRGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGFnZSA9PT0gdGhpcy5nZXRNaW4oKTtcbiAgfVxuXG4gIF9pc1BhZ2luYXRpb25OZXh0RGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGFnZSA9PT0gdGhpcy50b3RhbE51bWJlclBhZ2VzO1xuICB9XG59XG4iXX0=